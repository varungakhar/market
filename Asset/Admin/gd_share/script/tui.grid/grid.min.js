/*!
 * bundle created at "Thu Feb 02 2017 16:53:28 GMT+0900 (KST)"
 * version: 1.7.2
 */
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})([function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var ModelManager=__webpack_require__(5);var ViewFactory=__webpack_require__(28);var DomState=__webpack_require__(49);var PublicEventEmitter=__webpack_require__(50);var PainterManager=__webpack_require__(51);var PainterController=__webpack_require__(61);var NetAddOn=__webpack_require__(62);var ComponentHolder=__webpack_require__(65);var util=__webpack_require__(8);var themeManager=__webpack_require__(66);var themeNameConst=__webpack_require__(9).themeName;var instanceMap={};__webpack_require__(72);tui=window.tui=tui||{};tui.Grid=View.extend({initialize:function(options){var domState=new DomState(this.$el);options=util.enableDeprecatedOptions(options);this.id=util.getUniqueKey();this.modelManager=this._createModelManager(options,domState);this.painterManager=this._createPainterManager();this.componentHolder=this._createComponentHolder(options.pagination);this.viewFactory=this._createViewFactory(domState,options);this.container=this.viewFactory.createContainer();this.publicEventEmitter=this._createPublicEventEmitter();this.domState=domState;this.container.render();this.refreshLayout();if(!themeManager.isApplied()){themeManager.apply(themeNameConst.DEFAULT);}this.addOn={};instanceMap[this.id]=this;},_createModelManager:function(options,domState){var modelOptions=_.assign({},options,{gridId:this.id});_.omit(modelOptions,"el","singleClickEdit");return new ModelManager(modelOptions,domState);},_createPainterManager:function(){var controller=new PainterController({focusModel:this.modelManager.focusModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,selectionModel:this.modelManager.selectionModel});return new PainterManager({gridId:this.id,selectType:this.modelManager.columnModel.get("selectType"),isFixedRowHeight:this.modelManager.dimensionModel.get("isFixedRowHeight"),controller:controller});},_createViewFactory:function(domState,options){var viewOptions=_.pick(options,["singleClickEdit","resizeHandle","toolbar","copyOption","footer"]);var dependencies={modelManager:this.modelManager,painterManager:this.painterManager,componentHolder:this.componentHolder,domState:domState};return new ViewFactory(_.assign(dependencies,viewOptions));},_createComponentHolder:function(pgOptions){return new ComponentHolder({pagination:pgOptions});},_createPublicEventEmitter:function(){var emitter=new PublicEventEmitter(this);emitter.listenToFocusModel(this.modelManager.focusModel);emitter.listenToContainerView(this.container);return emitter;},disable:function(){this.modelManager.dataModel.setDisabled(true);},enable:function(){this.modelManager.dataModel.setDisabled(false);},disableRow:function(rowKey){this.modelManager.dataModel.disableRow(rowKey);},enableRow:function(rowKey){this.modelManager.dataModel.enableRow(rowKey);},getValue:function(rowKey,columnName,isOriginal){return this.modelManager.dataModel.getValue(rowKey,columnName,isOriginal);},getColumnValues:function(columnName,isJsonString){return this.modelManager.dataModel.getColumnValues(columnName,isJsonString);},getRow:function(rowKey,isJsonString){return this.modelManager.dataModel.getRowData(rowKey,isJsonString);},getRowAt:function(index,isJsonString){return this.modelManager.dataModel.getRowDataAt(index,isJsonString);},getRowCount:function(){return this.modelManager.dataModel.length;},getSelectedRowKey:function(){return this.modelManager.focusModel.which().rowKey;},getElement:function(rowKey,columnName){return this.modelManager.dataModel.getElement(rowKey,columnName);},setValue:function(rowKey,columnName,columnValue){this.modelManager.dataModel.setValue(rowKey,columnName,columnValue);},setColumnValues:function(columnName,columnValue,isCheckCellState){this.modelManager.dataModel.setColumnValues(columnName,columnValue,isCheckCellState);},replaceRowList:function(rowList){this.modelManager.dataModel.replaceRowList(rowList);},setRowList:function(rowList,callback){this.modelManager.dataModel.setRowList(rowList,true,callback);},setBodyHeight:function(value){this.modelManager.dimensionModel.set("bodyHeight",value);},focus:function(rowKey,columnName,isScrollable){this.modelManager.focusModel.focusClipboard();this.modelManager.focusModel.focus(rowKey,columnName,isScrollable);},focusAt:function(rowIndex,columnIndex,isScrollable){this.modelManager.focusModel.focusAt(rowIndex,columnIndex,isScrollable);},focusIn:function(rowKey,columnName,isScrollable){this.modelManager.focusModel.focusIn(rowKey,columnName,isScrollable);},focusInAt:function(rowIndex,columnIndex,isScrollable){this.modelManager.focusModel.focusInAt(rowIndex,columnIndex,isScrollable);},readyForKeyControl:function(){this.modelManager.focusModel.focusClipboard();},blur:function(){this.modelManager.focusModel.blur();},checkAll:function(){this.modelManager.dataModel.checkAll();},check:function(rowKey){this.modelManager.dataModel.check(rowKey);},uncheckAll:function(){this.modelManager.dataModel.uncheckAll();},uncheck:function(rowKey){this.modelManager.dataModel.uncheck(rowKey);},clear:function(){this.modelManager.dataModel.setRowList([]);},removeRow:function(rowKey,options){if(tui.util.isBoolean(options)&&options){options={removeOriginalData:true};}this.modelManager.dataModel.removeRow(rowKey,options);},removeCheckedRows:function(isConfirm){var rowKeyList=this.getCheckedRowKeyList(),message=rowKeyList.length+"건의 데이터를 삭제하시겠습니까?";if(rowKeyList.length>0&&(!isConfirm||confirm(message))){_.each(rowKeyList,function(rowKey){this.modelManager.dataModel.removeRow(rowKey);},this);return true;}return false;},enableCheck:function(rowKey){this.modelManager.dataModel.enableCheck(rowKey);},disableCheck:function(rowKey){this.modelManager.dataModel.disableCheck(rowKey);},getCheckedRowKeyList:function(isJsonString){var checkedRowList=this.modelManager.dataModel.getRowList(true);var checkedRowKeyList=_.pluck(checkedRowList,"rowKey");return isJsonString?JSON.stringify(checkedRowKeyList):checkedRowKeyList;},getCheckedRowList:function(isJsonString){var checkedRowList=this.modelManager.dataModel.getRowList(true);return isJsonString?JSON.stringify(checkedRowList):checkedRowList;},getColumnModelList:function(){return this.modelManager.columnModel.get("dataColumnModelList");},getModifiedRowList:function(options){return this.modelManager.dataModel.getModifiedRowList(options);},appendRow:function(row,options){this.modelManager.dataModel.append(row,options);},prependRow:function(row,options){this.modelManager.dataModel.prepend(row,options);},isChanged:function(){return this.modelManager.dataModel.isChanged();},getAddOn:function(name){return name?this.addOn[name]:this.addOn;},restore:function(){this.modelManager.dataModel.restore();},select:function(rowKey){var firstColumn=this.modelManager.columnModel.at(0,true);this.modelManager.focusModel.focus(rowKey,firstColumn.columnName);},unselect:function(){this.modelManager.focusModel.unselect(true);},setColumnFixCount:function(count){this.modelManager.columnModel.set("columnFixCount",count);},setColumnModelList:function(columnModelList){this.modelManager.columnModel.set("columnModelList",columnModelList);},use:function(name,options){if(name==="Net"){options=$.extend({toolbarModel:this.modelManager.toolbarModel,renderModel:this.modelManager.renderModel,dataModel:this.modelManager.dataModel,pagination:this.componentHolder.getInstance("pagination")},options);this.addOn.Net=new NetAddOn(options);this.publicEventEmitter.listenToNetAddon(this.addOn.Net);}return this;},getRowList:function(){return this.modelManager.dataModel.getRowList();},sort:function(columnName,isAscending){this.modelManager.dataModel.sortByField(columnName,isAscending);},unSort:function(){this.sort("rowKey");},addCellClassName:function(rowKey,columnName,className){this.modelManager.dataModel.get(rowKey).addCellClassName(columnName,className);},addRowClassName:function(rowKey,className){this.modelManager.dataModel.get(rowKey).addClassName(className);},removeCellClassName:function(rowKey,columnName,className){this.modelManager.dataModel.get(rowKey).removeCellClassName(columnName,className);},removeRowClassName:function(rowKey,className){this.modelManager.dataModel.get(rowKey).removeClassName(className);},getRowSpanData:function(rowKey,columnName){return this.modelManager.dataModel.getRowSpanData(rowKey,columnName);},getIndexOfRow:function(rowKey){return this.modelManager.dataModel.indexOfRowKey(rowKey);},getPagination:function(){return this.componentHolder.getInstance("pagination");},setDisplayRowCount:function(count){this.modelManager.dimensionModel.setBodyHeightWithRowCount(count);},setSize:function(width,height){this.modelManager.dimensionModel.setSize(width,height);},refreshLayout:function(){this.modelManager.dimensionModel.refreshLayout();},resetColumnWidths:function(){this.modelManager.coordColumnModel.resetColumnWidths();},showColumn:function(){var args=tui.util.toArray(arguments);this.modelManager.columnModel.setHidden(args,false);},hideColumn:function(){var args=tui.util.toArray(arguments);this.modelManager.columnModel.setHidden(args,true);},setFooterColumnContent:function(columnName,contents){this.modelManager.columnModel.setFooterContent(columnName,contents);},validate:function(){return this.modelManager.dataModel.validate();},destroy:function(){this.modelManager.destroy();this.container.destroy();this.modelManager=this.container=null;}});tui.Grid.getInstanceById=function(id){return instanceMap[id];};tui.Grid.applyTheme=function(presetName,extOptions){themeManager.apply(presetName,extOptions);};},function(module,exports){module.exports=_;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Backbone=__webpack_require__(3);var common=__webpack_require__(4);var View=Backbone.View.extend({initialize:function(){this._children=[];},error:function(message){var GridError=function(){this.name="Grid Exception";this.message=message||"error";};GridError.prototype=new Error();return new GridError();},_addChildren:function(views){if(!_.isArray(views)){views=[views];}[].push.apply(this._children,_.compact(views));},_renderChildren:function(){var elements=_.map(this._children,function(view){return view.render().el;});return elements;},_triggerChildrenAppended:function(){_.each(this._children,function(view){view.trigger("appended");});},destroy:function(){this.stopListening();this._destroyChildren();this.remove();},_destroyChildren:function(){if(this._children){while(this._children.length>0){this._children.pop().destroy();}}}});_.assign(View.prototype,common);module.exports=View;},function(module,exports){module.exports=Backbone;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var common={setOwnProperties:function(properties){_.each(properties,function(value,key){this[key]=value;},this);}};module.exports=common;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var ColumnModelData=__webpack_require__(6);var RowListData=__webpack_require__(10);var ToolbarModel=__webpack_require__(15);var DimensionModel=__webpack_require__(16);var CoordRowModel=__webpack_require__(17);var CoordColumnModel=__webpack_require__(18);var CoordConverterModel=__webpack_require__(19);var FocusModel=__webpack_require__(20);var RenderModel=__webpack_require__(22);var SmartRenderModel=__webpack_require__(25);var SelectionModel=__webpack_require__(26);var SummaryModel=__webpack_require__(27);var util=__webpack_require__(8);var defaultOptions={columnFixCount:0,columnModelList:[],keyColumnName:null,selectType:"",autoNumbering:true,headerHeight:35,rowHeight:27,fitToParentHeight:false,showDummyRows:false,minimumColumnWidth:50,notUseSmartRendering:false,columnMerge:[],scrollX:true,scrollY:true,useClientSort:true,toolbar:null};var ModelManager=tui.util.defineClass({init:function(options,domState){options=$.extend(true,{},defaultOptions,options);this.gridId=options.gridId;this.columnModel=this._createColumnModel(options);this.dataModel=this._createDataModel(options,domState);this.toolbarModel=this._createToolbarModel(options);this.dimensionModel=this._createDimensionModel(options,domState);this.coordRowModel=this._createCoordRowModel(domState);this.coordColumnModel=this._createCoordColumnModel();this.focusModel=this._createFocusModel(domState);this.renderModel=this._createRenderModel(options);this.coordConverterModel=this._createCoordConverterModel();this.selectionModel=this._createSelectionModel();this.summaryModel=this._createSummaryModel(options.footer);this.focusModel.renderModel=this.renderModel;},_createColumnModel:function(options){return new ColumnModelData({hasNumberColumn:options.autoNumbering,keyColumnName:options.keyColumnName,columnFixCount:options.columnFixCount,selectType:options.selectType,columnMerge:options.columnMerge,columnModelList:options.columnModelList});},_createDataModel:function(options,domState){return new RowListData([],{gridId:this.gridId,domState:domState,columnModel:this.columnModel,useClientSort:options.useClientSort});},_createToolbarModel:function(options){return new ToolbarModel(options.toolbar);},_createDimensionModel:function(options,domState){var dimensionModel;var attrs={headerHeight:options.headerHeight,bodyHeight:options.bodyHeight,footerHeight:options.footer?options.footer.height:0,rowHeight:options.rowHeight,fitToParentHeight:options.fitToParentHeight,scrollX:!!options.scrollX,scrollY:!!options.scrollY,minimumColumnWidth:options.minimumColumnWidth,isFixedRowHeight:options.isFixedRowHeight,isFixedHeight:options.isFixedHeight};if(options.isFixedRowHeight===false&&!options.notUseSmartRendering){util.warning("The isFixedRowHeight can't be false if the notUseSmartRendering is not set to false.");attrs.isFixedRowHeight=true;}dimensionModel=new DimensionModel(attrs,{columnModel:this.columnModel,dataModel:this.dataModel,domState:domState});if(_.isUndefined(options.bodyHeight)&&options.displayRowCount){dimensionModel.setBodyHeightWithRowCount(options.displayRowCount);}return dimensionModel;},_createCoordRowModel:function(domState){return new CoordRowModel(null,{dataModel:this.dataModel,dimensionModel:this.dimensionModel,domState:domState});},_createCoordColumnModel:function(){return new CoordColumnModel(null,{columnModel:this.columnModel,dimensionModel:this.dimensionModel});},_createCoordConverterModel:function(){return new CoordConverterModel(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,focusModel:this.focusModel,coordRowModel:this.coordRowModel,renderModel:this.renderModel,coordColumnModel:this.coordColumnModel});},_createFocusModel:function(domState){return new FocusModel(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,renderModel:this.renderModel,domState:domState});},_createSelectionModel:function(){return new SelectionModel(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,coordConverterModel:this.coordConverterModel,renderModel:this.renderModel,focusModel:this.focusModel});},_createRenderModel:function(options){var attrs,renderOptions,Constructor;attrs={emptyMessage:options.emptyMessage,showDummyRows:options.showDummyRows};renderOptions={columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,focusModel:this.focusModel,coordRowModel:this.coordRowModel,coordColumnModel:this.coordColumnModel};Constructor=options.notUseSmartRendering?RenderModel:SmartRenderModel;return new Constructor(attrs,renderOptions);},_createSummaryModel:function(footerOptions){var autoColumnNames=[];if(!footerOptions||!footerOptions.columnContent){return null;}_.each(footerOptions.columnContent,function(options,columnName){if(_.isFunction(options.template)&&options.useAutoSummary!==false){autoColumnNames.push(columnName);}});return new SummaryModel(null,{dataModel:this.dataModel,autoColumnNames:autoColumnNames});},destroy:function(){_.each(this,function(value,property){if(value&&tui.util.isFunction(value._destroy)){value._destroy();}if(value&&tui.util.isFunction(value.stopListening)){value.stopListening();}this[property]=null;},this);}});module.exports=ModelManager;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Model=__webpack_require__(7);var util=__webpack_require__(8);var frameConst=__webpack_require__(9).frame;var ColumnModel=Model.extend({initialize:function(){Model.prototype.initialize.apply(this,arguments);this.textType={normal:true,text:true,password:true};this._setColumnModelList(this.get("columnModelList"));this.on("change",this._onChange,this);},defaults:{keyColumnName:null,columnFixCount:0,metaColumnModelList:[],dataColumnModelList:[],visibleList:[],hasNumberColumn:true,selectType:"",columnModelMap:{},relationListMap:{},columnMerge:[]},_initializeMetaColumns:function(source){var dest=[];this._initializeButtonColumn(dest);this._initializeNumberColumn(dest);this._overwriteColumnModelList(dest,source);return dest;},_overwriteColumnModelList:function(dest,source){_.each(source,function(columnModel){this._extendColumnList(columnModel,dest);},this);},_initializeNumberColumn:function(metaColumnModelList){var hasNumberColumn=this.get("hasNumberColumn");var numberColumn={columnName:"_number",align:"center",title:"순위",isFixedWidth:true,width:60};if(!hasNumberColumn){numberColumn.isHidden=true;}this._extendColumnList(numberColumn,metaColumnModelList);},_initializeButtonColumn:function(metaColumnModelList){var selectType=this.get("selectType");var buttonColumn={columnName:"_button",isHidden:false,align:"center",editOption:{type:"mainButton"},isFixedWidth:true,width:40};if(selectType==="checkbox"){buttonColumn.title='<input type="checkbox"/>';}else{if(selectType==="radio"){buttonColumn.title="선택";}else{buttonColumn.isHidden=true;}}this._extendColumnList(buttonColumn,metaColumnModelList);},_extendColumnList:function(columnObj,columnModelList){var columnName=columnObj.columnName;var index=_.findIndex(columnModelList,{columnName:columnName});if(index===-1){columnModelList.push(columnObj);}else{columnModelList[index]=$.extend(columnModelList[index],columnObj);}},at:function(index,isVisible){var columnModelList=isVisible?this.getVisibleColumnModelList():this.get("dataColumnModelList");return columnModelList[index];},indexOfColumnName:function(columnName,isVisible){var columnModelList;if(isVisible){columnModelList=this.getVisibleColumnModelList();}else{columnModelList=this.get("dataColumnModelList");}return _.findIndex(columnModelList,{columnName:columnName});},isLside:function(columnName){var index=this.indexOfColumnName(columnName,true);return(index>-1)&&(index<this.get("columnFixCount"));},getVisibleColumnModelList:function(whichSide,withMeta){var startIndex=withMeta?0:this.getVisibleMetaColumnCount();var visibleColumnFixCount=this.getVisibleColumnFixCount(withMeta);var columnModelList;whichSide=whichSide&&whichSide.toUpperCase();if(whichSide===frameConst.L){columnModelList=this.get("visibleList").slice(startIndex,visibleColumnFixCount);}else{if(whichSide===frameConst.R){columnModelList=this.get("visibleList").slice(visibleColumnFixCount);}else{columnModelList=this.get("visibleList").slice(startIndex);}}return columnModelList;},getVisibleMetaColumnCount:function(){var models=this.get("metaColumnModelList");var totalLength=models.length;var hiddenLength=_.where(models,{isHidden:true}).length;return(totalLength-hiddenLength);},getVisibleColumnFixCount:function(withMeta){var count=this.get("columnFixCount");var fixedColumns=_.first(this.get("dataColumnModelList"),count);var visibleFixedColumns,visibleCount;visibleFixedColumns=_.filter(fixedColumns,function(column){return !column.isHidden;});visibleCount=visibleFixedColumns.length;if(withMeta){visibleCount+=this.getVisibleMetaColumnCount();}return visibleCount;},getColumnModel:function(columnName){return this.get("columnModelMap")[columnName];},isTextType:function(columnName){return !!this.textType[this.getEditType(columnName)];},getEditType:function(columnName){var columnModel=this.getColumnModel(columnName);var editType="normal";if(columnName==="_button"||columnName==="_number"){editType=columnName;}else{if(columnModel&&columnModel.editOption&&columnModel.editOption.type){editType=columnModel.editOption.type;}}return editType;},_makeVisibleColumnModelList:function(metaColumnModelList,dataColumnModelList){metaColumnModelList=metaColumnModelList||this.get("metaColumnModelList");dataColumnModelList=dataColumnModelList||this.get("dataColumnModelList");return _.filter(metaColumnModelList.concat(dataColumnModelList),function(item){return !item.isHidden;});},_getRelationListMap:function(columnModelList){var relationListMap={};_.each(columnModelList,function(columnModel){var columnName=columnModel.columnName;if(columnModel.relationList){relationListMap[columnName]=columnModel.relationList;}});return relationListMap;},getIgnoredColumnNameList:function(){var columnModelLsit=this.get("dataColumnModelList");var ignoreColumnNameList=[];_.each(columnModelLsit,function(columnModel){if(columnModel.isIgnore){ignoreColumnNameList.push(columnModel.columnName);}});return ignoreColumnNameList;},_setColumnModelList:function(columnModelList,columnFixCount){var division,relationListMap,visibleList,metaColumnModelList,dataColumnModelList;columnModelList=$.extend(true,[],columnModelList);if(tui.util.isUndefined(columnFixCount)){columnFixCount=this.get("columnFixCount");}division=_.partition(columnModelList,function(model){return util.isMetaColumn(model.columnName);},this);metaColumnModelList=this._initializeMetaColumns(division[0]);dataColumnModelList=division[1];relationListMap=this._getRelationListMap(dataColumnModelList);visibleList=this._makeVisibleColumnModelList(metaColumnModelList,dataColumnModelList);this.set({metaColumnModelList:metaColumnModelList,dataColumnModelList:dataColumnModelList,columnModelMap:_.indexBy(metaColumnModelList.concat(dataColumnModelList),"columnName"),relationListMap:relationListMap,columnFixCount:Math.max(0,columnFixCount),visibleList:visibleList},{silent:true});this.unset("columnModelList",{silent:true});this.trigger("columnModelChange");},_onChange:function(model){var changed=model.changed;var columnFixCount=changed.columnFixCount;var columnModelList=changed.columnModelList;if(!columnModelList){columnModelList=this.get("dataColumnModelList");}this._setColumnModelList(columnModelList,columnFixCount);},setHidden:function(columnNames,isHidden){var name,names,columnModel,visibleList;while(columnNames.length){name=columnNames.shift();columnModel=this.getColumnModel(name);if(columnModel){columnModel.isHidden=isHidden;}else{names=this.getUnitColumnNamesIfMerged(name);columnNames.push.apply(columnNames,names);}}visibleList=this._makeVisibleColumnModelList(this.get("metaColumnModelList"),this.get("dataColumnModelList"));this.set("visibleList",visibleList,{silent:true});this.trigger("columnModelChange");},getUnitColumnNamesIfMerged:function(columnName){var columnMergeInfoList=this.get("columnMerge");var stackForSearch=[];var searchedNames=[];var name,columnModel,columnMergeInfoItem;stackForSearch.push(columnName);while(stackForSearch.length){name=stackForSearch.shift();columnModel=this.getColumnModel(name);if(columnModel){searchedNames.push(name);}else{columnMergeInfoItem=_.findWhere(columnMergeInfoList,{columnName:name});if(columnMergeInfoItem){stackForSearch.push.apply(stackForSearch,columnMergeInfoItem.columnNameList);}}}return _.uniq(searchedNames);},setFooterContent:function(columnName,contents){this.trigger("setFooterContent",columnName,contents);}});module.exports=ColumnModel;},function(module,exports,__webpack_require__){var Backbone=__webpack_require__(3);var _=__webpack_require__(1);var common=__webpack_require__(4);var Model=Backbone.Model.extend({});_.assign(Model.prototype,common);module.exports=Model;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var CELL_BORDER_WIDTH=__webpack_require__(9).dimension.CELL_BORDER_WIDTH;var util={uniqueId:0,getAttributesString:function(attributes){var str="";_.each(attributes,function(value,key){str+=" "+key+'="'+value+'"';},this);return str;},sum:function(list){return _.reduce(list,function(memo,value){memo+=value;return memo;},0);},getMinMax:function(arr){return{min:Math.min.apply(null,arr),max:Math.max.apply(null,arr)};},getHeight:function(rowCount,rowHeight){return rowCount===0?rowCount:rowCount*(rowHeight+CELL_BORDER_WIDTH);},getDisplayRowCount:function(tableHeight,rowHeight){return Math.ceil(tableHeight/(rowHeight+CELL_BORDER_WIDTH));},getRowHeight:function(rowCount,tableHeight){return rowCount===0?0:Math.floor(((tableHeight-CELL_BORDER_WIDTH)/rowCount));},isMetaColumn:function(columnName){return _.contains(["_button","_number"],columnName);},isEqual:function(target,dist){var isDiff,compareObject=function(targetObj,distObj){var result=false;tui.util.forEach(targetObj,function(item,key){result=(item===distObj[key]);return result;});return result;};if(typeof target!==typeof dist){return false;}else{if(_.isArray(target)&&target.length!==dist.length){return false;}else{if(_.isObject(target)){isDiff=!compareObject(target,dist)||!compareObject(dist,target);return !isDiff;}else{if(target!==dist){return false;}}}}return true;},isBlank:function(target){if(_.isString(target)){return !target.length;}return _.isUndefined(target)||_.isNull(target);},stripTags:function(htmlString){var matchResult;htmlString=htmlString.replace(/[\n\r\t]/g,"");if(tui.util.hasEncodableString(htmlString)){if(/<img/i.test(htmlString)){matchResult=htmlString.match(/<img[^>]*\ssrc=["']?([^>"']+)["']?[^>]*>/i);htmlString=matchResult?matchResult[1]:"";}else{htmlString=htmlString.replace(/<button.*?<\/button>/gi,"");}htmlString=$.trim(tui.util.decodeHTMLEntity(htmlString.replace(/<\/?(?:h[1-5]|[a-z]+(?::[a-z]+)?)[^>]*>/ig,"")));}return htmlString;},toString:function(value){if(_.isUndefined(value)||_.isNull(value)){return"";}return String(value);},getUniqueKey:function(){this.uniqueId+=1;return this.uniqueId;},toQueryString:function(dataObj){var queryList=[];_.each(dataObj,function(value,name){if(!_.isString(value)&&!_.isNumber(value)){value=JSON.stringify(value);}value=encodeURIComponent(value);if(value){queryList.push(name+"="+value);}});return queryList.join("&");},toQueryObject:function(queryString){var queryList=queryString.split("&"),obj={};_.each(queryList,function(query){var tmp=query.split("="),key,value;key=tmp[0];value=decodeURIComponent(tmp[1]);try{value=JSON.parse(value);}catch(e){}if(!_.isNull(value)){obj[key]=value;}});return obj;},convertValueType:function(value,type){if(type==="string"){return String(value);}else{if(type==="number"){return Number(value);}else{if(type==="boolean"){return Boolean(value);}}}return value;},toUpperCaseFirstLetter:function(string){return string.charAt(0).toUpperCase()+string.slice(1);},clamp:function(value,min,max){var temp;if(min>max){temp=min;min=max;max=temp;}return Math.max(min,Math.min(value,max));},isOptionEnabled:function(option){return _.isObject(option)||option===true;},appendStyleElement:function(id,cssString){var style=document.createElement("style");style.type="text/css";style.id=id;if(style.styleSheet){style.styleSheet.cssText=cssString;}else{style.appendChild(document.createTextNode(cssString));}document.getElementsByTagName("head")[0].appendChild(style);},enableDeprecatedOptions:function(options){var toolbar=options.toolbar;var toolbarDefault={hasControlPanel:true,hasResizeHandler:true,hasPagination:true};options=$.extend(true,{},options);if(_.isObject(toolbar)){_.defaults(toolbar,toolbarDefault);}else{toolbar={};}if(!util.isOptionEnabled(options.pagination)&&toolbar.hasPagination){options.pagination=true;}if(!util.isOptionEnabled(options.resizeHandle)&&toolbar.hasResizeHandler){options.resizeHandle=true;}if(_.isObject(options.toolbar)&&!toolbar.hasControlPanel){options.toolbar=false;}else{if(util.isOptionEnabled(options.toolbar)){options.toolbar=true;}}return options;},warning:function(message){if(console&&console.warn){console.warn(message);}}};module.exports=util;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var keyCode={TAB:9,ENTER:13,CTRL:17,ESC:27,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,CHAR_A:65,CHAR_C:67,CHAR_F:70,CHAR_R:82,CHAR_V:86,LEFT_WINDOW_KEY:91,F5:116,BACKSPACE:8,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,DEL:46,UNDEFINED:229};module.exports={keyCode:keyCode,keyName:_.invert(keyCode),renderState:{LOADING:"LOADING",DONE:"DONE",EMPTY:"EMPTY"},dimension:{CELL_BORDER_WIDTH:1,TABLE_BORDER_WIDTH:1,RESIZE_HANDLE_WIDTH:7},frame:{L:"L",R:"R"},attrName:{ROW_KEY:"data-row-key",COLUMN_NAME:"data-column-name",COLUMN_INDEX:"data-column-index",EDIT_TYPE:"data-edit-type",GRID_ID:"data-grid-id"},themeName:{DEFAULT:"default",STRIPED:"striped",CLEAN:"clean"},selectionType:{CELL:"CELL",ROW:"ROW",COLUMN:"COLUMN"},summaryType:{SUM:"sum",AVG:"avg",CNT:"cnt",MAX:"max",MIN:"min"}};},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Collection=__webpack_require__(11);var Row=__webpack_require__(12);var RowList=Collection.extend({initialize:function(models,options){Collection.prototype.initialize.apply(this,arguments);this.setOwnProperties({columnModel:options.columnModel,domState:options.domState,gridId:options.gridId,lastRowKey:-1,originalRowList:[],originalRowMap:{},startIndex:options.startIndex||1,sortOptions:{columnName:"rowKey",isAscending:true,useClient:(_.isBoolean(options.useClientSort)?options.useClientSort:true)},isDisabled:false});if(!this.sortOptions.useClient){this.comparator=null;}},model:Row,parse:function(data){data=data&&data.contents||data;return this._formatData(data);},_formatData:function(data){var rowList=_.filter(data,_.isObject);_.each(rowList,function(row,i){rowList[i]=this._baseFormat(rowList[i]);if(this.isRowSpanEnable()){this._setExtraRowSpanData(rowList,i);}},this);return rowList;},_baseFormat:function(row){var defaultExtraData={rowSpan:null,rowSpanData:null,rowState:null},keyColumnName=this.columnModel.get("keyColumnName"),rowKey=(keyColumnName===null)?this._createRowKey():row[keyColumnName];row._extraData=$.extend(defaultExtraData,row._extraData);row._button=row._extraData.rowState==="CHECKED";row.rowKey=rowKey;return row;},_createRowKey:function(){this.lastRowKey+=1;return this.lastRowKey;},_setExtraRowSpanData:function(rowList,index){var row=rowList[index],rowSpan=row&&row._extraData&&row._extraData.rowSpan,rowKey=row&&row.rowKey,subCount,childRow,i;function hasRowSpanData(row,columnName){var extraData=row._extraData;return !!(extraData.rowSpanData&&extraData.rowSpanData[columnName]);}function setRowSpanData(row,columnName,rowSpanData){var extraData=row._extraData;extraData.rowSpanData=extraData&&extraData.rowSpanData||{};extraData.rowSpanData[columnName]=rowSpanData;return extraData;}if(rowSpan){_.each(rowSpan,function(count,columnName){if(!hasRowSpanData(row,columnName)){setRowSpanData(row,columnName,{count:count,isMainRow:true,mainRowKey:rowKey});subCount=-1;for(i=index+1;i<index+count;i+=1){childRow=rowList[i];childRow[columnName]=row[columnName];childRow._extraData=childRow._extraData||{};setRowSpanData(childRow,columnName,{count:subCount,isMainRow:false,mainRowKey:rowKey});subCount-=1;}}});}return rowList;},setOriginalRowList:function(rowList){this.originalRowList=rowList?this._formatData(rowList):this.toJSON();this.originalRowMap=_.indexBy(this.originalRowList,"rowKey");return this.originalRowList;},getOriginalRowList:function(isClone){isClone=_.isUndefined(isClone)?true:isClone;return isClone?_.clone(this.originalRowList):this.originalRowList;},getOriginalRow:function(rowKey){return _.clone(this.originalRowMap[rowKey]);},getOriginal:function(rowKey,columnName){return _.clone(this.originalRowMap[rowKey][columnName]);},getMainRowKey:function(rowKey,columnName){var row=this.get(rowKey),rowSpanData;if(this.isRowSpanEnable()){rowSpanData=row&&row.getRowSpanData(columnName);rowKey=rowSpanData?rowSpanData.mainRowKey:rowKey;}return rowKey;},indexOfRowKey:function(rowKey){return this.indexOf(this.get(rowKey));},isRowSpanEnable:function(){return !this.isSortedByField();},isSortedByField:function(){return this.sortOptions.columnName!=="rowKey";},setSortOptionValues:function(columnName,isAscending,isRequireFetch){var options=this.sortOptions,isChanged=false;if(_.isUndefined(columnName)){columnName="rowKey";}if(_.isUndefined(isAscending)){isAscending=true;}if(options.columnName!==columnName||options.isAscending!==isAscending){isChanged=true;}options.columnName=columnName;options.isAscending=isAscending;if(isChanged){this.trigger("sortChanged",{columnName:columnName,isAscending:isAscending,isRequireFetch:isRequireFetch});}},sortByField:function(columnName,isAscending){var options=this.sortOptions;if(_.isUndefined(isAscending)){isAscending=(options.columnName===columnName)?!options.isAscending:true;}this.setSortOptionValues(columnName,isAscending,!options.useClient);if(options.useClient){this.sort();}},getRowList:function(isOnlyChecked,isRaw){var rowList,checkedRowList;if(isOnlyChecked){checkedRowList=this.where({_button:true});rowList=[];_.each(checkedRowList,function(checkedRow){rowList.push(checkedRow.attributes);},this);}else{rowList=this.toJSON();}return isRaw?rowList:this._removePrivateProp(rowList);},syncRowSpannedData:function(row,columnName,value){var index,rowSpanData,i;if(this.isRowSpanEnable()){rowSpanData=row.getRowSpanData(columnName);if(!rowSpanData.isMainRow){this.get(rowSpanData.mainRowKey).set(columnName,value);}else{index=this.indexOfRowKey(row.get("rowKey"));for(i=0;i<rowSpanData.count-1;i+=1){this.at(i+1+index).set(columnName,value);}}}},comparator:function(a,b){var columnName=this.sortOptions.columnName;var isAscending=this.sortOptions.isAscending;var valueA=a.get(columnName);var valueB=b.get(columnName);var isEmptyA=_.isNull(valueA)||_.isUndefined(valueA)||valueA==="";var isEmptyB=_.isNull(valueB)||_.isUndefined(valueB)||valueB==="";var result=0;if(isEmptyA&&!isEmptyB){result=-1;}else{if(!isEmptyA&&isEmptyB){result=1;}else{if(valueA<valueB){result=-1;}else{if(valueA>valueB){result=1;}}}}if(!isAscending){result=-result;}return result;},_removePrivateProp:function(rowList){return _.map(rowList,function(row){return _.omit(row,Row.privateProperties);});},removeRow:function(rowKey,options){var row=this.get(rowKey),rowSpanData,nextRow,removedData;if(!row){return;}if(options&&options.keepRowSpanData){removedData=_.clone(row.attributes);}rowSpanData=_.clone(row.getRowSpanData());nextRow=this.at(this.indexOf(row)+1);this.remove(row,{silent:true});this._syncRowSpanDataForRemove(rowSpanData,nextRow,removedData);if(options&&options.removeOriginalData){this.setOriginalRowList();}this.trigger("remove");},_syncRowSpanDataForRemove:function(rowSpanData,nextRow,removedData){if(!rowSpanData){return;}_.each(rowSpanData,function(data,columnName){var mainRowSpanData={},mainRow,startOffset,spanCount;if(data.isMainRow){if(data.count===1){return;}mainRow=nextRow;spanCount=data.count-1;startOffset=1;if(spanCount>1){mainRowSpanData.mainRowKey=mainRow.get("rowKey");mainRowSpanData.isMainRow=true;}mainRow.set(columnName,(removedData?removedData[columnName]:""),{silent:true});}else{mainRow=this.get(data.mainRowKey);spanCount=mainRow.getRowSpanData(columnName).count-1;startOffset=-data.count;}if(spanCount>1){mainRowSpanData.count=spanCount;mainRow.setRowSpanData(columnName,mainRowSpanData);this._updateSubRowSpanData(mainRow,columnName,startOffset,spanCount);}else{mainRow.setRowSpanData(columnName,null);}},this);},_createDummyRow:function(){var columnModelList=this.columnModel.get("dataColumnModelList"),data={};_.each(columnModelList,function(columnModel){data[columnModel.columnName]="";},this);return data;},append:function(rowData,options){var modelList=this._createModelList(rowData),addOptions;options=_.extend({at:this.length},options);addOptions={at:options.at,add:true,silent:true};this.add(modelList,addOptions);this._syncRowSpanDataForAppend(options.at,modelList.length,options.extendPrevRowSpan);this.trigger("add",modelList,options);return modelList;},prepend:function(rowData,options){options=options||{};options.at=0;return this.append(rowData,options);},getRowData:function(rowKey,isJsonString){var row=this.get(rowKey),rowData=row?row.toJSON():null;return isJsonString?JSON.stringify(rowData):rowData;},getRowDataAt:function(index,isJsonString){var row=this.at(index),rowData=row?row.toJSON():null;return isJsonString?JSON.stringify(row):rowData;},getValue:function(rowKey,columnName,isOriginal){var value,row;if(isOriginal){value=this.getOriginal(rowKey,columnName);}else{row=this.get(rowKey);value=row&&row.get(columnName);}return value;},setValue:function(rowKey,columnName,value,silent){var row=this.get(rowKey);if(row){row.set(columnName,value,{silent:silent});return true;}return false;},getColumnValues:function(columnName,isJsonString){var valueList=this.pluck(columnName);return isJsonString?JSON.stringify(valueList):valueList;},setColumnValues:function(columnName,columnValue,isCheckCellState,silent){var obj={},cellState={isDisabled:false,isEditable:true};obj[columnName]=columnValue;isCheckCellState=_.isUndefined(isCheckCellState)?true:isCheckCellState;this.forEach(function(row){if(isCheckCellState){cellState=row.getCellState(columnName);}if(!cellState.isDisabled&&cellState.isEditable){row.set(obj,{silent:silent});}},this);},getRowSpanData:function(rowKey,columnName){var row=this.get(rowKey);return row?row.getRowSpanData(columnName):null;},isChanged:function(){var modifiedRowsArr=_.values(this.getModifiedRowList());return _.some(modifiedRowsArr,function(modifiedRows){return modifiedRows.length>0;});},setDisabled:function(isDisabled){if(this.isDisabled!==isDisabled){this.isDisabled=isDisabled;this.trigger("disabledChanged");}},enableRow:function(rowKey){this.get(rowKey).setRowState("");},disableRow:function(rowKey){this.get(rowKey).setRowState("DISABLED");},enableCheck:function(rowKey){this.get(rowKey).setRowState("");},disableCheck:function(rowKey){this.get(rowKey).setRowState("DISABLED_CHECK");},check:function(rowKey,silent){var isDisabledCheck=this.get(rowKey).getRowState().isDisabledCheck;var selectType=this.columnModel.get("selectType");if(!isDisabledCheck&&selectType){if(selectType==="radio"){this.uncheckAll();}this.setValue(rowKey,"_button",true,silent);}},uncheck:function(rowKey,silent){this.setValue(rowKey,"_button",false,silent);},checkAll:function(){this.setColumnValues("_button",true);},uncheckAll:function(){this.setColumnValues("_button",false);},_createModelList:function(rowData){var modelList=[],rowList;rowData=rowData||this._createDummyRow();if(!_.isArray(rowData)){rowData=[rowData];}rowList=this._formatData(rowData);_.each(rowList,function(row){var model=new Row(row,{collection:this,parse:true});modelList.push(model);},this);return modelList;},_syncRowSpanDataForAppend:function(index,length,extendPrevRowSpan){var prevRow=this.at(index-1);if(!prevRow){return;}_.each(prevRow.getRowSpanData(),function(data,columnName){var mainRow,mainRowData,startOffset,spanCount;if(data.count===0){return;}if(data.isMainRow){mainRow=prevRow;mainRowData=data;startOffset=1;}else{mainRow=this.get(data.mainRowKey);mainRowData=mainRow.getRowSpanData()[columnName];startOffset=-data.count+1;}if(mainRowData.count>startOffset||extendPrevRowSpan){mainRowData.count+=length;spanCount=mainRowData.count;this._updateSubRowSpanData(mainRow,columnName,startOffset,spanCount);}},this);},_updateSubRowSpanData:function(mainRow,columnName,startOffset,spanCount){var mainRowIdx=this.indexOf(mainRow),mainRowKey=mainRow.get("rowKey"),row,offset;for(offset=startOffset;offset<spanCount;offset+=1){row=this.at(mainRowIdx+offset);row.set(columnName,mainRow.get(columnName),{silent:true});row.setRowSpanData(columnName,{count:-offset,mainRowKey:mainRowKey,isMainRow:false});}},_isModifiedRow:function(row,originalRow,filteringColumnList){var filtered=_.omit(row,filteringColumnList);var result=_.some(filtered,function(value,columnName){if(typeof value==="object"){return(JSON.stringify(value)!==JSON.stringify(originalRow[columnName]));}return value!==originalRow[columnName];},this);return result;},getModifiedRowList:function(options){var isRaw=options&&options.isRaw,isOnlyChecked=options&&options.isOnlyChecked,isOnlyRowKeyList=options&&options.isOnlyRowKeyList,original=isRaw?this.originalRowList:this._removePrivateProp(this.originalRowList),current=isRaw?this.toJSON():this._removePrivateProp(this.toJSON()),filteringColumnList=options&&options.filteringColumnList,result={createList:[],updateList:[],deleteList:[]};original=_.indexBy(original,"rowKey");current=_.indexBy(current,"rowKey");filteringColumnList=_.union(filteringColumnList,this.columnModel.getIgnoredColumnNameList());_.each(current,function(row,rowKey){var originalRow=original[rowKey],item=isOnlyRowKeyList?row.rowKey:_.omit(row,filteringColumnList);if(!isOnlyChecked||(isOnlyChecked&&this.get(rowKey).get("_button"))){if(!originalRow){result.createList.push(item);}else{if(this._isModifiedRow(row,originalRow,filteringColumnList)){result.updateList.push(item);}}}},this);_.each(original,function(obj,rowKey){var item=isOnlyRowKeyList?obj.rowKey:_.omit(obj,filteringColumnList);if(!current[rowKey]){result.deleteList.push(item);}},this);return result;},replaceRowList:function(rowList,isParse,callback){if(!rowList){rowList=[];}if(_.isUndefined(isParse)){isParse=true;}this.trigger("beforeReset",rowList.length);this.lastRowKey=-1;this.reset(rowList,{parse:isParse});if(_.isFunction(callback)){callback();}},setRowList:function(rowList,isParse,callback){var wrappedCallback=_.bind(function(){this.setOriginalRowList();if(_.isFunction(callback)){callback();}},this);this.replaceRowList(rowList,isParse,wrappedCallback);},restore:function(){var originalRowList=this.getOriginalRowList();this.replaceRowList(originalRowList,true);},del:function(rowKey,columnName,silent){var mainRowKey=this.getMainRowKey(rowKey,columnName),cellState=this.get(mainRowKey).getCellState(columnName),editType=this.columnModel.getEditType(columnName),isDeletableType=_.contains(["text","password"],editType);if(isDeletableType&&cellState.isEditable&&!cellState.isDisabled){this.setValue(mainRowKey,columnName,"",silent);}},delRange:function(range){var columnModels=this.columnModel.getVisibleColumnModelList();var rowIdxes=_.range(range.row[0],range.row[1]+1);var columnIdxes=_.range(range.column[0],range.column[1]+1);var rowKeys,columnNames;rowKeys=_.map(rowIdxes,function(idx){return this.at(idx).get("rowKey");},this);columnNames=_.map(columnIdxes,function(idx){return columnModels[idx].columnName;});_.each(rowKeys,function(rowKey){_.each(columnNames,function(columnName){this.del(rowKey,columnName,true);this.get(rowKey).validateCell(columnName,true);},this);},this);this.trigger("delRange",rowKeys,columnNames);},paste:function(data,startIdx){var endIdx=this._getEndIndexToPaste(data,startIdx);_.each(data,function(row,index){this._setValueForPaste(row,startIdx.row+index,startIdx.column,endIdx.column);},this);this.trigger("paste",{startIdx:startIdx,endIdx:endIdx});},validate:function(){var errorRows=[],requiredColumnNames=_.chain(this.columnModel.getVisibleColumnModelList()).filter(function(columnModel){return columnModel.isRequired===true;}).pluck("columnName").value();this.each(function(row){var errorCells=[];_.each(requiredColumnNames,function(columnName){var errorCode=row.validateCell(columnName);if(errorCode){errorCells.push({columnName:columnName,errorCode:errorCode});}});if(errorCells.length){errorRows.push({rowKey:row.get("rowKey"),errors:errorCells});}});return errorRows;},_getEndIndexToPaste:function(data,startIdx){var columnModelList=this.columnModel.getVisibleColumnModelList(),rowIdx=data.length+startIdx.row-1,columnIdx=Math.min(data[0].length+startIdx.column,columnModelList.length)-1;return{row:rowIdx,column:columnIdx};},_setValueForPaste:function(rowData,rowIdx,columnStartIdx,columnEndIdx){var row=this.at(rowIdx),columnModel=this.columnModel,attributes={},columnIdx,columnName,cellState,rowSpanData;if(!row){row=this.append({})[0];}for(columnIdx=columnStartIdx;columnIdx<=columnEndIdx;columnIdx+=1){columnName=columnModel.at(columnIdx,true).columnName;cellState=row.getCellState(columnName);rowSpanData=row.getRowSpanData(columnName);if(cellState.isEditable&&!cellState.isDisabled&&(!rowSpanData||rowSpanData.count>=0)){attributes[columnName]=rowData[columnIdx-columnStartIdx];}}row.set(attributes);},getElement:function(rowKey,columnName){var mainRowKey=this.getMainRowKey(rowKey,columnName);return this.domState.getElement(mainRowKey,columnName);},getCheckedState:function(){var available=0;var checked=0;this.forEach(function(row){var buttonState=row.getCellState("_button");if(!buttonState.isDisabled&&buttonState.isEditable){available+=1;if(row.get("_button")){checked+=1;}}});return{available:available,checked:checked};}});module.exports=RowList;},function(module,exports,__webpack_require__){var Backbone=__webpack_require__(3);var _=__webpack_require__(1);var common=__webpack_require__(4);var Collection=Backbone.Collection.extend({clear:function(){this.each(function(model){model.stopListening();model=null;});this.reset([],{silent:true});return this;}});_.assign(Collection.prototype,common);module.exports=Collection;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Model=__webpack_require__(7);var ExtraDataManager=__webpack_require__(13);var util=__webpack_require__(8);var classNameConst=__webpack_require__(14);var PRIVATE_PROPERTIES=["_button","_number","_extraData"];var VALID_ERR_REQUIRED="REQUIRED";var VALID_ERR_TYPE_NUMBER="TYPE_NUMBER";var Row=Model.extend({initialize:function(){Model.prototype.initialize.apply(this,arguments);this.extraDataManager=new ExtraDataManager(this.get("_extraData"));this.columnModel=this.collection.columnModel;this.validateMap={};this.on("change",this._onChange,this);},idAttribute:"rowKey",parse:function(data){if(!data._extraData){data._extraData={};}return data;},_triggerExtraDataChangeEvent:function(){this.trigger("extraDataChanged",this.get("_extraData"));},_onChange:function(){var publicChanged=_.omit(this.changed,PRIVATE_PROPERTIES);if(this.isDuplicatedPublicChanged(publicChanged)){return;}_.each(publicChanged,function(value,columnName){var columnModel=this.columnModel.getColumnModel(columnName);if(!columnModel){return;}if(!this._executeChangeBeforeCallback(columnName)){return;}this.collection.syncRowSpannedData(this,columnName,value);this._executeChangeAfterCallback(columnName);this.validateCell(columnName,true);},this);},_validateCellData:function(columnName){var columnModel=this.columnModel.getColumnModel(columnName);var value=this.get(columnName);var errorCode="";if(columnModel.isRequired&&util.isBlank(value)){errorCode=VALID_ERR_REQUIRED;}else{if(columnModel.dataType==="number"&&!_.isNumber(value)){errorCode=VALID_ERR_TYPE_NUMBER;}}return errorCode;},validateCell:function(columnName,isDataChanged){var errorCode;if(!isDataChanged&&(columnName in this.validateMap)){return this.validateMap[columnName];}errorCode=this._validateCellData(columnName);if(errorCode){this.addCellClassName(columnName,classNameConst.CELL_INVALID);}else{this.removeCellClassName(columnName,classNameConst.CELL_INVALID);}this.validateMap[columnName]=errorCode;return errorCode;},_createChangeCallbackEvent:function(columnName){return{rowKey:this.get("rowKey"),columnName:columnName,value:this.get(columnName),instance:tui.Grid.getInstanceById(this.collection.gridId)};},_executeChangeBeforeCallback:function(columnName){var columnModel=this.columnModel.getColumnModel(columnName),changeEvent,obj;if(columnModel.editOption&&columnModel.editOption.changeBeforeCallback){changeEvent=this._createChangeCallbackEvent(columnName);if(columnModel.editOption.changeBeforeCallback(changeEvent)===false){obj={};obj[columnName]=this.previous(columnName);this.set(obj);this.trigger("restore",columnName);return false;}}return true;},_executeChangeAfterCallback:function(columnName){var columnModel=this.columnModel.getColumnModel(columnName),changeEvent;if(columnModel.editOption&&columnModel.editOption.changeAfterCallback){changeEvent=this._createChangeCallbackEvent(columnName);return !!(columnModel.editOption.changeAfterCallback(changeEvent));}return true;},getPrivateProperties:function(){return PRIVATE_PROPERTIES;},getRowState:function(){return this.extraDataManager.getRowState();},getClassNameList:function(columnName){var columnModel=this.columnModel.getColumnModel(columnName),isMetaColumn=util.isMetaColumn(columnName),classNameList=this.extraDataManager.getClassNameList(columnName),cellState=this.getCellState(columnName);if(columnModel.className){classNameList.push(columnModel.className);}if(columnModel.isEllipsis){classNameList.push(classNameConst.CELL_ELLIPSIS);}if(columnModel.isRequired){classNameList.push(classNameConst.CELL_REQUIRED);}if(isMetaColumn){classNameList.push(classNameConst.CELL_HEAD);}else{if(cellState.isEditable){classNameList.push(classNameConst.CELL_EDITABLE);}}if(cellState.isDisabled){classNameList.push(classNameConst.CELL_DISABLED);}return this._makeUniqueStringArray(classNameList);},_makeUniqueStringArray:function(targetArray){var singleStringArray=_.uniq(targetArray.join(" ").split(" "));return _.without(singleStringArray,"");},getCellState:function(columnName){var notEditableTypeList=["_number","normal"],columnModel=this.columnModel,isDisabled=this.collection.isDisabled,isEditable=true,editType=columnModel.getEditType(columnName),rowState,relationResult;relationResult=this.executeRelationCallbacksAll(["isDisabled","isEditable"])[columnName];rowState=this.getRowState();if(!isDisabled){if(columnName==="_button"){isDisabled=rowState.isDisabledCheck;}else{isDisabled=rowState.isDisabled;}isDisabled=isDisabled||!!(relationResult&&relationResult.isDisabled);}if(_.contains(notEditableTypeList,editType)){isEditable=false;}else{isEditable=!(relationResult&&relationResult.isEditable===false);}return{isEditable:isEditable,isDisabled:isDisabled};},isEditable:function(columnName){var cellState=this.getCellState(columnName);return !cellState.isDisabled&&cellState.isEditable;},isDisabled:function(columnName){var cellState=this.getCellState(columnName);return cellState.isDisabled;},getRowSpanData:function(columnName){var isRowSpanEnable=this.collection.isRowSpanEnable(),rowKey=this.get("rowKey");return this.extraDataManager.getRowSpanData(columnName,rowKey,isRowSpanEnable);},getHeight:function(){return this.extraDataManager.getHeight();},setHeight:function(height){this.extraDataManager.setHeight(height);this._triggerExtraDataChangeEvent();},setRowSpanData:function(columnName,data){this.extraDataManager.setRowSpanData(columnName,data);this._triggerExtraDataChangeEvent();},setRowState:function(rowState,silent){this.extraDataManager.setRowState(rowState);if(!silent){this._triggerExtraDataChangeEvent();}},addCellClassName:function(columnName,className){this.extraDataManager.addCellClassName(columnName,className);this._triggerExtraDataChangeEvent();},addClassName:function(className){this.extraDataManager.addClassName(className);this._triggerExtraDataChangeEvent();},removeCellClassName:function(columnName,className){this.extraDataManager.removeCellClassName(columnName,className);this._triggerExtraDataChangeEvent();},removeClassName:function(className){this.extraDataManager.removeClassName(className);this._triggerExtraDataChangeEvent();},_getListTypeVisibleText:function(columnName){var value=this.get(columnName);var columnModel=this.columnModel.getColumnModel(columnName);var resultOptionList,editOptionList,typeExpected,valueList;if(tui.util.isExisty(tui.util.pick(columnModel,"editOption","list"))){resultOptionList=this.executeRelationCallbacksAll(["optionListChange"])[columnName];editOptionList=resultOptionList&&resultOptionList.optionList?resultOptionList.optionList:columnModel.editOption.list;typeExpected=typeof editOptionList[0].value;valueList=util.toString(value).split(",");if(typeExpected!==typeof valueList[0]){valueList=_.map(valueList,function(val){return util.convertValueType(val,typeExpected);});}_.each(valueList,function(val,index){var item=_.findWhere(editOptionList,{value:val});valueList[index]=item&&item.value||"";},this);return valueList.join(",");}return"";},_isListType:function(editType){return _.contains(["select","radio","checkbox"],editType);},isDuplicatedPublicChanged:function(publicChanged){if(this._timeoutIdForChanged&&_.isEqual(this._lastPublicChanged,publicChanged)){return true;}clearTimeout(this._timeoutIdForChanged);this._timeoutIdForChanged=setTimeout(_.bind(function(){this._timeoutIdForChanged=null;},this),10);this._lastPublicChanged=publicChanged;return false;},getValueString:function(columnName){var editType=this.columnModel.getEditType(columnName);var column=this.columnModel.getColumnModel(columnName);var value=this.get(columnName);if(this._isListType(editType)){if(tui.util.isExisty(tui.util.pick(column,"editOption","list",0,"value"))){value=this._getListTypeVisibleText(columnName);}else{throw this.error('Check "'+columnName+"\"'s editOption.list property out in your ColumnModel.");}}else{if(editType==="password"){value="";}}return util.toString(value);},executeRelationCallbacksAll:function(callbackNameList){var rowData=this.attributes,relationListMap=this.columnModel.get("relationListMap"),result={};if(_.isEmpty(callbackNameList)){callbackNameList=["optionListChange","isDisabled","isEditable"];}_.each(relationListMap,function(relationList,columnName){var value=rowData[columnName];_.each(relationList,function(relation){this._executeRelationCallback(relation,callbackNameList,value,rowData,result);},this);},this);return result;},_getRelationResultAttrName:function(callbackName){switch(callbackName){case"optionListChange":return"optionList";case"isDisabled":return"isDisabled";case"isEditable":return"isEditable";default:return"";}},_executeRelationCallback:function(relation,callbackNameList,value,rowData,result){var rowState=this.getRowState(),targetColumnNames=relation.columnList;_.each(callbackNameList,function(callbackName){var attrName,callback;if(!rowState.isDisabled||callbackName!=="isDisabled"){callback=relation[callbackName];if(typeof callback==="function"){attrName=this._getRelationResultAttrName(callbackName);if(attrName){_.each(targetColumnNames,function(targetColumnName){result[targetColumnName]=result[targetColumnName]||{};result[targetColumnName][attrName]=callback(value,rowData);},this);}}}},this);}},{privateProperties:PRIVATE_PROPERTIES});module.exports=Row;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var ExtraDataManager=tui.util.defineClass({init:function(data){this.data=data||{};},getRowSpanData:function(columnName,rowKey,isRowSpanEnable){var rowSpanData=null;if(isRowSpanEnable){rowSpanData=this.data.rowSpanData;if(columnName&&rowSpanData){rowSpanData=rowSpanData[columnName];}}if(!rowSpanData&&columnName){rowSpanData={count:0,isMainRow:true,mainRowKey:rowKey};}return rowSpanData;},getRowState:function(){var result={isDisabledCheck:false,isDisabled:false,isChecked:false};switch(this.data.rowState){case"DISABLED":result.isDisabled=true;case"DISABLED_CHECK":result.isDisabledCheck=true;break;case"CHECKED":result.isChecked=true;default:}return result;},setRowState:function(rowState){this.data.rowState=rowState;},setRowSpanData:function(columnName,data){var rowSpanData=_.assign({},this.data.rowSpanData);if(!columnName){return;}if(!data){if(rowSpanData[columnName]){delete rowSpanData[columnName];}}else{rowSpanData[columnName]=data;}this.data.rowSpanData=rowSpanData;},addCellClassName:function(columnName,className){var classNameData,classNameList;classNameData=this.data.className||{};classNameData.column=classNameData.column||{};classNameList=classNameData.column[columnName]||[];if(!_.contains(classNameList,className)){classNameList.push(className);classNameData.column[columnName]=classNameList;this.data.className=classNameData;}},addClassName:function(className){var classNameData,classNameList;classNameData=this.data.className||{};classNameList=classNameData.row||[];if(tui.util.inArray(className,classNameList)===-1){classNameList.push(className);classNameData.row=classNameList;this.data.className=classNameData;}},getClassNameList:function(columnName){var classNameData=this.data.className,arrayPush=Array.prototype.push,classNameList=[];if(classNameData){if(classNameData.row){arrayPush.apply(classNameList,classNameData.row);}if(columnName&&classNameData.column&&classNameData.column[columnName]){arrayPush.apply(classNameList,classNameData.column[columnName]);}}return classNameList;},_removeClassNameFromArray:function(classNameList,className){var singleNameList=classNameList.join(" ").split(" ");return _.without(singleNameList,className);},removeCellClassName:function(columnName,className){var classNameData=this.data.className;if(tui.util.pick(classNameData,"column",columnName)){classNameData.column[columnName]=this._removeClassNameFromArray(classNameData.column[columnName],className);this.data.className=classNameData;}},removeClassName:function(className){var classNameData=this.data.className;if(classNameData&&classNameData.row){classNameData.row=this._removeClassNameFromArray(classNameData.row,className);this.className=classNameData;}},setHeight:function(value){this.data.height=value;},getHeight:function(){return this.data.height;}});module.exports=ExtraDataManager;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var PREFIX="tui-grid-";var classNames={CONTAINER:"container",CLIPBOARD:"clipboard",NO_SCROLL_X:"no-scroll-x",NO_SCROLL_Y:"no-scroll-y",ICO_ARROW:"icon-arrow",ICO_ARROW_LEFT:"icon-arrow-left",ICO_ARROW_RIGHT:"icon-arrow-right",LAYER_STATE:"layer-state",LAYER_STATE_CONTENT:"layer-state-content",LAYER_STATE_LOADING:"layer-state-loading",LAYER_EDITING:"layer-editing",LAYER_FOCUS:"layer-focus",LAYER_FOCUS_BORDER:"layer-focus-border",LAYER_SELECTION:"layer-selection",LAYER_DATE_PICKER:"layer-datepicker",BORDER_LINE:"border-line",BORDER_TOP:"border-line-top",BORDER_LEFT:"border-line-left",BORDER_RIGHT:"border-line-right",BORDER_BOTTOM:"border-line-bottom",CONTENT_AREA:"content-area",LSIDE_AREA:"lside-area",RSIDE_AREA:"rside-area",HEAD_AREA:"head-area",BODY_AREA:"body-area",FOOT_AREA:"foot-area",FOOT_AREA_RIGHT:"foot-area-right",COLUMN_RESIZE_CONTAINER:"column-resize-container",COLUMN_RESIZE_HANDLE:"column-resize-handle",COLUMN_RESIZE_HANDLE_LAST:"column-resize-handle-last",BODY_CONTAINER:"body-container",BODY_TABLE_CONTAINER:"table-container",SCROLLBAR_HEAD:"scrollbar-head",SCROLLBAR_BORDER:"scrollbar-border",SCROLLBAR_RIGHT_BOTTOM:"scrollbar-right-bottom",SCROLLBAR_LEFT_BOTTOM:"scrollbar-left-bottom",PAGINATION:"pagination",PAGINATION_PRE:"pre",PAGINATION_PRE_OFF:"pre-off",PAGINATION_PRE_END:"pre-end",PAGINATION_PRE_END_OFF:"pre-end-off",PAGINATION_NEXT:"next",PAGINATION_NEXT_OFF:"next-off",PAGINATION_NEXT_END:"next-end",PAGINATION_NEXT_END_OFF:"next-end-off",TABLE:"table",CELL:"cell",CELL_HEAD:"cell-head",CELL_ROW_ODD:"cell-row-odd",CELL_ROW_EVEN:"cell-row-even",CELL_EDITABLE:"cell-editable",CELL_DUMMY:"cell-dummy",CELL_REQUIRED:"cell-required",CELL_DISABLED:"cell-disabled",CELL_SELECTED:"cell-selected",CELL_INVALID:"cell-invalid",CELL_ELLIPSIS:"cell-ellipsis",CELL_CURRENT_ROW:"cell-current-row",CELL_MAIN_BUTTON:"cell-main-button",CELL_CONTENT:"cell-content",CELL_CONTENT_BEFORE:"content-before",CELL_CONTENT_AFTER:"content-after",CELL_CONTENT_INPUT:"content-input",CELL_CONTENT_TEXT:"content-text",BTN_TEXT:"btn-text",BTN_SORT:"btn-sorting",BTN_SORT_UP:"btn-sorting-up",BTN_SORT_DOWN:"btn-sorting-down",BTN_EXCEL:"btn-excel-download",BTN_EXCEL_ICON:"btn-excel-icon",BTN_EXCEL_PAGE:"btn-excel-page",BTN_EXCEL_ALL:"btn-excel-all",TOOLBAR:"toolbar",TOOLBAR_BTN_HOLDER:"toolbar-btn-holder",HEIGHT_RESIZE_BAR:"height-resize-bar",HEIGHT_RESIZE_HANDLE:"height-resize-handle",CALENDAR:"calendar",CALENDAR_BTN_PREV_YEAR:"calendar-btn-prev-year",CALENDAR_BTN_NEXT_YEAR:"calendar-btn-next-year",CALENDAR_BTN_PREV_MONTH:"calendar-btn-prev-month",CALENDAR_BTN_NEXT_MONTH:"calendar-btn-next-month",CALENDAR_SELECTABLE:"calendar-selectable",CALENDAR_SELECTED:"calendar-selected"};var exports=_.mapObject(classNames,function(className){return PREFIX+className;});exports.PREFIX=PREFIX;module.exports=exports;},function(module,exports,__webpack_require__){var Model=__webpack_require__(7);var isOptionEnabled=__webpack_require__(8).isOptionEnabled;var Toolbar=Model.extend({initialize:function(options){this.options=options;},defaults:{hasControlPanel:false,hasPagination:false,hasResizeHandler:false,isExcelButtonVisible:false,isExcelAllButtonVisible:false},isEnabled:function(){return isOptionEnabled(this.options);}});module.exports=Toolbar;},function(module,exports,__webpack_require__){var Model=__webpack_require__(7);var dimensionConstMap=__webpack_require__(9).dimension;var TABLE_BORDER_WIDTH=dimensionConstMap.TABLE_BORDER_WIDTH;var CELL_BORDER_WIDTH=dimensionConstMap.CELL_BORDER_WIDTH;var Dimension=Model.extend({initialize:function(attrs,options){Model.prototype.initialize.apply(this,arguments);this.columnModel=options.columnModel;this.dataModel=options.dataModel;this.domState=options.domState;this.on("change:isFixedHeight",this._resetSyncHeightHandler);this._resetSyncHeightHandler();},defaults:{offsetLeft:0,offsetTop:0,width:0,headerHeight:0,bodyHeight:0,footerHeight:0,toolbarHeight:0,resizeHandleHeight:0,paginationHeight:0,rowHeight:0,totalRowHeight:0,isFixedRowHeight:true,rsideWidth:0,lsideWidth:0,minimumColumnWidth:0,scrollBarSize:17,scrollX:true,scrollY:true,fitToParentHeight:false,isFixedHeight:false},_resetSyncHeightHandler:function(){if(this.get("isFixedHeight")){this.off("change:totalRowHeight");}else{this.on("change:totalRowHeight",this._syncBodyHeightWithTotalRowHeight);}},_syncBodyHeightWithTotalRowHeight:function(){var currBodyHeight=this.get("bodyHeight");var realBodyHeight=this.get("totalRowHeight")+this.getScrollXHeight();this.set("bodyHeight",Math.max(currBodyHeight,realBodyHeight));},isDivisionBorderDoubled:function(){return this.columnModel.getVisibleColumnFixCount()>0;},getAvailableTotalWidth:function(columnLength){var totalWidth=this.get("width");var borderCount=columnLength+1+(this.isDivisionBorderDoubled()?1:0);var totalBorderWidth=borderCount*CELL_BORDER_WIDTH;var availableTotalWidth=totalWidth-this.getScrollYWidth()-totalBorderWidth;return availableTotalWidth;},getBodySize:function(){var lsideWidth=this.get("lsideWidth"),rsideWidth=this.get("rsideWidth")-this.getScrollYWidth(),height=this.get("bodyHeight")-this.getScrollXHeight();return{height:height,rsideWidth:rsideWidth,totalWidth:lsideWidth+rsideWidth};},getOverflowFromMousePosition:function(pageX,pageY){var containerPos=this.getPositionFromBodyArea(pageX,pageY);var bodySize=this.getBodySize();return this._judgeOverflow(containerPos,bodySize);},_judgeOverflow:function(containerPosition,bodySize){var containerX=containerPosition.x;var containerY=containerPosition.y;var overflowY=0;var overflowX=0;if(containerY<0){overflowY=-1;}else{if(containerY>bodySize.height){overflowY=1;}}if(containerX<0){overflowX=-1;}else{if(containerX>bodySize.totalWidth){overflowX=1;}}return{x:overflowX,y:overflowY};},getScrollXHeight:function(){return(this.get("scrollX")?this.get("scrollBarSize"):0);},getScrollYWidth:function(){return(this.get("scrollY")?this.get("scrollBarSize"):0);},_calcRealBodyHeight:function(height){var extraHeight=this.get("headerHeight")+this.get("footerHeight")+this.get("toolbarHeight")+TABLE_BORDER_WIDTH;return height-extraHeight;},_getMinBodyHeight:function(){return this.get("rowHeight")+(CELL_BORDER_WIDTH*2)+this.getScrollXHeight();},_setHeight:function(height){this.set("bodyHeight",Math.max(this._calcRealBodyHeight(height),this._getMinBodyHeight()));},_getMinLeftSideWidth:function(){var minimumColumnWidth=this.get("minimumColumnWidth");var columnFixCount=this.columnModel.getVisibleColumnFixCount(true);var minWidth=0;var borderWidth;if(columnFixCount){borderWidth=(columnFixCount+1)*CELL_BORDER_WIDTH;minWidth=borderWidth+(minimumColumnWidth*columnFixCount);}return minWidth;},getMaxLeftSideWidth:function(){var maxWidth=Math.ceil(this.get("width")*0.9);if(maxWidth){maxWidth=Math.max(maxWidth,this._getMinLeftSideWidth());}return maxWidth;},setSize:function(width,height){if(width>0){this.set("width",width);this.trigger("setWidth",width);}if(height>0){this._setHeight(height);}},getHeight:function(){return this.get("bodyHeight")+this.get("headerHeight")+this.get("toolbarHeight");},refreshLayout:function(){var domState=this.domState;var offset=domState.getOffset();this.set({offsetTop:offset.top,offsetLeft:offset.left,width:domState.getWidth()});if(this.get("fitToParentHeight")){this._setHeight(domState.getParentHeight());}},setBodyHeightWithRowCount:function(rowCount){var rowHeight=this.get("rowHeight");var scrollXHeight=this.getScrollXHeight();this.set({isFixedHeight:true,bodyHeight:(rowHeight+CELL_BORDER_WIDTH)*rowCount+scrollXHeight});},getBodyOffsetTop:function(){return this.get("offsetTop")+this.get("headerHeight")+this.get("toolbarHeight")+CELL_BORDER_WIDTH+TABLE_BORDER_WIDTH;},getPositionFromBodyArea:function(pageX,pageY){var bodyOffsetX=this.get("offsetLeft");var bodyOffsetY=this.getBodyOffsetTop();return{x:pageX-bodyOffsetX,y:pageY-bodyOffsetY};}});module.exports=Dimension;},function(module,exports,__webpack_require__){var Model=__webpack_require__(7);var CELL_BORDER_WIDTH=__webpack_require__(9).dimension.CELL_BORDER_WIDTH;var CoordRow=Model.extend({initialize:function(attrs,options){this.dataModel=options.dataModel;this.dimensionModel=options.dimensionModel;this.domState=options.domState;this.rowHeights=[];this.rowOffsets=[];if(this.dimensionModel.get("isFixedRowHeight")){this.listenTo(this.dataModel,"add remove reset sort",this.syncWithDataModel);}},syncWithDom:function(){var domRowHeights,dataRowHeights,rowHeights;var i,len;if(this.dimensionModel.get("isFixedRowHeight")){return;}domRowHeights=this.domState.getRowHeights();dataRowHeights=this._getHeightFromData();rowHeights=[];for(i=0,len=dataRowHeights.length;i<len;i+=1){rowHeights[i]=Math.max(domRowHeights[i],dataRowHeights[i]);}this._reset(rowHeights);},_getHeightFromData:function(){var defHeight=this.dimensionModel.get("rowHeight");var rowHeights=[];this.dataModel.each(function(row,index){rowHeights[index]=(row.getHeight()||defHeight);});return rowHeights;},syncWithDataModel:function(){this._reset(this._getHeightFromData());},_reset:function(rowHeights){var rowOffsets=[];var totalRowHeight=0;_.each(rowHeights,function(height,index){var prevOffset=index?(rowOffsets[index-1]+CELL_BORDER_WIDTH):0;var prevHeight=index?rowHeights[index-1]:0;rowOffsets[index]=prevOffset+prevHeight;});this.rowHeights=rowHeights;this.rowOffsets=rowOffsets;if(rowHeights.length){totalRowHeight=_.last(rowOffsets)+_.last(rowHeights)+CELL_BORDER_WIDTH;}this.dimensionModel.set("totalRowHeight",totalRowHeight);this.trigger("reset");},getHeightAt:function(index){return this.rowHeights[index];},getOffsetAt:function(index){return this.rowOffsets[index];},getHeight:function(rowKey){var index=this.dataModel.indexOfRowKey(rowKey);return this.getHeightAt(index);},getOffset:function(rowKey){var index=this.dataModel.indexOfRowKey(rowKey);return this.getOffsetAt(index);},indexOf:function(position){var rowOffsets=this.rowOffsets;var idx=0;position+=CELL_BORDER_WIDTH;while(rowOffsets[idx]<=position){idx+=1;}return idx-1;}});module.exports=CoordRow;},function(module,exports,__webpack_require__){var Model=__webpack_require__(7);var util=__webpack_require__(8);var constMap=__webpack_require__(9);var dimensionConst=constMap.dimension;var frameConst=constMap.frame;var CELL_BORDER_WIDTH=dimensionConst.CELL_BORDER_WIDTH;var CoordColumn=Model.extend({initialize:function(attrs,options){this.dimensionModel=options.dimensionModel;this.columnModel=options.columnModel;this._columnWidthFixedFlags=null;this._minColumnWidthList=null;this._isModified=false;this.listenTo(this.columnModel,"columnModelChange",this.resetColumnWidths);this.listenTo(this.dimensionModel,"change:width",this._onDimensionWidthChange);this.resetColumnWidths();},defaults:{columnWidthList:[]},resetColumnWidths:function(){var columnModelList=this.columnModel.getVisibleColumnModelList(null,true);var commonMinWidth=this.dimensionModel.get("minimumColumnWidth");var widthList=[];var fixedFlags=[];var minWidthList=[];_.each(columnModelList,function(columnModel){var width=columnModel.width>0?columnModel.width:0;var minWidth=Math.max(width,commonMinWidth);if(util.isMetaColumn(columnModel.columnName)){minWidth=width;}widthList.push(width?minWidth:0);minWidthList.push(minWidth);fixedFlags.push(!!columnModel.isFixedWidth);},this);this._columnWidthFixedFlags=fixedFlags;this._minColumnWidthList=minWidthList;this._setColumnWidthVariables(this._calculateColumnWidth(widthList),true);},_setColumnWidthVariables:function(columnWidthList,isSaveWidthList){var totalWidth=this.dimensionModel.get("width");var maxLeftSideWidth=this.dimensionModel.getMaxLeftSideWidth();var columnFixCount=this.columnModel.getVisibleColumnFixCount(true);var rsideWidth,lsideWidth,lsideWidthList,rsideWidthList;lsideWidthList=columnWidthList.slice(0,columnFixCount);rsideWidthList=columnWidthList.slice(columnFixCount);lsideWidth=this._getFrameWidth(lsideWidthList);if(maxLeftSideWidth&&maxLeftSideWidth<lsideWidth){lsideWidthList=this._adjustLeftSideWidthList(lsideWidthList,maxLeftSideWidth);lsideWidth=this._getFrameWidth(lsideWidthList);columnWidthList=lsideWidthList.concat(rsideWidthList);}rsideWidth=totalWidth-lsideWidth;this.set({columnWidthList:columnWidthList});this.dimensionModel.set({rsideWidth:rsideWidth,lsideWidth:lsideWidth});if(isSaveWidthList){this.set("originalWidthList",_.clone(columnWidthList));}this.trigger("columnWidthChanged");},_adjustLeftSideWidthList:function(lsideWidthList,totalWidth){var i=lsideWidthList.length-1;var minimumColumnWidth=this.dimensionModel.get("minimumColumnWidth");var currentWidth=this._getFrameWidth(lsideWidthList);var diff=currentWidth-totalWidth;var changedWidth;if(diff>0){while(i>=0&&diff>0){changedWidth=Math.max(minimumColumnWidth,lsideWidthList[i]-diff);diff-=lsideWidthList[i]-changedWidth;lsideWidthList[i]=changedWidth;i-=1;}}else{if(diff<0){lsideWidthList[i]+=Math.abs(diff);}}return lsideWidthList;},_calculateColumnWidth:function(widthList){widthList=this._fillEmptyColumnWidth(widthList);widthList=this._applyMinimumColumnWidth(widthList);widthList=this._adjustColumnWidthList(widthList);return widthList;},_fillEmptyColumnWidth:function(columnWidthList){var totalWidth=this.dimensionModel.getAvailableTotalWidth(columnWidthList.length);var remainTotalWidth=totalWidth-util.sum(columnWidthList);var emptyIndexes=[];_.each(columnWidthList,function(width,index){if(!width){emptyIndexes.push(index);}});return this._distributeExtraWidthEqually(columnWidthList,remainTotalWidth,emptyIndexes);},_getFrameWidth:function(widthList){var frameWidth=0;if(widthList.length){frameWidth=util.sum(widthList)+((widthList.length+1)*CELL_BORDER_WIDTH);}return frameWidth;},_addExtraColumnWidth:function(columnWidthList,totalExtraWidth){var fixedFlags=this._columnWidthFixedFlags;var columnIndexes=[];_.each(fixedFlags,function(flag,index){if(!flag){columnIndexes.push(index);}});return this._distributeExtraWidthEqually(columnWidthList,totalExtraWidth,columnIndexes);},_reduceExcessColumnWidth:function(columnWidthList,totalExcessWidth){var minWidthList=this._minColumnWidthList;var fixedFlags=this._columnWidthFixedFlags;var availableList=[];_.each(columnWidthList,function(width,index){if(!fixedFlags[index]){availableList.push({index:index,width:width-minWidthList[index]});}});return this._reduceExcessColumnWidthSub(_.clone(columnWidthList),totalExcessWidth,availableList);},_reduceExcessColumnWidthSub:function(columnWidthList,totalRemainWidth,availableList){var avgValue=Math.round(totalRemainWidth/availableList.length);var newAvailableList=[];var columnIndexes;_.each(availableList,function(available){if(available.width<Math.abs(avgValue)){totalRemainWidth+=available.width;columnWidthList[available.index]-=available.width;}else{newAvailableList.push(available);}});if(availableList.length>newAvailableList.length){return this._reduceExcessColumnWidthSub(columnWidthList,totalRemainWidth,newAvailableList);}columnIndexes=_.pluck(availableList,"index");return this._distributeExtraWidthEqually(columnWidthList,totalRemainWidth,columnIndexes);},_distributeExtraWidthEqually:function(columnWidthList,extraWidth,columnIndexes){var length=columnIndexes.length;var avgValue=Math.round(extraWidth/length);var errorValue=(avgValue*length)-extraWidth;var resultList=_.clone(columnWidthList);_.each(columnIndexes,function(columnIndex){resultList[columnIndex]+=avgValue;});if(columnIndexes.length){resultList[_.last(columnIndexes)]-=errorValue;}return resultList;},_applyMinimumColumnWidth:function(columnWidthList){var minWidthList=this._minColumnWidthList;var appliedList=_.clone(columnWidthList);_.each(appliedList,function(width,index){var minWidth=minWidthList[index];if(width<minWidth){appliedList[index]=minWidth;}});return appliedList;},_adjustColumnWidthList:function(columnWidthList,fitToReducedTotal){var columnLength=columnWidthList.length;var availableWidth=this.dimensionModel.getAvailableTotalWidth(columnLength);var totalExtraWidth=availableWidth-util.sum(columnWidthList);var fixedCount=_.filter(this._columnWidthFixedFlags).length;var adjustedList;if(totalExtraWidth>0){if(columnLength>fixedCount){adjustedList=this._addExtraColumnWidth(columnWidthList,totalExtraWidth);}else{adjustedList=_.clone(columnWidthList);adjustedList[columnLength-1]+=totalExtraWidth;}}else{if(fitToReducedTotal&&totalExtraWidth<0){adjustedList=this._reduceExcessColumnWidth(columnWidthList,totalExtraWidth);}else{adjustedList=columnWidthList;}}return adjustedList;},_onDimensionWidthChange:function(){var widthList=this.get("columnWidthList");if(!this._isModified){widthList=this._adjustColumnWidthList(widthList,true);}this._setColumnWidthVariables(widthList);},getColumnWidthList:function(whichSide){var columnFixCount=this.columnModel.getVisibleColumnFixCount(true);var columnWidthList=[];switch(whichSide){case frameConst.L:columnWidthList=this.get("columnWidthList").slice(0,columnFixCount);break;case frameConst.R:columnWidthList=this.get("columnWidthList").slice(columnFixCount);break;default:columnWidthList=this.get("columnWidthList");break;}return columnWidthList;},getFrameWidth:function(whichSide){var columnFixCount=this.columnModel.getVisibleColumnFixCount(true);var columnWidthList=this.getColumnWidthList(whichSide);var frameWidth=this._getFrameWidth(columnWidthList);if(_.isUndefined(whichSide)&&columnFixCount>0){frameWidth+=CELL_BORDER_WIDTH;}return frameWidth;},setColumnWidth:function(index,width){var columnWidthList=this.get("columnWidthList");var fixedFlags=this._columnWidthFixedFlags;var minWidth=this._minColumnWidthList[index];if(!fixedFlags[index]&&columnWidthList[index]){columnWidthList[index]=Math.max(width,minWidth);this._setColumnWidthVariables(columnWidthList);this._isModified=true;}},indexOf:function(posX,withMeta){var columnWidthList=this.getColumnWidthList();var totalColumnWidth=this.getFrameWidth();var adjustableIndex=(withMeta)?0:this.columnModel.getVisibleMetaColumnCount();var columnIndex=0;if(posX>=totalColumnWidth){columnIndex=columnWidthList.length-1;}else{tui.util.forEachArray(columnWidthList,function(width,index){width+=CELL_BORDER_WIDTH;columnIndex=index;if(posX>width){posX-=width;}else{return false;}});}return Math.max(0,columnIndex-adjustableIndex);},restoreColumnWidth:function(index){var orgWidth=this.get("originalWidthList")[index];this.setColumnWidth(index,orgWidth);}});module.exports=CoordColumn;},function(module,exports,__webpack_require__){var Model=__webpack_require__(7);var dimensionConstMap=__webpack_require__(9).dimension;var TABLE_BORDER_WIDTH=dimensionConstMap.TABLE_BORDER_WIDTH;var CELL_BORDER_WIDTH=dimensionConstMap.CELL_BORDER_WIDTH;var CoordConverter=Model.extend({initialize:function(attrs,options){this.dataModel=options.dataModel;this.columnModel=options.columnModel;this.focusModel=options.focusModel;this.dimensionModel=options.dimensionModel;this.renderModel=options.renderModel;this.coordRowModel=options.coordRowModel;this.coordColumnModel=options.coordColumnModel;this.listenTo(this.focusModel,"focus",this._onFocus);},getIndexFromMousePosition:function(pageX,pageY,withMeta){var position=this.dimensionModel.getPositionFromBodyArea(pageX,pageY);var posWithScroll=this._getScrolledPosition(position);return{row:this.coordRowModel.indexOf(posWithScroll.y),column:this.coordColumnModel.indexOf(posWithScroll.x,withMeta)};},_getScrolledPosition:function(position){var renderModel=this.renderModel;var isRside=position.x>this.dimensionModel.get("lsideWidth");var scrollLeft=isRside?renderModel.get("scrollLeft"):0;var scrollTop=renderModel.get("scrollTop");return{x:position.x+scrollLeft,y:position.y+scrollTop};},_getRowSpanCount:function(rowKey,columnName){var rowSpanData=this.dataModel.get(rowKey).getRowSpanData(columnName);if(!rowSpanData.isMainRow){rowKey=rowSpanData.mainRowKey;rowSpanData=this.dataModel.get(rowKey).getRowSpanData(columnName);}return rowSpanData.count||1;},_getCellVerticalPosition:function(rowKey,rowSpanCount){var firstIdx,lastIdx,top,bottom;var coordRowModel=this.coordRowModel;firstIdx=this.dataModel.indexOfRowKey(rowKey);lastIdx=firstIdx+rowSpanCount-1;top=coordRowModel.getOffsetAt(firstIdx);bottom=coordRowModel.getOffsetAt(lastIdx)+coordRowModel.getHeightAt(lastIdx)+CELL_BORDER_WIDTH;return{top:top,bottom:bottom};},_getCellHorizontalPosition:function(columnName){var columnModel=this.columnModel;var metaColumnCount=columnModel.getVisibleMetaColumnCount();var columnWidthList=this.coordColumnModel.get("columnWidthList");var leftColumnCount=columnModel.getVisibleColumnFixCount()+metaColumnCount;var targetIdx=columnModel.indexOfColumnName(columnName,true)+metaColumnCount;var idx=leftColumnCount>targetIdx?0:leftColumnCount;var left=0;for(;idx<targetIdx;idx+=1){left+=columnWidthList[idx]+CELL_BORDER_WIDTH;}return{left:left,right:left+columnWidthList[targetIdx]+CELL_BORDER_WIDTH};},getCellPosition:function(rowKey,columnName){var rowSpanCount,vPos,hPos;rowKey=this.dataModel.getMainRowKey(rowKey,columnName);if(!this.dataModel.get(rowKey)){return{};}rowSpanCount=this._getRowSpanCount(rowKey,columnName);vPos=this._getCellVerticalPosition(rowKey,rowSpanCount);hPos=this._getCellHorizontalPosition(columnName);return{top:vPos.top,bottom:vPos.bottom,left:hPos.left,right:hPos.right};},_judgeScrollDirection:function(targetPosition,isRsideColumn,bodySize){var renderModel=this.renderModel;var currentTop=renderModel.get("scrollTop");var currentLeft=renderModel.get("scrollLeft");var isUp,isDown,isLeft,isRight;isUp=targetPosition.top<currentTop;isDown=!isUp&&(targetPosition.bottom>(currentTop+bodySize.height));if(isRsideColumn){isLeft=targetPosition.left<currentLeft;isRight=!isLeft&&(targetPosition.right>(currentLeft+bodySize.rsideWidth-1));}else{isLeft=isRight=false;}return{isUp:isUp,isDown:isDown,isLeft:isLeft,isRight:isRight};},_onFocus:function(rowKey,columnName,shouldScroll){var scrollPosition;if(!shouldScroll){return;}scrollPosition=this.getScrollPosition(rowKey,columnName);if(!tui.util.isEmpty(scrollPosition)){this.renderModel.set(scrollPosition);}},_makeScrollPosition:function(scrollDirection,targetPosition,bodySize){var pos={};if(scrollDirection.isUp){pos.scrollTop=targetPosition.top;}else{if(scrollDirection.isDown){pos.scrollTop=targetPosition.bottom-bodySize.height;}}if(scrollDirection.isLeft){pos.scrollLeft=targetPosition.left;}else{if(scrollDirection.isRight){pos.scrollLeft=targetPosition.right-bodySize.rsideWidth+TABLE_BORDER_WIDTH;}}return pos;},getScrollPosition:function(rowKey,columnName){var isRsideColumn=!this.columnModel.isLside(columnName);var targetPosition=this.getCellPosition(rowKey,columnName);var bodySize=this.dimensionModel.getBodySize();var scrollDirection=this._judgeScrollDirection(targetPosition,isRsideColumn,bodySize);return this._makeScrollPosition(scrollDirection,targetPosition,bodySize);}});module.exports=CoordConverter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Model=__webpack_require__(7);var util=__webpack_require__(8);var GridEvent=__webpack_require__(21);var Focus=Model.extend({initialize:function(attrs,options){Model.prototype.initialize.apply(this,arguments);this.dataModel=options.dataModel;this.columnModel=options.columnModel;this.dimensionModel=options.dimensionModel;this.domState=options.domState;this.listenTo(this.dataModel,"reset",this._onResetData);},defaults:{rowKey:null,columnName:"",prevRowKey:null,prevColumnName:"",editingAddress:null},_onResetData:function(){this.unselect(true);},_savePrevious:function(){if(this.get("rowKey")!==null){this.set("prevRowKey",this.get("rowKey"));}if(this.get("columnName")){this.set("prevColumnName",this.get("columnName"));}},_clearPrevious:function(){this.set({prevRowKey:null,prevColumnName:""});},isCurrentCell:function(rowKey,columnName,isMainRowKey){var curColumnName=this.get("columnName");var curRowKey=this.get("rowKey");if(isMainRowKey){curRowKey=this.dataModel.getMainRowKey(curRowKey,curColumnName);}return String(curRowKey)===String(rowKey)&&curColumnName===columnName;},select:function(rowKey){var eventData=new GridEvent();var currentRowKey=this.get("rowKey");if(String(currentRowKey)===String(rowKey)){return true;}eventData.setData({rowKey:rowKey,prevRowKey:currentRowKey,rowData:this.dataModel.getRowData(rowKey)});this.trigger("select",eventData);if(eventData.isStopped()){this._cancelSelect();return false;}this.set("rowKey",rowKey);if(this.columnModel.get("selectType")==="radio"){this.dataModel.check(rowKey);}return true;},_cancelSelect:function(){var prevColumnName=this.get("prevColumnName");this.set("columnName",prevColumnName);this.trigger("focus",this.get("rowKey"),prevColumnName);},unselect:function(blur){if(blur){this.blur();}this.set({rowKey:null});},focus:function(rowKey,columnName,isScrollable){if(!this._isValidCell(rowKey,columnName)||util.isMetaColumn(columnName)||this.isCurrentCell(rowKey,columnName)){return true;}this.blur();if(!this.select(rowKey)){return false;}this.set("columnName",columnName);this.trigger("focus",rowKey,columnName,isScrollable);return true;},focusAt:function(rowIndex,columnIndex,isScrollable){var row=this.dataModel.at(rowIndex);var column=this.columnModel.at(columnIndex,true);var result=false;if(row&&column){result=this.focus(row.get("rowKey"),column.columnName,isScrollable);}return result;},focusIn:function(rowKey,columnName,isScrollable){var result=this.focus(rowKey,columnName,isScrollable);if(result){rowKey=this.dataModel.getMainRowKey(rowKey,columnName);if(this.dataModel.get(rowKey).isEditable(columnName)){this.finishEditing();this.startEditing(rowKey,columnName);}else{this.focusClipboard();}}return result;},focusInAt:function(rowIndex,columnIndex,isScrollable){var row=this.dataModel.at(rowIndex);var column=this.columnModel.at(columnIndex,true);var result=false;if(row&&column){result=this.focusIn(row.get("rowKey"),column.columnName,isScrollable);}return result;},focusClipboard:function(){this.trigger("focusClipboard");},refreshState:function(){var restored;if(!this.domState.hasFocusedElement()){this.blur();}else{if(!this.has()){restored=this.restore();if(!restored){this.focusAt(0,0);}}}},blur:function(){var columnName=this.get("columnName");if(!this.has()){return this;}if(this.has(true)){this._savePrevious();}if(this.get("rowKey")!==null){this.set("columnName","");}this.trigger("blur",this.get("rowKey"),columnName);return this;},which:function(){return{rowKey:this.get("rowKey"),columnName:this.get("columnName")};},indexOf:function(isPrevious){var rowKey=isPrevious?this.get("prevRowKey"):this.get("rowKey");var columnName=isPrevious?this.get("prevColumnName"):this.get("columnName");return{row:this.dataModel.indexOfRowKey(rowKey),column:this.columnModel.indexOfColumnName(columnName,true)};},has:function(checkValid){var rowKey=this.get("rowKey");var columnName=this.get("columnName");if(checkValid){return this._isValidCell(rowKey,columnName);}return !util.isBlank(rowKey)&&!util.isBlank(columnName);},restore:function(){var prevRowKey=this.get("prevRowKey");var prevColumnName=this.get("prevColumnName");var restored=false;if(this._isValidCell(prevRowKey,prevColumnName)){this.focus(prevRowKey,prevColumnName);restored=true;}return restored;},isEditingCell:function(rowKey,columnName){var address=this.get("editingAddress");return address&&(String(address.rowKey)===String(rowKey))&&(address.columnName===columnName);},startEditing:function(rowKey,columnName){if(this.get("editingAddress")){return false;}if(_.isUndefined(rowKey)&&_.isUndefined(columnName)){rowKey=this.get("rowKey");columnName=this.get("columnName");}else{if(!this.isCurrentCell(rowKey,columnName,true)){return false;}}rowKey=this.dataModel.getMainRowKey(rowKey,columnName);if(!this.dataModel.get(rowKey).isEditable(columnName)){return false;}this.set("editingAddress",{rowKey:rowKey,columnName:columnName});return true;},finishEditing:function(){if(!this.get("editingAddress")){return false;}this.set("editingAddress",null);return true;},_isValidCell:function(rowKey,columnName){var isValidRowKey=!util.isBlank(rowKey)&&!!this.dataModel.get(rowKey);var isValidColumnName=!util.isBlank(columnName)&&!!this.columnModel.getColumnModel(columnName);return isValidRowKey&&isValidColumnName;},_findRowKey:function(offset){var dataModel=this.dataModel;var rowKey=null;var index,row;if(this.has(true)){index=Math.max(Math.min(dataModel.indexOfRowKey(this.get("rowKey"))+offset,this.dataModel.length-1),0);row=dataModel.at(index);if(row){rowKey=row.get("rowKey");}}return rowKey;},_findColumnName:function(offset){var columnModel=this.columnModel;var columnModelList=columnModel.getVisibleColumnModelList();var columnIndex=columnModel.indexOfColumnName(this.get("columnName"),true);var columnName=null;var index;if(this.has(true)){index=Math.max(Math.min(columnIndex+offset,columnModelList.length-1),0);columnName=columnModelList[index]&&columnModelList[index].columnName;}return columnName;},_getRowSpanData:function(rowKey,columnName){return this.dataModel.get(rowKey).getRowSpanData(columnName);},nextRowIndex:function(offset){var rowKey=this.nextRowKey(offset);return this.dataModel.indexOfRowKey(rowKey);},prevRowIndex:function(offset){var rowKey=this.prevRowKey(offset);return this.dataModel.indexOfRowKey(rowKey);},nextColumnIndex:function(){var columnName=this.nextColumnName();return this.columnModel.indexOfColumnName(columnName,true);},prevColumnIndex:function(){var columnName=this.prevColumnName();return this.columnModel.indexOfColumnName(columnName,true);},nextRowKey:function(offset){var focused=this.which();var rowKey=focused.rowKey;var count,rowSpanData;offset=(typeof offset==="number")?offset:1;if(offset>1){rowKey=this._findRowKey(offset);rowSpanData=this._getRowSpanData(rowKey,focused.columnName);if(!rowSpanData.isMainRow){rowKey=this._findRowKey(rowSpanData.count+offset);}}else{rowSpanData=this._getRowSpanData(rowKey,focused.columnName);if(rowSpanData.isMainRow&&rowSpanData.count>0){rowKey=this._findRowKey(rowSpanData.count);}else{if(!rowSpanData.isMainRow){count=rowSpanData.count;rowSpanData=this._getRowSpanData(rowSpanData.mainRowKey,focused.columnName);rowKey=this._findRowKey(rowSpanData.count+count);}else{rowKey=this._findRowKey(1);}}}return rowKey;},prevRowKey:function(offset){var focused=this.which();var rowKey=focused.rowKey;var rowSpanData;offset=typeof offset==="number"?offset:1;offset*=-1;if(offset<-1){rowKey=this._findRowKey(offset);rowSpanData=this._getRowSpanData(rowKey,focused.columnName);if(!rowSpanData.isMainRow){rowKey=this._findRowKey(rowSpanData.count+offset);}}else{rowSpanData=this._getRowSpanData(rowKey,focused.columnName);if(!rowSpanData.isMainRow){rowKey=this._findRowKey(rowSpanData.count-1);}else{rowKey=this._findRowKey(-1);}}return rowKey;},nextColumnName:function(){return this._findColumnName(1);},prevColumnName:function(){return this._findColumnName(-1);},firstRowKey:function(){return this.dataModel.at(0).get("rowKey");},lastRowKey:function(){return this.dataModel.at(this.dataModel.length-1).get("rowKey");},firstColumnName:function(){var columnModelList=this.columnModel.getVisibleColumnModelList();return columnModelList[0].columnName;},lastColumnName:function(){var columnModelList=this.columnModel.getVisibleColumnModelList();var lastIndex=columnModelList.length-1;return columnModelList[lastIndex].columnName;},prevAddress:function(){var rowKey=this.get("rowKey");var columnName=this.get("columnName");var isFirstColumn=columnName===this.firstColumnName();var isFirstRow=rowKey===this.firstRowKey();var prevRowKey,prevColumnName;if(isFirstRow&&isFirstColumn){prevRowKey=rowKey;prevColumnName=columnName;}else{if(isFirstColumn){prevRowKey=this.prevRowKey();prevColumnName=this.lastColumnName();}else{prevRowKey=rowKey;prevColumnName=this.prevColumnName();}}return{rowKey:prevRowKey,columnName:prevColumnName};},nextAddress:function(){var rowKey=this.get("rowKey");var columnName=this.get("columnName");var isLastColumn=columnName===this.lastColumnName();var isLastRow=rowKey===this.lastRowKey();var nextRowKey,nextColumnName;if(isLastRow&&isLastColumn){nextRowKey=rowKey;nextColumnName=columnName;}else{if(isLastColumn){nextRowKey=this.nextRowKey();nextColumnName=this.firstColumnName();}else{nextRowKey=rowKey;nextColumnName=this.nextColumnName();}}return{rowKey:nextRowKey,columnName:nextColumnName};}});module.exports=Focus;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var GridEvent=tui.util.defineClass({init:function(data){this._stopped=false;this.setData(data);},setData:function(data){_.extend(this,data);},stop:function(){this._stopped=true;},isStopped:function(){return this._stopped;}});module.exports=GridEvent;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Model=__webpack_require__(7);var RowList=__webpack_require__(23);var renderStateMap=__webpack_require__(9).renderState;var CELL_BORDER_WIDTH=__webpack_require__(9).dimension.CELL_BORDER_WIDTH;var DATA_LENGTH_FOR_LOADING=1000;var Renderer=Model.extend({initialize:function(attrs,options){var lside,rside,rowListOptions;this.setOwnProperties({dataModel:options.dataModel,columnModel:options.columnModel,focusModel:options.focusModel,dimensionModel:options.dimensionModel,coordRowModel:options.coordRowModel,coordColumnModel:options.coordColumnModel});rowListOptions={dataModel:this.dataModel,columnModel:this.columnModel,focusModel:this.focusModel};lside=new RowList([],rowListOptions);rside=new RowList([],rowListOptions);this.set({lside:lside,rside:rside});this.listenTo(this.columnModel,"columnModelChange change",this._onColumnModelChange).listenTo(this.dataModel,"add remove sort reset delRange",this._onDataListChange).listenTo(this.dataModel,"add",this._onAddDataModel).listenTo(this.dataModel,"beforeReset",this._onBeforeResetData).listenTo(this.focusModel,"change:editingAddress",this._onEditingAddressChange).listenTo(lside,"valueChange",this._executeRelation).listenTo(rside,"valueChange",this._executeRelation).listenTo(this.coordRowModel,"reset",this._onChangeRowHeights).listenTo(this.dimensionModel,"columnWidthChanged",this.finishEditing).listenTo(this.dimensionModel,"change:width",this._updateMaxScrollLeft).listenTo(this.dimensionModel,"change:totalRowHeight change:scrollBarSize change:bodyHeight",this._updateMaxScrollTop);if(this.get("showDummyRows")){this.listenTo(this.dimensionModel,"change:bodyHeight change:totalRowHeight",this._resetDummyRowCount);this.on("change:dummyRowCount",this._resetDummyRows);}this.on("change:startIndex change:endIndex",this.refresh);this._onChangeLayoutBound=_.bind(this._onChangeLayout,this);this._updateMaxScrollLeft();},defaults:{top:0,bottom:0,scrollTop:0,scrollLeft:0,maxScrollLeft:0,maxScrollTop:0,startIndex:-1,endIndex:-1,startNumber:1,lside:null,rside:null,showDummyRows:false,dummyRowCount:0,emptyMessage:null,state:renderStateMap.DONE},_onChangeLayout:function(){this.focusModel.finishEditing();this.focusModel.focusClipboard();},_onChangeRowHeights:function(){var coordRowModel=this.coordRowModel;var lside=this.get("lside");var rside=this.get("rside");var len=lside.length;var i=0;var height;for(;i<len;i+=1){height=coordRowModel.getHeightAt(i);lside.at(i).set("height",height);rside.at(i).set("height",height);}},_updateMaxScrollLeft:function(){var dimension=this.dimensionModel;var maxScrollLeft=this.coordColumnModel.getFrameWidth("R")-dimension.get("rsideWidth")+dimension.getScrollYWidth();this.set("maxScrollLeft",maxScrollLeft);},_updateMaxScrollTop:function(){var dimension=this.dimensionModel;var maxScrollTop=dimension.get("totalRowHeight")-dimension.get("bodyHeight")+dimension.getScrollXHeight();this.set("maxScrollTop",maxScrollTop);},_onBeforeResetData:function(dataLength){if(dataLength>DATA_LENGTH_FOR_LOADING){this.set("state",renderStateMap.LOADING);}},_onEditingAddressChange:function(focusModel,address){var target=address;var editing=true;var self=this;if(!address){target=focusModel.previous("editingAddress");editing=false;}this._updateCellData(target.rowKey,target.columnName,{isEditing:editing});this._triggerEditingStateChanged(target.rowKey,target.columnName);_.defer(function(){self._toggleChangeLayoutEventHandlers(editing);});},_toggleChangeLayoutEventHandlers:function(editing){var renderEventName="change:scrollTop change:scrollLeft";var dimensionEventName="columnWidthChanged";if(editing){this.listenToOnce(this.dimensionModel,dimensionEventName,this._onChangeLayoutBound);this.once(renderEventName,this._onChangeLayoutBound);}else{this.stopListening(this.dimensionModel,dimensionEventName,this._onChangeLayoutBound);this.off(renderEventName,this._onChangeLayoutBound);}},_triggerEditingStateChanged:function(rowKey,columnName){var cellData=this.getCellData(rowKey,columnName);if(tui.util.pick(cellData,"columnModel","editOption","useViewMode")!==false){this.trigger("editingStateChanged",cellData);}},_updateCellData:function(rowKey,columnName,cellData){var rowModel=this._getRowModel(rowKey,columnName);if(rowModel){rowModel.setCell(columnName,cellData);}},initializeVariables:function(){this.set({top:0,scrollTop:0,scrollLeft:0,startNumber:1});},getCollection:function(whichSide){return this.get(tui.util.isString(whichSide)?whichSide.toLowerCase()+"side":"rside");},_onColumnModelChange:function(){this.set({scrollTop:0},{silent:true});this._setRenderingRange(true);this.refresh({columnModelChanged:true});},_onDataListChange:function(){this._setRenderingRange(true);this.refresh({dataListChanged:true});},_onAddDataModel:function(dataModel,options){if(options.focus){this.focusModel.focusAt(options.at,0);}},_resetDummyRows:function(){this._clearDummyRows();this._fillDummyRows();this.trigger("rowListChanged");},_setRenderingRange:function(silent){var dataLength=this.dataModel.length;this.set({startIndex:dataLength?0:-1,endIndex:dataLength-1},{silent:silent});},_createViewDataFromDataModel:function(rowDataModel,columnNames,height,rowNum){var viewData={height:height,rowNum:rowNum,rowKey:rowDataModel.get("rowKey"),_extraData:rowDataModel.get("_extraData")};_.each(columnNames,function(columnName){var value=rowDataModel.get(columnName);if(columnName==="_number"&&!_.isNumber(value)){value=rowNum;}viewData[columnName]=value;});return viewData;},_getColumnNamesOfEachSide:function(){var columnFixCount=this.columnModel.getVisibleColumnFixCount(true);var columnModels=this.columnModel.getVisibleColumnModelList(null,true);var columnNames=_.pluck(columnModels,"columnName");return{lside:columnNames.slice(0,columnFixCount),rside:columnNames.slice(columnFixCount)};},_resetViewModelList:function(attrName,viewData){this.get(attrName).clear().reset(viewData,{parse:true});},_resetAllViewModelListWithRange:function(startIndex,endIndex){var columnNamesMap=this._getColumnNamesOfEachSide();var rowNum=this.get("startNumber")+startIndex;var lsideData=[];var rsideData=[];var rowDataModel,height,i;if(startIndex>=0&&endIndex>=0){for(i=startIndex;i<=endIndex;i+=1){rowDataModel=this.dataModel.at(i);height=this.coordRowModel.getHeightAt(i);lsideData.push(this._createViewDataFromDataModel(rowDataModel,columnNamesMap.lside,height,rowNum));rsideData.push(this._createViewDataFromDataModel(rowDataModel,columnNamesMap.rside,height,rowNum));rowNum+=1;}}this._resetViewModelList("lside",lsideData);this._resetViewModelList("rside",rsideData);},_getActualRowCount:function(){return this.get("endIndex")-this.get("startIndex")+1;},_clearDummyRows:function(){var dataRowCount=this.get("endIndex")-this.get("startIndex")+1;_.each(["lside","rside"],function(attrName){var rowList=this.get(attrName);while(rowList.length>dataRowCount){rowList.pop();}},this);},_resetDummyRowCount:function(){var dimensionModel=this.dimensionModel;var totalRowHeight=dimensionModel.get("totalRowHeight");var rowHeight=dimensionModel.get("rowHeight")+CELL_BORDER_WIDTH;var bodyHeight=dimensionModel.get("bodyHeight")-dimensionModel.getScrollXHeight();var dummyRowCount=0;if(totalRowHeight<bodyHeight){dummyRowCount=Math.ceil((bodyHeight-totalRowHeight)/rowHeight);}this.set("dummyRowCount",dummyRowCount);},_fillDummyRows:function(){var dummyRowCount=this.get("dummyRowCount");var rowNum,rowHeight;if(dummyRowCount){rowNum=this.get("startNumber")+this.get("endIndex")+1;rowHeight=this.dimensionModel.get("rowHeight");_.times(dummyRowCount,function(){_.each(["lside","rside"],function(listName){this.get(listName).add({height:rowHeight,rowNum:rowNum});},this);rowNum+=1;},this);}},refresh:function(options){var columnModelChanged=!!options&&options.columnModelChanged;var dataListChanged=!!options&&options.dataListChanged;var startIndex,endIndex,i;startIndex=this.get("startIndex");endIndex=this.get("endIndex");this._resetAllViewModelListWithRange(startIndex,endIndex);this._fillDummyRows();if(startIndex>=0&&endIndex>=0){for(i=startIndex;i<=endIndex;i+=1){this._executeRelation(i);}}if(columnModelChanged){this.trigger("columnModelChanged");}else{this.trigger("rowListChanged",dataListChanged);if(dataListChanged){this.coordRowModel.syncWithDom();}}this._refreshState();},_refreshState:function(){if(this.dataModel.length){this.set("state",renderStateMap.DONE);}else{this.set("state",renderStateMap.EMPTY);}},_getCollectionByColumnName:function(columnName){var lside=this.get("lside");var collection;if(lside.at(0)&&lside.at(0).get(columnName)){collection=lside;}else{collection=this.get("rside");}return collection;},_getRowModel:function(rowKey,columnName){var collection=this._getCollectionByColumnName(columnName);return collection.get(rowKey);},getCellData:function(rowKey,columnName){var row=this._getRowModel(rowKey,columnName);var cellData=null;if(row){cellData=row.get(columnName);}return cellData;},_executeRelation:function(rowIndex){var row=this.dataModel.at(rowIndex);var renderIdx=rowIndex-this.get("startIndex");var rowModel,relationResult;relationResult=row.executeRelationCallbacksAll();_.each(relationResult,function(changes,columnName){rowModel=this._getCollectionByColumnName(columnName).at(renderIdx);if(rowModel){rowModel.setCell(columnName,changes);}},this);}});module.exports=Renderer;},function(module,exports,__webpack_require__){var Collection=__webpack_require__(11);var Row=__webpack_require__(24);var RowList=Collection.extend({initialize:function(rawData,options){this.setOwnProperties({dataModel:options.dataModel,columnModel:options.columnModel,focusModel:options.focusModel});},model:Row});module.exports=RowList;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Model=__webpack_require__(7);var util=__webpack_require__(8);var Row=Model.extend({initialize:function(attributes){var rowKey=attributes&&attributes.rowKey;var dataModel=this.collection.dataModel;var rowData=dataModel.get(rowKey);this.dataModel=dataModel;this.columnModel=this.collection.columnModel;this.focusModel=this.collection.focusModel;if(rowData){this.listenTo(rowData,"change",this._onDataModelChange);this.listenTo(rowData,"restore",this._onDataModelRestore);this.listenTo(rowData,"extraDataChanged",this._setRowExtraData);this.listenTo(dataModel,"disabledChanged",this._onDataModelDisabledChanged);this.rowData=rowData;}},idAttribute:"rowKey",_onDataModelChange:function(rowData){_.each(rowData.changed,function(value,columnName){var column,isTextType;if(this.has(columnName)){column=this.columnModel.getColumnModel(columnName);isTextType=this.columnModel.isTextType(columnName);this.setCell(columnName,this._getValueAttrs(value,rowData,column,isTextType));}},this);},_onDataModelRestore:function(columnName){var cellData=this.get(columnName);if(cellData){this.trigger("restore",cellData);}},_getColumnNameList:function(){var columnModels=this.collection.columnModel.getVisibleColumnModelList(null,true);return _.pluck(columnModels,"columnName");},_onDataModelDisabledChanged:function(){var columnNames=this._getColumnNameList();_.each(columnNames,function(columnName){this.setCell(columnName,{isDisabled:this.rowData.isDisabled(columnName),className:this._getClassNameString(columnName)});},this);},_setRowExtraData:function(){if(tui.util.isUndefined(this.collection)){return;}_.each(this._getColumnNameList(),function(columnName){var cellData=this.get(columnName);var cellState;if(!tui.util.isUndefined(cellData)&&cellData.isMainRow){cellState=this.rowData.getCellState(columnName);this.setCell(columnName,{isDisabled:cellState.isDisabled,isEditable:cellState.isEditable,className:this._getClassNameString(columnName)});}},this);},parse:function(data,options){var collection=options.collection;return this._formatData(data,collection.dataModel,collection.columnModel,collection.focusModel);},_formatData:function(data,dataModel,columnModel,focusModel){var rowKey=data.rowKey;var rowNum=data.rowNum;var rowHeight=data.height;var columnData,row;if(_.isUndefined(rowKey)){return data;}row=dataModel.get(rowKey);columnData=_.omit(data,"rowKey","_extraData","height","rowNum");_.each(columnData,function(value,columnName){var rowSpanData=this._getRowSpanData(columnName,data,dataModel.isRowSpanEnable());var cellState=row.getCellState(columnName);var isTextType=columnModel.isTextType(columnName);var column=columnModel.getColumnModel(columnName);data[columnName]={rowKey:rowKey,rowNum:rowNum,height:rowHeight,columnName:columnName,rowSpan:rowSpanData.count,isMainRow:rowSpanData.isMainRow,mainRowKey:rowSpanData.mainRowKey,isEditable:cellState.isEditable,isDisabled:cellState.isDisabled,isEditing:focusModel.isEditingCell(rowKey,columnName),whiteSpace:column.whiteSpace||"nowrap",valign:column.valign,optionList:tui.util.pick(column,"editOption","list"),className:this._getClassNameString(columnName,row,focusModel),columnModel:column,changed:[]};_.assign(data[columnName],this._getValueAttrs(value,row,column,isTextType));},this);return data;},_getClassNameString:function(columnName,row,focusModel){var classNames;if(!row){row=this.dataModel.get(this.get("rowKey"));if(!row){return"";}}if(!focusModel){focusModel=this.focusModel;}classNames=row.getClassNameList(columnName);return classNames.join(" ");},_getValueAttrs:function(value,row,column,isTextType){var beforeContent=tui.util.pick(column,"editOption","beforeContent");var afterContent=tui.util.pick(column,"editOption","afterContent");var converter=tui.util.pick(column,"editOption","converter");var rowAttrs=row.toJSON();return{value:this._getValueToDisplay(value,column,isTextType),formattedValue:this._getFormattedValue(value,rowAttrs,column),beforeContent:this._getExtraContent(beforeContent,value,rowAttrs),afterContent:this._getExtraContent(afterContent,value,rowAttrs),convertedHTML:this._getConvertedHTML(converter,value,rowAttrs)};},_getFormattedValue:function(value,rowAttrs,column){var result;if(_.isFunction(column.formatter)){result=column.formatter(value,rowAttrs,column);}else{result=value;}if(_.isNumber(result)){result=String(result);}else{if(!result){result="";}}return result;},_getExtraContent:function(content,cellValue,rowAttrs){var result="";if(_.isFunction(content)){result=content(cellValue,rowAttrs);}else{if(tui.util.isExisty(content)){result=content;}}return result;},_getConvertedHTML:function(converter,cellValue,rowAttrs){var convertedHTML=null;if(_.isFunction(converter)){convertedHTML=converter(cellValue,rowAttrs);}if(convertedHTML===false){convertedHTML=null;}return convertedHTML;},_getValueToDisplay:function(value,column,isTextType){var isExisty=tui.util.isExisty;var notUseHtmlEntity=column.notUseHtmlEntity;var defaultValue=column.defaultValue;if(!isExisty(value)){value=isExisty(defaultValue)?defaultValue:"";}if(isTextType&&!notUseHtmlEntity&&tui.util.hasEncodableString(value)){value=tui.util.encodeHTMLEntity(value);}return value;},_getRowSpanData:function(columnName,data,isRowSpanEnable){var rowSpanData=tui.util.pick(data,"_extraData","rowSpanData",columnName);if(!isRowSpanEnable||!rowSpanData){rowSpanData={mainRowKey:data.rowKey,count:0,isMainRow:true};}return rowSpanData;},updateClassName:function(columnName){this.setCell(columnName,{className:this._getClassNameString(columnName)});},setCell:function(columnName,param){var isValueChanged=false;var changed=[];var rowIndex,rowKey,data;if(!this.has(columnName)){return;}rowKey=this.get("rowKey");data=_.clone(this.get(columnName));_.each(param,function(changeValue,name){if(!util.isEqual(data[name],changeValue)){isValueChanged=(name==="value")?true:isValueChanged;data[name]=changeValue;changed.push(name);}},this);if(changed.length){data.changed=changed;this.set(columnName,data,{silent:this._shouldSetSilently(data,isValueChanged)});if(isValueChanged){rowIndex=this.collection.dataModel.indexOfRowKey(rowKey);this.trigger("valueChange",rowIndex);}}},_shouldSetSilently:function(cellData,valueChanged){var valueChangedOnEditing=cellData.isEditing&&valueChanged;var useViewMode=tui.util.pick(cellData,"columnModel","editOption","useViewMode")!==false;var editingChangedToTrue=_.contains(cellData.changed,"isEditing")&&cellData.isEditing;return valueChangedOnEditing||(useViewMode&&editingChangedToTrue);}});module.exports=Row;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Renderer=__webpack_require__(22);var dimensionConst=__webpack_require__(9).dimension;var CELL_BORDER_WIDTH=dimensionConst.CELL_BORDER_WIDTH;var BUFFER_RATIO=0.3;var BUFFER_HIT_RATIO=0.1;var SmartRenderer=Renderer.extend({initialize:function(){Renderer.prototype.initialize.apply(this,arguments);this.on("change:scrollTop",this._onChangeScrollTop,this);this.listenTo(this.dimensionModel,"change:bodyHeight",this._onChangeBodyHeight);},_onChangeScrollTop:function(){if(this._shouldRefresh(this.get("scrollTop"))){this._setRenderingRange();}},_onChangeBodyHeight:function(){this._setRenderingRange();},_setRenderingRange:function(silent){var scrollTop=this.get("scrollTop");var dimensionModel=this.dimensionModel;var dataModel=this.dataModel;var coordRowModel=this.coordRowModel;var bodyHeight=dimensionModel.get("bodyHeight");var bufferSize=parseInt(bodyHeight*BUFFER_RATIO,10);var startIndex=Math.max(coordRowModel.indexOf(scrollTop-bufferSize),0);var endIndex=Math.min(coordRowModel.indexOf(scrollTop+bodyHeight+bufferSize),dataModel.length-1);var top=coordRowModel.getOffsetAt(startIndex);var bottom=coordRowModel.getOffsetAt(endIndex)+coordRowModel.getHeightAt(endIndex)+CELL_BORDER_WIDTH;if(dataModel.isRowSpanEnable()){startIndex+=this._getStartRowSpanMinCount(startIndex);endIndex+=this._getEndRowSpanMaxCount(endIndex);}this.set({top:top,bottom:bottom,startIndex:startIndex,endIndex:endIndex},{silent:silent});},_getStartRowSpanMinCount:function(startIndex){var firstRow=this.dataModel.at(startIndex),result=0,counts;if(firstRow){counts=_.pluck(firstRow.getRowSpanData(),"count");counts.push(0);result=_.min(counts);}return result;},_getEndRowSpanMaxCount:function(endIndex){var lastRow=this.dataModel.at(endIndex),result=0,counts;if(lastRow){counts=_.pluck(lastRow.getRowSpanData(),"count");counts.push(0);result=_.max(counts);}return result;},_shouldRefresh:function(scrollTop){var bodyHeight=this.dimensionModel.get("bodyHeight");var scrollBottom=scrollTop+bodyHeight;var totalRowHeight=this.dimensionModel.get("totalRowHeight");var top=this.get("top");var bottom=this.get("bottom");var bufferHitSize=parseInt(bodyHeight*BUFFER_HIT_RATIO,10);var hitTopBuffer=(scrollTop-top)<bufferHitSize;var hitBottomBuffer=(bottom-scrollBottom)<bufferHitSize;return(hitTopBuffer&&top>0)||(hitBottomBuffer&&bottom<totalRowHeight);}});SmartRenderer.BUFFER_RATIO=BUFFER_RATIO;SmartRenderer.BUFFER_HIT_RATIO=BUFFER_HIT_RATIO;module.exports=SmartRenderer;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Model=__webpack_require__(7);var util=__webpack_require__(8);var typeConstMap=__webpack_require__(9).selectionType;var Selection=Model.extend({initialize:function(attr,options){Model.prototype.initialize.apply(this,arguments);this.setOwnProperties({dataModel:options.dataModel,columnModel:options.columnModel,dimensionModel:options.dimensionModel,focusModel:options.focusModel,renderModel:options.renderModel,coordConverterModel:options.coordConverterModel,inputRange:null,intervalIdForAutoScroll:null,scrollPixelScale:40,enabled:true,selectionType:typeConstMap.CELL});this.listenTo(this.dataModel,"add remove sort reset",this.end);this.listenTo(this.dataModel,"paste",this._onPasteData);},defaults:{range:null},_onPasteData:function(range){this.start(range.startIdx.row,range.startIdx.column);this.update(range.endIdx.row,range.endIdx.column);},setType:function(type){this.selectionType=typeConstMap[type]||this.selectionType;},getType:function(){return this.selectionType;},enable:function(){this.enabled=true;},disable:function(){this.end();this.enabled=false;},isEnabled:function(){return this.enabled;},start:function(rowIndex,columnIndex,type){if(!this.isEnabled()){return;}this.setType(type);this.inputRange={row:[rowIndex,rowIndex],column:[columnIndex,columnIndex]};this._resetRangeAttribute();},update:function(rowIndex,columnIndex,type){var focusedIndex;if(!this.enabled||rowIndex<0||columnIndex<0){return;}if(!this.hasSelection()){focusedIndex=this.focusModel.indexOf();this.start(focusedIndex.row,focusedIndex.column,type);}else{this.setType(type);}this._updateInputRange(rowIndex,columnIndex);this._resetRangeAttribute();},_updateInputRange:function(rowIndex,columnIndex){var inputRange=this.inputRange;if(this.selectionType===typeConstMap.ROW){columnIndex=this.columnModel.getVisibleColumnModelList().length-1;}else{if(this.selectionType===typeConstMap.COLUMN){rowIndex=this.dataModel.length-1;}}inputRange.row[1]=rowIndex;inputRange.column[1]=columnIndex;},extendColumnSelection:function(columnIndexes,pageX,pageY){var minimumColumnRange=this._minimumColumnRange;var index=this.coordConverterModel.getIndexFromMousePosition(pageX,pageY);var range={row:[0,this.dataModel.length-1],column:[]};var minMax;if(!columnIndexes||!columnIndexes.length){columnIndexes=[index.column];}this._setScrolling(pageX,pageY);if(minimumColumnRange){minMax=util.getMinMax(columnIndexes.concat(minimumColumnRange));}else{columnIndexes.push(this.inputRange.column[0]);minMax=util.getMinMax(columnIndexes);}range.column.push(minMax.min,minMax.max);this._resetRangeAttribute(range);},_setScrolling:function(pageX,pageY){var overflow=this.dimensionModel.getOverflowFromMousePosition(pageX,pageY);this.stopAutoScroll();if(this._isAutoScrollable(overflow.x,overflow.y)){this.intervalIdForAutoScroll=setInterval(_.bind(this._adjustScroll,this,overflow.x,overflow.y));}},updateByMousePosition:function(pageX,pageY,type){var index=this.coordConverterModel.getIndexFromMousePosition(pageX,pageY);this._setScrolling(pageX,pageY);this.update(index.row,index.column,type);},end:function(){this.inputRange=null;this.unset("range");this.unsetMinimumColumnRange();},stopAutoScroll:function(){if(!_.isNull(this.intervalIdForAutoScroll)){clearInterval(this.intervalIdForAutoScroll);this.intervalIdForAutoScroll=null;}},selectRow:function(rowIndex){if(this.isEnabled()){this.focusModel.focusAt(rowIndex,0);this.start(rowIndex,0,typeConstMap.ROW);this.update(rowIndex,this.columnModel.getVisibleColumnModelList().length-1);}},selectColumn:function(columnIdx){if(this.isEnabled()){this.focusModel.focusAt(0,columnIdx);this.start(0,columnIdx,typeConstMap.COLUMN);this.update(this.dataModel.length-1,columnIdx);}},selectAll:function(){if(this.isEnabled()){this.start(0,0,typeConstMap.CELL);this.update(this.dataModel.length-1,this.columnModel.getVisibleColumnModelList().length-1);}},getStartIndex:function(){var range=this.get("range");return{row:range.row[0],column:range.column[0]};},getEndIndex:function(){var range=this.get("range");return{row:range.row[1],column:range.column[1]};},hasSelection:function(){return !!this.get("range");},_isSingleCell:function(columnNameList,rowList){var isSingleColumn=columnNameList.length===1;var isSingleRow=rowList.length===1;var isSingleMergedCell=isSingleColumn&&!isSingleRow&&(rowList[0].getRowSpanData(columnNameList[0]).count===rowList.length);return(isSingleColumn&&isSingleRow)||isSingleMergedCell;},getValuesToString:function(useFormattedValue){var range=this.get("range");var renderModel=this.renderModel;var rowList=this.dataModel.slice(range.row[0],range.row[1]+1);var columnModelList=this.columnModel.getVisibleColumnModelList().slice(range.column[0],range.column[1]+1);var columnNames=_.pluck(columnModelList,"columnName");var rowValues=_.map(rowList,function(row){return _.map(columnNames,function(columnName){if(useFormattedValue){return renderModel.getCellData(row.get("rowKey"),columnName).formattedValue;}return row.getValueString(columnName);}).join("\t");});if(this._isSingleCell(columnNames,rowList)){return rowValues[0];}return rowValues.join("\n");},_isAutoScrollable:function(overflowX,overflowY){return !(overflowX===0&&overflowY===0);},_adjustScroll:function(overflowX,overflowY){var renderModel=this.renderModel;if(overflowX){this._adjustScrollLeft(overflowX,renderModel.get("scrollLeft"),renderModel.get("maxScrollLeft"));}if(overflowY){this._adjustScrollTop(overflowY,renderModel.get("scrollTop"),renderModel.get("maxScrollTop"));}},_adjustScrollLeft:function(overflowX,scrollLeft,maxScrollLeft){var adjusted=scrollLeft;var pixelScale=this.scrollPixelScale;if(overflowX<0){adjusted=Math.max(0,scrollLeft-pixelScale);}else{if(overflowX>0){adjusted=Math.min(maxScrollLeft,scrollLeft+pixelScale);}}this.renderModel.set("scrollLeft",adjusted);},_adjustScrollTop:function(overflowY,scrollTop,maxScrollTop){var adjusted=scrollTop;var pixelScale=this.scrollPixelScale;if(overflowY<0){adjusted=Math.max(0,scrollTop-pixelScale);}else{if(overflowY>0){adjusted=Math.min(maxScrollTop,scrollTop+pixelScale);}}this.renderModel.set("scrollTop",adjusted);},_resetRangeAttribute:function(inputRange){var dataModel=this.dataModel;var hasSpannedRange,spannedRange,tmpRowRange;inputRange=inputRange||this.inputRange;if(!inputRange){this.set("range",null);return;}spannedRange={row:_.sortBy(inputRange.row),column:_.sortBy(inputRange.column)};if(dataModel.isRowSpanEnable()&&this.selectionType===typeConstMap.CELL){do{tmpRowRange=_.assign([],spannedRange.row);spannedRange=this._getRowSpannedIndex(spannedRange);hasSpannedRange=(spannedRange.row[0]!==tmpRowRange[0]||spannedRange.row[1]!==tmpRowRange[1]);}while(hasSpannedRange);this._setRangeMinMax(spannedRange.row,spannedRange.column);}this.set("range",spannedRange);},setMinimumColumnRange:function(range){this._minimumColumnRange=_.extend(range);},unsetMinimumColumnRange:function(){this._minimumColumnRange=null;},_setRangeMinMax:function(rowRange,columnRange){if(rowRange){rowRange[0]=Math.max(0,rowRange[0]);rowRange[1]=Math.min(this.dataModel.length-1,rowRange[1]);}if(columnRange){columnRange[0]=Math.max(0,columnRange[0]);columnRange[1]=Math.min(this.columnModel.getVisibleColumnModelList().length-1,columnRange[1]);}},_concatRowSpanIndexFromStart:function(param){var startIndex=param.startIndex;var endIndex=param.endIndex;var columnName=param.columnName;var rowSpanData=param.startRowSpanDataMap&&param.startRowSpanDataMap[columnName];var startIndexList=param.startIndexList;var endIndexList=param.endIndexList;var spannedIndex;if(!rowSpanData){return;}if(!rowSpanData.isMainRow){spannedIndex=startIndex+rowSpanData.count;startIndexList.push(spannedIndex);}else{spannedIndex=startIndex+rowSpanData.count-1;if(spannedIndex>endIndex){endIndexList.push(spannedIndex);}}},_concatRowSpanIndexFromEnd:function(param){var endIndex=param.endIndex;var columnName=param.columnName;var rowSpanData=param.endRowSpanDataMap&&param.endRowSpanDataMap[columnName];var endIndexList=param.endIndexList;var dataModel=param.dataModel;var spannedIndex,tmpRowSpanData;if(!rowSpanData){return;}if(!rowSpanData.isMainRow){spannedIndex=endIndex+rowSpanData.count;tmpRowSpanData=dataModel.at(spannedIndex).getRowSpanData(columnName);spannedIndex+=tmpRowSpanData.count-1;if(spannedIndex>endIndex){endIndexList.push(spannedIndex);}}else{spannedIndex=endIndex+rowSpanData.count-1;endIndexList.push(spannedIndex);}},_getRowSpannedIndex:function(spannedRange){var columnModelList=this.columnModel.getVisibleColumnModelList().slice(spannedRange.column[0],spannedRange.column[1]+1);var dataModel=this.dataModel;var startIndexList=[spannedRange.row[0]];var endIndexList=[spannedRange.row[1]];var startRow=dataModel.at(spannedRange.row[0]);var endRow=dataModel.at(spannedRange.row[1]);var newSpannedRange=$.extend({},spannedRange);var startRowSpanDataMap,endRowSpanDataMap,columnName,param;if(!startRow||!endRow){return newSpannedRange;}startRowSpanDataMap=dataModel.at(spannedRange.row[0]).getRowSpanData();endRowSpanDataMap=dataModel.at(spannedRange.row[1]).getRowSpanData();_.each(columnModelList,function(columnModel){columnName=columnModel.columnName;param={columnName:columnName,startIndex:spannedRange.row[0],endIndex:spannedRange.row[1],endRowSpanDataMap:endRowSpanDataMap,startRowSpanDataMap:startRowSpanDataMap,startIndexList:startIndexList,endIndexList:endIndexList,dataModel:dataModel};this._concatRowSpanIndexFromStart(param);this._concatRowSpanIndexFromEnd(param);},this);newSpannedRange.row=[Math.min.apply(null,startIndexList),Math.max.apply(null,endIndexList)];return newSpannedRange;}});module.exports=Selection;},function(module,exports,__webpack_require__){var Model=__webpack_require__(7);var typeConst=__webpack_require__(9).summaryType;var Summary=Model.extend({initialize:function(attr,options){this.dataModel=options.dataModel;this.autoColumnNames=options.autoColumnNames;this.columnSummaryMap={};this.listenTo(this.dataModel,"add remove reset",this._resetSummaryMap);this.listenTo(this.dataModel,"change",this._onChangeData);this.listenTo(this.dataModel,"delRange",this._onDeleteRangeData);this._resetSummaryMap();},_calculate:function(values){var min=Number.MAX_VALUE;var max=Number.MIN_VALUE;var sum=0;var count=values.length;var resultMap={};var i,value;for(i=0;i<count;i+=1){value=Number(values[i]);if(isNaN(value)){value=0;}sum+=value;if(min>value){min=value;}if(max<value){max=value;}}resultMap[typeConst.SUM]=sum;resultMap[typeConst.MIN]=min;resultMap[typeConst.MAX]=max;resultMap[typeConst.AVG]=count?(sum/count):0;resultMap[typeConst.CNT]=count;return resultMap;},_resetSummaryMap:function(){this._resetFooterSummaryValue();},_resetFooterSummaryValue:function(columnNames){var targetColumnNames=this.autoColumnNames;if(columnNames){targetColumnNames=_.intersection(columnNames,this.autoColumnNames);}_.each(targetColumnNames,function(columnName){var values=this.dataModel.getColumnValues(columnName);var valueMap=this._calculate(values);this.columnSummaryMap[columnName]=valueMap;this.trigger("change",columnName,valueMap);},this);},_onChangeData:function(model){this._resetFooterSummaryValue(_.keys(model.changed));},_onDeleteRangeData:function(rowKeys,columnNames){this._resetFooterSummaryValue(columnNames);},getValue:function(columnName,summaryType){var valueMap=this.columnSummaryMap[columnName];var value;if(!summaryType){return _.isUndefined(valueMap)?null:valueMap;}value=tui.util.pick(valueMap,summaryType);return _.isUndefined(value)?null:value;}});module.exports=Summary;},function(module,exports,__webpack_require__){var ContainerView=__webpack_require__(29);var ContentAreaView=__webpack_require__(30);var ToolbarView=__webpack_require__(31);var PaginationView=__webpack_require__(32);var HeightResizeHandleView=__webpack_require__(33);var StateLayerView=__webpack_require__(34);var ClipboardView=__webpack_require__(35);var LsideFrameView=__webpack_require__(36);var RsideFrameView=__webpack_require__(38);var HeaderView=__webpack_require__(39);var HeaderResizeHandlerView=__webpack_require__(40);var BodyView=__webpack_require__(41);var BodyTableView=__webpack_require__(42);var FooterView=__webpack_require__(43);var RowListView=__webpack_require__(44);var SelectionLayerView=__webpack_require__(45);var EditingLayerView=__webpack_require__(46);var DatePickeLayerView=__webpack_require__(47);var FocusLayerView=__webpack_require__(48);var isOptionEnabled=__webpack_require__(8).isOptionEnabled;var frameConst=__webpack_require__(9).frame;var ViewFactory=tui.util.defineClass({init:function(options){this.domState=options.domState;this.modelManager=options.modelManager;this.painterManager=options.painterManager;this.componentHolder=options.componentHolder;this.footerOptions=options.footer;this.singleClickEdit=options.singleClickEdit;this.resizeHandle=options.resizeHandle;this.copyOption=options.copyOption;},createContainer:function(){return new ContainerView({el:this.domState.$el,singleClickEdit:this.singleClickEdit,dataModel:this.modelManager.dataModel,dimensionModel:this.modelManager.dimensionModel,focusModel:this.modelManager.focusModel,gridId:this.modelManager.gridId,viewFactory:this});},createContentArea:function(){return new ContentAreaView({dimensionModel:this.modelManager.dimensionModel,viewFactory:this});},createToolbar:function(){if(!this.modelManager.toolbarModel.isEnabled()){return null;}return new ToolbarView({gridId:this.modelManager.gridId,dimensionModel:this.modelManager.dimensionModel,toolbarModel:this.modelManager.toolbarModel});},createPagination:function(){if(!isOptionEnabled(this.componentHolder.getOptions("pagination"))){return null;}return new PaginationView({componentHolder:this.componentHolder,dimensionModel:this.modelManager.dimensionModel});},createHeightResizeHandle:function(){if(!isOptionEnabled(this.resizeHandle)){return null;}return new HeightResizeHandleView({dimensionModel:this.modelManager.dimensionModel});},createStateLayer:function(){return new StateLayerView({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel});},createClipboard:function(){return new ClipboardView({columnModel:this.modelManager.columnModel,dataModel:this.modelManager.dataModel,dimensionModel:this.modelManager.dimensionModel,selectionModel:this.modelManager.selectionModel,focusModel:this.modelManager.focusModel,renderModel:this.modelManager.renderModel,coordRowModel:this.modelManager.coordRowModel,coordConverterModel:this.modelManager.coordConverterModel,copyOption:this.copyOption});},createFrame:function(whichSide){var Constructor=whichSide===frameConst.L?LsideFrameView:RsideFrameView;return new Constructor({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel,viewFactory:this});},createHeader:function(whichSide){return new HeaderView({whichSide:whichSide,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,focusModel:this.modelManager.focusModel,selectionModel:this.modelManager.selectionModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,coordRowModel:this.modelManager.coordRowModel,coordColumnModel:this.modelManager.coordColumnModel,viewFactory:this});},createFooter:function(whichSide){var templateMap={};if(!this.footerOptions){return null;}_.each(this.footerOptions.columnContent,function(options,columnName){if(_.isFunction(options.template)){templateMap[columnName]=options.template;}});return new FooterView({whichSide:whichSide,columnModel:this.modelManager.columnModel,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,coordColumnModel:this.modelManager.coordColumnModel,summaryModel:this.modelManager.summaryModel,columnTemplateMap:templateMap});},createHeaderResizeHandler:function(whichSide){return new HeaderResizeHandlerView({whichSide:whichSide,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel,coordColumnModel:this.modelManager.coordColumnModel});},createBody:function(whichSide){return new BodyView({whichSide:whichSide,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,coordConverterModel:this.modelManager.coordConverterModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,selectionModel:this.modelManager.selectionModel,focusModel:this.modelManager.focusModel,viewFactory:this});},createBodyTable:function(whichSide){return new BodyTableView({whichSide:whichSide,dimensionModel:this.modelManager.dimensionModel,coordColumnModel:this.modelManager.coordColumnModel,renderModel:this.modelManager.renderModel,columnModel:this.modelManager.columnModel,painterManager:this.painterManager,viewFactory:this});},createRowList:function(options){return new RowListView({el:options.el,whichSide:options.whichSide,bodyTableView:options.bodyTableView,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,dimensionModel:this.modelManager.dimensionModel,selectionModel:this.modelManager.selectionModel,renderModel:this.modelManager.renderModel,focusModel:this.modelManager.focusModel,coordRowModel:this.modelManager.coordRowModel,painterManager:this.painterManager});},createSelectionLayer:function(whichSide){return new SelectionLayerView({whichSide:whichSide,selectionModel:this.modelManager.selectionModel,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel,coordRowModel:this.modelManager.coordRowModel,coordColumnModel:this.modelManager.coordColumnModel});},createEditingLayer:function(){return new EditingLayerView({renderModel:this.modelManager.renderModel,inputPainters:this.painterManager.getInputPainters(true),domState:this.domState});},createDatePickerLayer:function(){if(!tui.component||!tui.component.DatePicker||!tui.component.Calendar){return null;}return new DatePickeLayerView({columnModel:this.modelManager.columnModel,textPainter:this.painterManager.getInputPainters().text,domState:this.domState});},createFocusLayer:function(whichSide){return new FocusLayerView({whichSide:whichSide,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel,focusModel:this.modelManager.focusModel,coordRowModel:this.modelManager.coordRowModel,coordColumnModel:this.modelManager.coordColumnModel,coordConverterModel:this.modelManager.coordConverterModel});}});module.exports=ViewFactory;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var GridEvent=__webpack_require__(21);var attrNameConst=__webpack_require__(9).attrName;var classNameConst=__webpack_require__(14);var Container=View.extend({initialize:function(options){View.prototype.initialize.call(this);this.gridId=options.gridId;this.singleClickEdit=options.singleClickEdit;this.dimensionModel=options.dimensionModel;this.focusModel=options.focusModel;this.dataModel=options.dataModel;this.viewFactory=options.viewFactory;this._createChildViews();this.listenTo(this.dimensionModel,"setWidth",this._onSetWidth);$(window).on("resize.grid",$.proxy(this._onResizeWindow,this));this.__$el=this.$el.clone();},events:{click:"_onClick",dblclick:"_onDblClick",mousedown:"_onMouseDown",mouseover:"_onMouseOver",mouseout:"_onMouseOut",selectstart:"_preventDrag",dragstart:"_preventDrag"},_createChildViews:function(){var factory=this.viewFactory;this._addChildren([factory.createToolbar(),factory.createContentArea(),factory.createHeightResizeHandle(),factory.createPagination(),factory.createStateLayer(),factory.createEditingLayer(),factory.createDatePickerLayer(),factory.createClipboard()]);},_onResizeWindow:function(){this.dimensionModel.refreshLayout();},_preventDrag:function(){return false;},_onSetWidth:function(){this.$el.width(this.dimensionModel.get("width"));},_onClick:function(mouseEvent){var eventData=new GridEvent(mouseEvent);var $target=$(mouseEvent.target);var cellInfo;this.trigger("click",eventData);if(eventData.isStopped()){return;}if(this._isCellElement($target,true)){cellInfo=this._getCellInfoFromElement($target.closest("td"));if(!_.isNull(cellInfo.rowKey)&&this.singleClickEdit&&!$target.is("input, textarea")){this.focusModel.focusIn(cellInfo.rowKey,cellInfo.columnName);}this._triggerCellMouseEvent("clickCell",eventData,cellInfo);}},_onDblClick:function(mouseEvent){var eventData=new GridEvent(mouseEvent);var $target=$(mouseEvent.target);this.trigger("dblclick",eventData);if(eventData.isStopped()){return;}if(this._isCellElement($target,true)){this._triggerCellMouseEvent("dblclickCell",eventData,$target.closest("td"));if(eventData.rowKey===null&&!eventData.isStopped()){this.dataModel.append({},{focus:true});}}},_onMouseOver:function(mouseEvent){var $target=$(mouseEvent.target),eventData;if(this._isCellElement($target)){eventData=new GridEvent(mouseEvent);this._triggerCellMouseEvent("mouseoverCell",eventData,$target);}},_onMouseOut:function(mouseEvent){var $target=$(mouseEvent.target);var eventData;if(this._isCellElement($target)){eventData=new GridEvent(mouseEvent);this._triggerCellMouseEvent("mouseoutCell",eventData,$target);}},_triggerCellMouseEvent:function(eventName,eventData,cell){var cellInfo=cell;if(cell instanceof $){cellInfo=this._getCellInfoFromElement(cell);}_.extend(eventData,cellInfo);this.trigger(eventName,eventData);},_isCellElement:function($target,isIncludeChild){var $cell=isIncludeChild?$target.closest("td"):$target;return !!($cell.is("td")&&$cell.attr(attrNameConst.COLUMN_NAME));},_getCellInfoFromElement:function($cell){var rowKey=Number($cell.attr(attrNameConst.ROW_KEY));var columnName=$cell.attr(attrNameConst.COLUMN_NAME);if(isNaN(rowKey)){rowKey=null;}return{rowKey:rowKey,columnName:columnName,rowData:this.dataModel.getRowData(rowKey)};},_onMouseDown:function(mouseEvent){var $target=$(mouseEvent.target);var eventData=new GridEvent(mouseEvent);var focusModel=this.focusModel;this.trigger("mousedown",eventData);if(eventData.isStopped()){return;}if(!$target.is("input, a, button, select, textarea")){mouseEvent.preventDefault();$target[0].unselectable=true;focusModel.focusClipboard();}},render:function(){var childElements=this._renderChildren();this.$el.addClass(classNameConst.CONTAINER).attr(attrNameConst.GRID_ID,this.gridId).append(childElements);this._triggerChildrenAppended();this.trigger("rendered");return this;},destroy:function(){this.stopListening();$(window).off("resize.grid");this._destroyChildren();this.$el.replaceWith(this.__$el);this.$el=this.__$el=null;}});module.exports=Container;},function(module,exports,__webpack_require__){var View=__webpack_require__(2);var classNameConst=__webpack_require__(14);var frameConst=__webpack_require__(9).frame;var ContentArea;function borderDIV(className){return $("<div>").addClass(classNameConst.BORDER_LINE).addClass(className);}ContentArea=View.extend({initialize:function(options){View.prototype.initialize.call(this);this.viewFactory=options.viewFactory;this.dimensionModel=options.dimensionModel;this._addFrameViews();},className:classNameConst.CONTENT_AREA,_addFrameViews:function(){var factory=this.viewFactory;this._addChildren([factory.createFrame(frameConst.L),factory.createFrame(frameConst.R)]);},render:function(){var dimensionModel=this.dimensionModel;var scrollXHeight=dimensionModel.getScrollXHeight();var childElements=this._renderChildren().concat([borderDIV(classNameConst.BORDER_TOP),borderDIV(classNameConst.BORDER_LEFT),borderDIV(classNameConst.BORDER_RIGHT),borderDIV(classNameConst.BORDER_BOTTOM).css("bottom",scrollXHeight)]);if(!dimensionModel.get("scrollX")){this.$el.addClass(classNameConst.NO_SCROLL_X);}if(!dimensionModel.get("scrollY")){this.$el.addClass(classNameConst.NO_SCROLL_Y);}this.$el.append(childElements);return this;}});module.exports=ContentArea;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var classNameConst=__webpack_require__(14);var Toolbar=View.extend({initialize:function(options){this.setOwnProperties({gridId:options.gridId,toolbarModel:options.toolbarModel,dimensionModel:options.dimensionModel});this.on("appended",this._onAppended);this.listenTo(this.toolbarModel,"change:isExcelButtonVisible change:isExcelAllButtonVisible",this.render);},className:classNameConst.TOOLBAR,events:function(){var hash={};hash["click ."+classNameConst.BTN_EXCEL]="_onClickExcel";return hash;},templateExcelBtn:_.template('<a href="#" class="'+classNameConst.BTN_EXCEL+" "+classNameConst.BTN_TEXT+' <%=className%>"><span><em class="'+classNameConst.BTN_EXCEL_ICON+'"></em><%=text%></span></a>'),_onAppended:function(){this.dimensionModel.set("toolbarHeight",this.$el.outerHeight());},_onClickExcel:function(mouseEvent){var grid=tui.Grid.getInstanceById(this.gridId);var net=grid.getAddOn("Net");var $target;mouseEvent.preventDefault();if(net){$target=$(mouseEvent.target).closest("a");if($target.hasClass(classNameConst.BTN_EXCEL_PAGE)){net.download("excel");}else{if($target.hasClass(classNameConst.BTN_EXCEL_ALL)){net.download("excelAll");}}}},render:function(){var toolbarModel=this.toolbarModel;var $inner=$("<div>");if(toolbarModel.get("isExcelButtonVisible")){$inner.append(this.templateExcelBtn({className:classNameConst.BTN_EXCEL_PAGE,text:"엑셀 다운로드"}));}if(toolbarModel.get("isExcelAllButtonVisible")){$inner.append(this.templateExcelBtn({className:classNameConst.BTN_EXCEL_ALL,text:"전체 엑셀 다운로드"}));}this.$el.empty().append($inner);return this;}});module.exports=Toolbar;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var classNameConst=__webpack_require__(14);var HTML_BTNS='<a href="#" class="'+classNameConst.PAGINATION_PRE_END+'" title="First page">First</a><a href="#" class="'+classNameConst.PAGINATION_PRE+'" title="Previous page">Prev</a> <a href="#" class="'+classNameConst.PAGINATION_NEXT+'" title="Next page">Next</a><a href="#" class="'+classNameConst.PAGINATION_NEXT_END+'" title="Last page">Last</a><span class="'+classNameConst.PAGINATION_PRE_END_OFF+'">First Off</span><span class="'+classNameConst.PAGINATION_PRE_OFF+'">Prev Off</span><span class="'+classNameConst.PAGINATION_NEXT_OFF+'">Next Off</span><span class="'+classNameConst.PAGINATION_NEXT_END_OFF+'">Last Off</span>';var defaultOptions={classPrefix:classNameConst.PREFIX,itemCount:1,pagePerPageList:5,itemPerPage:10,isCenterAlign:true,moveUnit:"page"};var Pagination=View.extend({initialize:function(options){this.dimensionModel=options.dimensionModel;this.componentHolder=options.componentHolder;this.on("appended",this._onAppended);},className:classNameConst.PAGINATION,render:function(){this._destroyChildren();this.$el.empty().html(HTML_BTNS);this.componentHolder.setInstance("pagination",this._createComponent());return this;},_onAppended:function(){this.dimensionModel.set("paginationHeight",this.$el.outerHeight());},_createOptionObject:function(){var customOptions=this.componentHolder.getOptions("pagination");var btnOptions={$preOff:this.$el.find("."+classNameConst.PAGINATION_PRE_OFF),$pre_endOff:this.$el.find("."+classNameConst.PAGINATION_PRE_END_OFF),$nextOff:this.$el.find("."+classNameConst.PAGINATION_NEXT_OFF),$lastOff:this.$el.find("."+classNameConst.PAGINATION_NEXT_END_OFF)};if(customOptions===true){customOptions={};}return _.assign({},defaultOptions,btnOptions,customOptions);},_createComponent:function(){var ComponentClass=tui.util.pick(tui,"component","Pagination");if(!ComponentClass){throw new Error("Cannot find component 'tui.component.Pagination'");}return new ComponentClass(this._createOptionObject(),this.$el);}});module.exports=Pagination;},function(module,exports,__webpack_require__){var View=__webpack_require__(2);var classNameConst=__webpack_require__(14);var HTML_INNER='<a href="#"><span></span></a>';var HeightResizeHandle=View.extend({initialize:function(options){this.dimensionModel=options.dimensionModel;this.timeoutIdForResize=0;this.mouseOffsetY=0;this.on("appended",this._onAppended);},className:classNameConst.HEIGHT_RESIZE_HANDLE,events:{mousedown:"_onMouseDown"},_onAppended:function(){this.dimensionModel.set("resizeHandleHeight",this.$el.outerHeight());},_attachMouseEvent:function(){$(document).on("mousemove",$.proxy(this._onMouseMove,this));$(document).on("mouseup",$.proxy(this._onMouseUp,this));$(document).on("selectstart",$.proxy(this._onSelectStart,this));},_detachMouseEvent:function(){$(document).off("mousemove",$.proxy(this._onMouseMove,this));$(document).off("mouseup",$.proxy(this._onMouseUp,this));$(document).off("selectstart",$.proxy(this._onSelectStart,this));},_onMouseDown:function(mouseEvent){mouseEvent.preventDefault();$(document.body).css("cursor","row-resize");this.mouseOffsetY=mouseEvent.offsetY;this._attachMouseEvent();},_onMouseMove:function(mouseEvent){var dimensionModel=this.dimensionModel;var gridOffsetY=dimensionModel.get("offsetTop");var mouseOffsetY=this.mouseOffsetY;clearTimeout(this.timeoutIdForResize);this.timeoutIdForResize=setTimeout(function(){dimensionModel.setSize(null,mouseEvent.pageY-gridOffsetY-mouseOffsetY);},0);},_onMouseUp:function(){$(document.body).css("cursor","default");this._detachMouseEvent();},_onSelectStart:function(event){event.preventDefault();return false;},render:function(){this._destroyChildren();this.$el.html(HTML_INNER);return this;},destroy:function(){this.stopListening();this._onMouseUp();this._destroyChildren();this.remove();}});module.exports=HeightResizeHandle;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var stateConst=__webpack_require__(9).renderState;var classNameConst=__webpack_require__(14);var TABLE_BORDER_WIDTH=__webpack_require__(9).dimension.TABLE_BORDER_WIDTH;var MESSAGE_LOADING="요청을 처리 중입니다.";var MESSAGE_EMPTY="데이터가 존재하지 않습니다.";var StateLayer=View.extend({initialize:function(options){this.dimensionModel=options.dimensionModel;this.renderModel=options.renderModel;this.listenTo(this.dimensionModel,"change",this._refreshLayout);this.listenTo(this.renderModel,"change:state",this.render);},className:classNameConst.LAYER_STATE,template:_.template('<div class="'+classNameConst.LAYER_STATE_CONTENT+'">    <p><%= text %></p>    <% if (isLoading) { %>    <div class="'+classNameConst.LAYER_STATE_LOADING+'"></div>    <% } %></div>'),render:function(){var renderState=this.renderModel.get("state");if(renderState===stateConst.DONE){this.$el.hide();}else{this._showLayer(renderState);}return this;},_showLayer:function(renderState){var layerHtml=this.template({text:this._getMessage(renderState),isLoading:(renderState===stateConst.LOADING)});this.$el.html(layerHtml).show();this._refreshLayout();},_getMessage:function(renderState){switch(renderState){case stateConst.LOADING:return MESSAGE_LOADING;case stateConst.EMPTY:return(this.renderModel.get("emptyMessage")||MESSAGE_EMPTY);default:return null;}},_refreshLayout:function(){var dimensionModel=this.dimensionModel;var headerHeight=dimensionModel.get("headerHeight");var bodyHeight=dimensionModel.get("bodyHeight");var toolbarHeight=dimensionModel.get("toolbarHeight");var scrollXHeight=dimensionModel.getScrollXHeight();var scrollYWidth=dimensionModel.getScrollYWidth();this.$el.css({top:headerHeight+toolbarHeight-TABLE_BORDER_WIDTH,height:bodyHeight-scrollXHeight-TABLE_BORDER_WIDTH,left:0,right:scrollYWidth});}});StateLayer.MESSAGE_LOADING=MESSAGE_LOADING;StateLayer.MESSAGE_EMPTY=MESSAGE_EMPTY;module.exports=StateLayer;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var util=__webpack_require__(8);var classNameConst=__webpack_require__(14);var constMap=__webpack_require__(9);var keyCodeMap=constMap.keyCode;var selTypeConst=constMap.selectionType;var Clipboard=View.extend({initialize:function(options){this.setOwnProperties({dataModel:options.dataModel,columnModel:options.columnModel,focusModel:options.focusModel,selectionModel:options.selectionModel,dimensionModel:options.dimensionModel,coordRowModel:options.coordRowModel,coordConverterModel:options.coordConverterModel,renderModel:options.renderModel,useFormattedValue:!!tui.util.pick(options,"copyOption","useFormattedValue"),timeoutIdForKeyIn:0,isLocked:false});this.listenTo(this.focusModel,"focusClipboard",this._onFocusClipboard);},tagName:"textarea",className:classNameConst.CLIPBOARD,events:{keydown:"_onKeyDown",blur:"_onBlur"},_onBlur:function(){var focusModel=this.focusModel;setTimeout(function(){focusModel.refreshState();},0);},_hasFocus:function(){return this.$el.is(":focus");},_onFocusClipboard:function(){try{if(!this._hasFocus()){this.$el.focus();if(!this._hasFocus()){this.$el.focus();}this.focusModel.refreshState();}}catch(e){}},render:function(){return this;},_lock:function(){clearTimeout(this.timeoutIdForKeyIn);this.isLocked=true;this.timeoutIdForKeyIn=setTimeout($.proxy(this._unlock,this),10);},_unlock:function(){this.isLocked=false;},_onKeyDown:function(keyDownEvent){if(this.isLocked){keyDownEvent.preventDefault();return;}if(keyDownEvent.shiftKey&&(keyDownEvent.ctrlKey||keyDownEvent.metaKey)){this._keyInWithShiftAndCtrl(keyDownEvent);}else{if(keyDownEvent.shiftKey){this._keyInWithShift(keyDownEvent);}else{if(keyDownEvent.ctrlKey||keyDownEvent.metaKey){this._keyInWithCtrl(keyDownEvent);}else{this._keyIn(keyDownEvent);}}}this._lock();},_keyIn:function(keyDownEvent){var focusModel=this.focusModel;var selectionModel=this.selectionModel;var focused=focusModel.which();var rowKey=focused.rowKey;var columnName=focused.columnName;var rowIdx=this.dataModel.indexOfRowKey(rowKey);var columnIdx=this.columnModel.indexOfColumnName(columnName,true);var isKeyIdentified=true;var keyCode=keyDownEvent.keyCode||keyDownEvent.which;var address;if(util.isBlank(focused.rowKey)){return;}switch(keyCode){case keyCodeMap.UP_ARROW:focusModel.focus(focusModel.prevRowKey(),columnName,true);break;case keyCodeMap.DOWN_ARROW:focusModel.focus(focusModel.nextRowKey(),columnName,true);break;case keyCodeMap.LEFT_ARROW:focusModel.focus(rowKey,focusModel.prevColumnName(),true);break;case keyCodeMap.RIGHT_ARROW:focusModel.focus(rowKey,focusModel.nextColumnName(),true);break;case keyCodeMap.PAGE_UP:focusModel.focusAt(this._getPageMovedRowIndex(rowIdx,false),columnIdx,true);break;case keyCodeMap.PAGE_DOWN:focusModel.focusAt(this._getPageMovedRowIndex(rowIdx,true),columnIdx,true);break;case keyCodeMap.HOME:focusModel.focus(rowKey,focusModel.firstColumnName(),true);break;case keyCodeMap.END:focusModel.focus(rowKey,focusModel.lastColumnName(),true);break;case keyCodeMap.SPACE:case keyCodeMap.ENTER:this._onEnterSpace(rowKey,columnName);break;case keyCodeMap.DEL:this._del(rowKey,columnName);break;case keyCodeMap.TAB:address=focusModel.nextAddress();focusModel.focusIn(address.rowKey,address.columnName,true);break;default:isKeyIdentified=false;break;}if(isKeyIdentified){keyDownEvent.preventDefault();}selectionModel.end();},_onEnterSpace:function(rowKey,columnName){this.focusModel.focusIn(rowKey,columnName);},_getIndexBeforeMove:function(){var focusedIndex=this.focusModel.indexOf();var selectionRange=this.selectionModel.get("range");var index=_.extend({},focusedIndex);var selectionRowRange,selectionColumnRange;if(selectionRange){selectionRowRange=selectionRange.row;selectionColumnRange=selectionRange.column;index.row=selectionRowRange[0];index.column=selectionColumnRange[0];if(selectionRowRange[1]>focusedIndex.row){index.row=selectionRowRange[1];}if(selectionColumnRange[1]>focusedIndex.column){index.column=selectionColumnRange[1];}}return index;},_getPageMovedRowIndex:function(rowIdx,isDownDir){var curOffset=this.coordRowModel.getOffsetAt(rowIdx);var distance=this.dimensionModel.get("bodyHeight");var movedIdx;if(!isDownDir){distance=-distance;}movedIdx=this.coordRowModel.indexOf(curOffset+distance);return util.clamp(movedIdx,0,this.dataModel.length-1);},_keyInWithShift:function(keyDownEvent){var focusModel=this.focusModel;var columnModelList=this.columnModel.getVisibleColumnModelList();var coordConverterModel=this.coordConverterModel;var keyCode=keyDownEvent.keyCode||keyDownEvent.which;var index=this._getIndexBeforeMove();var isKeyIdentified=true;var isSelection=true;var columnModel,scrollPosition,isValid,selectionType,address;switch(keyCode){case keyCodeMap.UP_ARROW:index.row-=1;break;case keyCodeMap.DOWN_ARROW:index.row+=1;break;case keyCodeMap.LEFT_ARROW:index.column-=1;break;case keyCodeMap.RIGHT_ARROW:index.column+=1;break;case keyCodeMap.PAGE_UP:index.row=this._getPageMovedRowIndex(index.row,false);break;case keyCodeMap.PAGE_DOWN:index.row=this._getPageMovedRowIndex(index.row,true);break;case keyCodeMap.HOME:index.column=0;break;case keyCodeMap.END:index.column=columnModelList.length-1;break;case keyCodeMap.ENTER:isSelection=false;break;case keyCodeMap.TAB:isSelection=false;address=focusModel.prevAddress();focusModel.focusIn(address.rowKey,address.columnName,true);break;default:isSelection=false;isKeyIdentified=false;break;}columnModel=columnModelList[index.column];isValid=!!(columnModel&&this.dataModel.getRowData(index.row));if(isSelection&&isValid){this._updateSelectionByKeyIn(index.row,index.column);scrollPosition=coordConverterModel.getScrollPosition(index.row,columnModel.columnName);if(scrollPosition){selectionType=this.selectionModel.getType();if(selectionType===selTypeConst.COLUMN){delete scrollPosition.scrollTop;}else{if(selectionType===selTypeConst.ROW){delete scrollPosition.scrollLeft;}}this.renderModel.set(scrollPosition);}}if(isKeyIdentified){keyDownEvent.preventDefault();}},_keyInWithCtrl:function(keyDownEvent){var focusModel=this.focusModel;var keyCode=keyDownEvent.keyCode||keyDownEvent.which;switch(keyCode){case keyCodeMap.CHAR_A:this.selectionModel.selectAll();break;case keyCodeMap.CHAR_C:this._copyToClipboard();break;case keyCodeMap.HOME:focusModel.focus(focusModel.firstRowKey(),focusModel.firstColumnName(),true);break;case keyCodeMap.END:focusModel.focus(focusModel.lastRowKey(),focusModel.lastColumnName(),true);break;case keyCodeMap.CHAR_V:this._pasteWhenKeyupCharV();break;default:break;}},_pasteWhenKeyupCharV:function(){var self=this;this._clearClipBoard();if(this.pasting){return;}this.pasting=true;this.$el.on("keyup",function(){self._pasteToGrid();self.pasting=false;});},_clearClipBoard:function(){this.$el.val("");},_pasteToGrid:function(){var selectionModel=this.selectionModel;var focusModel=this.focusModel;var dataModel=this.dataModel;var selRange,selRowLen,selColLen;var startIdx,data;data=this._getProcessClipBoardData();if(selectionModel.hasSelection()){selRange=selectionModel.get("range");selRowLen=selRange.row[1]-selRange.row[0]+1;selColLen=selRange.column[1]-selRange.column[0]+1;data=this._duplicateData(data,selRowLen,selColLen);startIdx=selectionModel.getStartIndex();}else{startIdx=focusModel.indexOf();}this.$el.off("keyup");dataModel.paste(data,startIdx);},_duplicateData:function(data,selRowLen,selColLen){var dataRowLen=data.length;var dataColLen=data[0].length;var rowDupCount=Math.floor(selRowLen/dataRowLen)-1;var colDupCount=Math.floor(selColLen/dataColLen)-1;var result=$.extend(true,[],data);_.times(rowDupCount,function(){_.forEach(data,function(row){result.push(row.slice(0));});});_.forEach(result,function(row){var rowData=row.slice(0);_.times(colDupCount,function(){[].push.apply(row,rowData);});});return result;},_getProcessClipBoardData:function(){var text=this.$el.val();var result=text.split("\n");var i=0;var len=result.length;for(;i<len;i+=1){result[i]=result[i].split("\t");}return result;},_keyInWithShiftAndCtrl:function(keyDownEvent){var isKeyIdentified=true;var columnModelList=this.columnModel.getVisibleColumnModelList();var keyCode=keyDownEvent.keyCode||keyDownEvent.which;switch(keyCode){case keyCodeMap.HOME:this._updateSelectionByKeyIn(0,0);break;case keyCodeMap.END:this._updateSelectionByKeyIn(this.dataModel.length-1,columnModelList.length-1);break;default:isKeyIdentified=false;break;}if(isKeyIdentified){keyDownEvent.preventDefault();}},_del:function(){var selectionModel=this.selectionModel;var dataModel=this.dataModel;var focused=this.focusModel.which();var rowKey=focused.rowKey;var columnName=focused.columnName;if(selectionModel.hasSelection()){dataModel.delRange(selectionModel.get("range"));}else{dataModel.del(rowKey,columnName);}},_updateSelectionByKeyIn:function(rowIndex,columnIndex){var selectionModel=this.selectionModel;selectionModel.update(rowIndex,columnIndex);},_getClipboardString:function(){var selectionModel=this.selectionModel;var focused=this.focusModel.which();var text;if(selectionModel.hasSelection()){text=this.selectionModel.getValuesToString(this.useFormattedValue);}else{if(this.useFormattedValue){text=this.renderModel.getCellData(focused.rowKey,focused.columnName).formattedValue;}else{text=this.dataModel.get(focused.rowKey).getValueString(focused.columnName);}}return text;},_copyToClipboard:function(){var text=this._getClipboardString();if(window.clipboardData){window.clipboardData.setData("Text",text);}else{this.$el.val(text).select();}}});module.exports=Clipboard;},function(module,exports,__webpack_require__){var Frame=__webpack_require__(37);var classNameConst=__webpack_require__(14);var frameConst=__webpack_require__(9).frame;var LsideFrame=Frame.extend({initialize:function(){Frame.prototype.initialize.apply(this,arguments);this.setOwnProperties({whichSide:frameConst.L});this.listenTo(this.dimensionModel,"change:lsideWidth",this._onFrameWidthChanged);},className:classNameConst.LSIDE_AREA,_onFrameWidthChanged:function(){this.$el.css({width:this.dimensionModel.get("lsideWidth")});},beforeRender:function(){this.$el.css({display:"block",width:this.dimensionModel.get("lsideWidth")});},afterRender:function(){if(!this.dimensionModel.get("scrollX")){return;}this.$el.append($("<div>").addClass(classNameConst.SCROLLBAR_LEFT_BOTTOM));}});module.exports=LsideFrame;},function(module,exports,__webpack_require__){var View=__webpack_require__(2);var frameConst=__webpack_require__(9).frame;var Frame=View.extend({initialize:function(options){View.prototype.initialize.call(this);this.setOwnProperties({viewFactory:options.viewFactory,renderModel:options.renderModel,dimensionModel:options.dimensionModel,whichSide:options.whichSide||frameConst.R});this.listenTo(this.renderModel,"columnModelChanged",this.render);},render:function(){var factory=this.viewFactory;this.$el.empty();this._destroyChildren();this.beforeRender();this._addChildren([factory.createHeader(this.whichSide),factory.createBody(this.whichSide),factory.createFooter(this.whichSide)]);this.$el.append(this._renderChildren());this.afterRender();return this;},beforeRender:function(){},afterRender:function(){}});module.exports=Frame;},function(module,exports,__webpack_require__){var Frame=__webpack_require__(37);var classNameConst=__webpack_require__(14);var constMap=__webpack_require__(9);var frameConst=constMap.frame;var CELL_BORDER_WIDTH=constMap.dimension.CELL_BORDER_WIDTH;var RsideFrame=Frame.extend({initialize:function(){Frame.prototype.initialize.apply(this,arguments);this.setOwnProperties({whichSide:frameConst.R,$scrollBorder:null});this.listenTo(this.dimensionModel,"change:lsideWidth change:rsideWidth",this._onFrameWidthChanged);this.listenTo(this.dimensionModel,"change:bodyHeight change:headerHeight",this._resetScrollBorderHeight);},className:classNameConst.RSIDE_AREA,_onFrameWidthChanged:function(){this._refreshLayout();},_refreshLayout:function(){var dimensionModel=this.dimensionModel;var width=dimensionModel.get("rsideWidth");var marginLeft=dimensionModel.get("lsideWidth");if(marginLeft>0&&!dimensionModel.isDivisionBorderDoubled()){width+=CELL_BORDER_WIDTH;marginLeft-=CELL_BORDER_WIDTH;}this.$el.css({width:width,marginLeft:marginLeft});},_resetScrollBorderHeight:function(){var dimensionModel,height;if(this.$scrollBorder){dimensionModel=this.dimensionModel;height=dimensionModel.get("bodyHeight")-dimensionModel.getScrollXHeight();this.$scrollBorder.height(height);}},beforeRender:function(){this.$el.css("display","block");this._refreshLayout();},afterRender:function(){var dimensionModel=this.dimensionModel;var headerHeight,footerHeight;var $space,$scrollBorder;if(!dimensionModel.get("scrollY")){return;}headerHeight=dimensionModel.get("headerHeight");footerHeight=dimensionModel.get("footerHeight");$space=$("<div />").addClass(classNameConst.SCROLLBAR_HEAD);$scrollBorder=$("<div />").addClass(classNameConst.SCROLLBAR_BORDER);$space.height(headerHeight-2);$scrollBorder.css("top",headerHeight+"px");this.$el.append($space,$scrollBorder);if(dimensionModel.get("scrollX")){this.$el.append($("<div>").addClass(classNameConst.SCROLLBAR_RIGHT_BOTTOM));}if(footerHeight&&dimensionModel.get("scrollY")){this.$el.append($("<div>").addClass(classNameConst.FOOT_AREA_RIGHT).css("height",footerHeight-CELL_BORDER_WIDTH));}this.$scrollBorder=$scrollBorder;this._resetScrollBorderHeight();}});module.exports=RsideFrame;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var util=__webpack_require__(8);var constMap=__webpack_require__(9);var classNameConst=__webpack_require__(14);var frameConst=constMap.frame;var DELAY_SYNC_CHECK=10;var keyCodeMap=constMap.keyCode;var SEL_TYPE_COLUMN=constMap.selectionType.COLUMN;var ATTR_COLUMN_NAME=constMap.attrName.COLUMN_NAME;var CELL_BORDER_WIDTH=constMap.dimension.CELL_BORDER_WIDTH;var TABLE_BORDER_WIDTH=constMap.dimension.TABLE_BORDER_WIDTH;var Header=View.extend({initialize:function(options){View.prototype.initialize.call(this);this.setOwnProperties({renderModel:options.renderModel,coordColumnModel:options.coordColumnModel,dimensionModel:options.dimensionModel,selectionModel:options.selectionModel,focusModel:options.focusModel,columnModel:options.columnModel,dataModel:options.dataModel,viewFactory:options.viewFactory,coordRowModel:options.coordRowModel,whichSide:options.whichSide||frameConst.R});this.listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange).listenTo(this.coordColumnModel,"columnWidthChanged",this._onColumnWidthChanged).listenTo(this.selectionModel,"change:range",this._refreshSelectedHeaders).listenTo(this.focusModel,"change:columnName",this._refreshSelectedHeaders).listenTo(this.dataModel,"sortChanged",this._updateBtnSortState);if(this.whichSide===frameConst.L&&this.columnModel.get("selectType")==="checkbox"){this.listenTo(this.dataModel,"change:_button disabledChanged extraDataChanged add remove reset",_.debounce(_.bind(this._syncCheckedState,this),DELAY_SYNC_CHECK));}},className:classNameConst.HEAD_AREA,events:{click:"_onClick","keydown input":"_onKeydown","mousedown th":"_onMouseDown"},template:_.template('<table class="'+classNameConst.TABLE+'"><colgroup><%=colGroup%></colgroup><tbody><%=tBody%></tbody></table>'),templateHeader:_.template('<th <%=attrColumnName%>="<%=columnName%>" class="<%=className%>" height="<%=height%>" <%if(colspan > 0) {%>colspan=<%=colspan%> <%}%><%if(rowspan > 0) {%>rowspan=<%=rowspan%> <%}%>><%=title%><%=btnSort%></th>'),templateCol:_.template('<col <%=attrColumnName%>="<%=columnName%>" style="width:<%=width%>px">'),markupBtnSort:'<a class="'+classNameConst.BTN_SORT+'"></a>',_getColGroupMarkup:function(){var columnData=this._getColumnData();var columnWidthList=columnData.widthList;var columnModelList=columnData.modelList;var htmlList=[];_.each(columnWidthList,function(width,index){htmlList.push(this.templateCol({attrColumnName:ATTR_COLUMN_NAME,columnName:columnModelList[index].columnName,width:width+CELL_BORDER_WIDTH}));},this);return htmlList.join("");},_getSelectedColumnNames:function(){var columnRange=this.selectionModel.get("range").column,visibleColumns=this.columnModel.getVisibleColumnModelList(),selectedColumns=visibleColumns.slice(columnRange[0],columnRange[1]+1);return _.pluck(selectedColumns,"columnName");},_getContainingMergedColumnNames:function(columnNames){var columnModel=this.columnModel,mergedColumnNames=_.pluck(columnModel.get("columnMerge"),"columnName");return _.filter(mergedColumnNames,function(mergedColumnName){var unitColumnNames=columnModel.getUnitColumnNamesIfMerged(mergedColumnName);return _.every(unitColumnNames,function(name){return _.contains(columnNames,name);});});},_refreshSelectedHeaders:function(){var $ths=this.$el.find("th"),columnNames,mergedColumnNames;if(this.selectionModel.hasSelection()){columnNames=this._getSelectedColumnNames();}else{if(this.focusModel.has(true)){columnNames=[this.focusModel.get("columnName")];}}$ths.removeClass(classNameConst.CELL_SELECTED);if(columnNames){mergedColumnNames=this._getContainingMergedColumnNames(columnNames);_.each(columnNames.concat(mergedColumnNames),function(columnName){$ths.filter("["+ATTR_COLUMN_NAME+'="'+columnName+'"]').addClass(classNameConst.CELL_SELECTED);});}},_onKeydown:function(event){if(event.keyCode===keyCodeMap.TAB){event.preventDefault();this.focusModel.focusClipboard();}},_onMouseDown:function(event){var columnName,columnNames;if(!this.selectionModel.isEnabled()||$(event.target).is("a."+classNameConst.BTN_SORT)){return;}columnName=$(event.target).closest("th").attr(ATTR_COLUMN_NAME);if(!columnName){return;}columnNames=this.columnModel.getUnitColumnNamesIfMerged(columnName);if(!this._hasMetaColumn(columnNames)){this._controlStartAction(columnNames,event.pageX,event.pageY,event.shiftKey);}},_controlStartAction:function(columnNames,pageX,pageY,shiftKey){var columnModel=this.columnModel,columnIndexes=_.map(columnNames,function(name){return columnModel.indexOfColumnName(name,true);});if(shiftKey){this._startColumnSelectionWithShiftKey(columnIndexes,pageX,pageY);}else{this._startColumnSelectionWithoutShiftKey(columnIndexes);}this._attachDragEvents();},_startColumnSelectionWithShiftKey:function(columnIndexes,pageX,pageY){var selectionModel=this.selectionModel;var max=Math.max.apply(null,columnIndexes);selectionModel.update(0,max,SEL_TYPE_COLUMN);selectionModel.extendColumnSelection(columnIndexes,pageX,pageY);},_startColumnSelectionWithoutShiftKey:function(columnIndexes){var selectionModel=this.selectionModel;var minMax=util.getMinMax(columnIndexes);var min=minMax.min;var max=minMax.max;selectionModel.setMinimumColumnRange([min,max]);selectionModel.selectColumn(min);selectionModel.update(0,max);},_attachDragEvents:function(){$(document).on("mousemove",$.proxy(this._onMouseMove,this)).on("mouseup",$.proxy(this._detachDragEvents,this)).on("selectstart",$.proxy(this._onSelectStart,this));},_detachDragEvents:function(){this.selectionModel.stopAutoScroll();$(document).off("mousemove",this._onMouseMove).off("mouseup",this._detachDragEvents).off("selectstart",this._onSelectStart);},_onMouseMove:function(event){var columnModel=this.columnModel;var isExtending=true;var columnName=$(event.target).closest("th").attr(ATTR_COLUMN_NAME);var columnNames,columnIndexes;if(columnName){columnNames=columnModel.getUnitColumnNamesIfMerged(columnName);columnIndexes=_.map(columnNames,function(name){return columnModel.indexOfColumnName(name,true);});}else{if($.contains(this.el,event.target)){isExtending=false;}}if(isExtending){this.selectionModel.extendColumnSelection(columnIndexes,event.pageX,event.pageY);}},_hasMetaColumn:function(columnNames){return _.some(columnNames,function(name){return util.isMetaColumn(name);});},_onSelectStart:function(event){event.preventDefault();return false;},_getHeaderMainCheckbox:function(){return this.$el.find("th["+ATTR_COLUMN_NAME+'="_button"] input');},_syncCheckedState:function(){var checkedState=this.dataModel.getCheckedState();var $input,props;$input=this._getHeaderMainCheckbox();if(!$input.length){return;}if(!checkedState.available){props={checked:false,disabled:true};}else{props={checked:checkedState.available===checkedState.checked,disabled:false};}$input.prop(props);},_onColumnWidthChanged:function(){var columnWidthList=this.coordColumnModel.getColumnWidthList(this.whichSide);var $colList=this.$el.find("col");var coordRowModel=this.coordRowModel;_.each(columnWidthList,function(columnWidth,index){$colList.eq(index).css("width",columnWidth+CELL_BORDER_WIDTH);});if(this.whichSide===frameConst.R){_.defer(function(){coordRowModel.syncWithDom();});}},_onScrollLeftChange:function(model,value){if(this.whichSide===frameConst.R){this.el.scrollLeft=value;}},_onClick:function(clickEvent){var $target=$(clickEvent.target);var columnName=$target.closest("th").attr(ATTR_COLUMN_NAME);if(columnName==="_button"&&$target.is("input")){if($target.prop("checked")){this.dataModel.checkAll();}else{this.dataModel.uncheckAll();}}else{if($target.is("a."+classNameConst.BTN_SORT)){this.dataModel.sortByField(columnName);}}},_updateBtnSortState:function(sortOptions){if(this._$currentSortBtn){this._$currentSortBtn.removeClass(classNameConst.BTN_SORT_DOWN+" "+classNameConst.BTN_SORT_UP);}this._$currentSortBtn=this.$el.find("th["+ATTR_COLUMN_NAME+'="'+sortOptions.columnName+'"] a.'+classNameConst.BTN_SORT);this._$currentSortBtn.addClass(sortOptions.isAscending?classNameConst.BTN_SORT_UP:classNameConst.BTN_SORT_DOWN);},render:function(){this._destroyChildren();this.$el.css({height:this.dimensionModel.get("headerHeight")-TABLE_BORDER_WIDTH}).html(this.template({colGroup:this._getColGroupMarkup(),tBody:this._getTableBodyMarkup()}));this._addChildren(this.viewFactory.createHeaderResizeHandler(this.whichSide));this.$el.append(this._renderChildren());return this;},_getColumnData:function(){var columnWidthList=this.coordColumnModel.getColumnWidthList(this.whichSide);var columnModelList=this.columnModel.getVisibleColumnModelList(this.whichSide,true);return{widthList:columnWidthList,modelList:columnModelList};},_getTableBodyMarkup:function(){var hierarchyList=this._getColumnHierarchyList();var maxRowCount=this._getHierarchyMaxRowCount(hierarchyList);var headerHeight=this.dimensionModel.get("headerHeight");var rowMarkupList=new Array(maxRowCount);var columnNameList=new Array(maxRowCount);var colSpanList=[];var rowHeight=util.getRowHeight(maxRowCount,headerHeight)-1;var rowSpan=1;var height;var headerMarkupList;_.each(hierarchyList,function(hierarchy,i){var length=hierarchyList[i].length;var curHeight=0;_.each(hierarchy,function(columnModel,j){var columnName=columnModel.columnName;var classNames=[classNameConst.CELL,classNameConst.CELL_HEAD];if(columnModel.isRequired){classNames.push(classNameConst.CELL_REQRUIRED);}rowSpan=(length-1===j&&(maxRowCount-length+1)>1)?(maxRowCount-length+1):1;height=rowHeight*rowSpan;if(j===length-1){height=(headerHeight-curHeight)-2;}else{curHeight+=height+1;}if(columnNameList[j]===columnName){rowMarkupList[j].pop();colSpanList[j]+=1;}else{colSpanList[j]=1;}columnNameList[j]=columnName;rowMarkupList[j]=rowMarkupList[j]||[];rowMarkupList[j].push(this.templateHeader({attrColumnName:ATTR_COLUMN_NAME,columnName:columnName,className:classNames.join(" "),height:height,colspan:colSpanList[j],rowspan:rowSpan,title:columnModel.title,btnSort:columnModel.isSortable?this.markupBtnSort:""}));},this);},this);headerMarkupList=_.map(rowMarkupList,function(rowMarkup){return"<tr>"+rowMarkup.join("")+"</tr>";});return headerMarkupList.join("");},_getHierarchyMaxRowCount:function(hierarchyList){var lengthList=[0];_.each(hierarchyList,function(hierarchy){lengthList.push(hierarchy.length);},this);return Math.max.apply(Math,lengthList);},_getColumnHierarchyList:function(){var columnModelList=this._getColumnData().modelList,hierarchyList;hierarchyList=_.map(columnModelList,function(columnModel){return this._getColumnHierarchy(columnModel).reverse();},this);return hierarchyList;},_getColumnHierarchy:function(columnModel,resultList){var columnMergeList=this.columnModel.get("columnMerge");resultList=resultList||[];if(columnModel){resultList.push(columnModel);if(columnMergeList){_.each(columnMergeList,function(columnMerge){if($.inArray(columnModel.columnName,columnMerge.columnNameList)!==-1){this._getColumnHierarchy(columnMerge,resultList);}},this);}}return resultList;}});Header.DELAY_SYNC_CHECK=DELAY_SYNC_CHECK;module.exports=Header;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var constMap=__webpack_require__(9);var classNameConst=__webpack_require__(14);var attrNameConst=constMap.attrName;var frameConst=constMap.frame;var CELL_BORDER_WIDTH=constMap.dimension.CELL_BORDER_WIDTH;var RESIZE_HANDLE_WIDTH=constMap.dimension.RESIZE_HANDLE_WIDTH;var ResizeHandler=View.extend({initialize:function(options){this.setOwnProperties({dimensionModel:options.dimensionModel,columnModel:options.columnModel,coordColumnModel:options.coordColumnModel,whichSide:options.whichSide||frameConst.R,isResizing:false,$target:null,differenceLeft:0,initialWidth:0,initialOffsetLeft:0,initialLeft:0});this.listenTo(this.coordColumnModel,"columnWidthChanged",this._refreshHandlerPosition);},className:classNameConst.COLUMN_RESIZE_CONTAINER,events:function(){var eventHash={};eventHash["mousedown ."+classNameConst.COLUMN_RESIZE_HANDLE]="_onMouseDown";eventHash["dblclick ."+classNameConst.COLUMN_RESIZE_HANDLE]="_onDblClick";return eventHash;},template:_.template("<div "+attrNameConst.COLUMN_INDEX+'="<%=columnIndex%>" '+attrNameConst.COLUMN_NAME+'="<%=columnName%>" class="'+classNameConst.COLUMN_RESIZE_HANDLE+' <%=lastClass%>" style="<%=height%>" title="마우스 드래그를 통해 컬럼의 넓이를 변경할 수 있고,더블클릭을 통해 넓이를 초기화할 수 있습니다."></div>'),_getColumnData:function(){var columnWidthList=this.coordColumnModel.getColumnWidthList(this.whichSide);var columnModelList=this.columnModel.getVisibleColumnModelList(this.whichSide,true);return{widthList:columnWidthList,modelList:columnModelList};},_getResizeHandlerMarkup:function(){var columnData=this._getColumnData();var columnModelList=columnData.modelList;var headerHeight=this.dimensionModel.get("headerHeight");var length=columnModelList.length;var resizeHandleMarkupList=_.map(columnModelList,function(columnModel,index){return this.template({lastClass:(index+1===length)?classNameConst.COLUMN_RESIZE_HANDLE_LAST:"",columnIndex:index,columnName:columnModel.columnName,height:headerHeight});},this);return resizeHandleMarkupList.join("");},render:function(){var headerHeight=this.dimensionModel.get("headerHeight"),htmlStr=this._getResizeHandlerMarkup();this.$el.empty().html(htmlStr).css({marginTop:-headerHeight,height:headerHeight,display:"block"});this._refreshHandlerPosition();return this;},_refreshHandlerPosition:function(){var columnData=this._getColumnData();var columnWidthList=columnData.widthList;var $resizeHandleList=this.$el.find("."+classNameConst.COLUMN_RESIZE_HANDLE);var handlerWidthHalf=Math.floor(RESIZE_HANDLE_WIDTH/2);var curPos=0;tui.util.forEachArray($resizeHandleList,function(item,index){var $handler=$resizeHandleList.eq(index);curPos+=columnWidthList[index]+CELL_BORDER_WIDTH;$handler.css("left",curPos-handlerWidthHalf);});},_isResizing:function(){return !!this.isResizing;},_onMouseDown:function(mouseEvent){this._startResizing($(mouseEvent.target));},_onDblClick:function(mouseEvent){var $target=$(mouseEvent.target);var index=parseInt($target.attr(attrNameConst.COLUMN_INDEX),10);this.coordColumnModel.restoreColumnWidth(this._getHandlerColumnIndex(index));this._refreshHandlerPosition();},_onMouseUp:function(){this._stopResizing();},_onMouseMove:function(mouseEvent){var width,index;if(this._isResizing()){mouseEvent.preventDefault();width=this._calculateWidth(mouseEvent.pageX);index=parseInt(this.$target.attr(attrNameConst.COLUMN_INDEX),10);this.coordColumnModel.setColumnWidth(this._getHandlerColumnIndex(index),width);this._refreshHandlerPosition();}},_calculateWidth:function(pageX){var difference=pageX-this.initialOffsetLeft-this.initialLeft;return this.initialWidth+difference;},_getHandlerColumnIndex:function(index){return(this.whichSide===frameConst.R)?(index+this.columnModel.getVisibleColumnFixCount(true)):index;},_startResizing:function($target){var columnData=this._getColumnData();var columnWidthList=columnData.widthList;this.isResizing=true;this.$target=$target;this.initialLeft=parseInt($target.css("left").replace("px",""),10);this.initialOffsetLeft=this.$el.offset().left;this.initialWidth=columnWidthList[$target.attr(attrNameConst.COLUMN_INDEX)];$("body").css("cursor","col-resize");$(document).on("mousemove",$.proxy(this._onMouseMove,this)).on("mouseup",$.proxy(this._onMouseUp,this));if($target[0].setCapture){$target[0].setCapture();}},_stopResizing:function(){if(this.$target&&this.$target[0].releaseCapture){this.$target[0].releaseCapture();}this.isResizing=false;this.$target=null;this.initialLeft=0;this.initialOffsetLeft=0;this.initialWidth=0;$("body").css("cursor","default");$(document).unbind("mousemove",$.proxy(this._onMouseMove,this)).unbind("mouseup",$.proxy(this._onMouseUp,this));},destroy:function(){this.stopListening();this._stopResizing();this.remove();}});module.exports=ResizeHandler;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var util=__webpack_require__(8);var constMap=__webpack_require__(9);var classNameConst=__webpack_require__(14);var attrNameConst=constMap.attrName;var selTypeConst=constMap.selectionType;var frameConst=constMap.frame;var MIN_INTERVAL_FOR_PAUSED=200;var MIN_DISATNCE_FOR_DRAG=10;var Body=View.extend({initialize:function(options){View.prototype.initialize.call(this);this.setOwnProperties({dimensionModel:options.dimensionModel,dataModel:options.dataModel,columnModel:options.columnModel,renderModel:options.renderModel,coordConverterModel:options.coordConverterModel,selectionModel:options.selectionModel,focusModel:options.focusModel,viewFactory:options.viewFactory,$container:null,whichSide:options&&options.whichSide||frameConst.R});this.listenTo(this.dimensionModel,"change:bodyHeight",this._onBodyHeightChange).listenTo(this.dimensionModel,"change:totalRowHeight",this._resetContainerHeight).listenTo(this.renderModel,"change:scrollTop",this._onScrollTopChange).listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange);},className:classNameConst.BODY_AREA,events:function(){var hash={};hash.scroll="_onScroll";hash["mousedown ."+classNameConst.BODY_CONTAINER]="_onMouseDown";return hash;},_onBodyHeightChange:function(model,value){this.$el.css("height",value+"px");},_resetContainerHeight:function(){this.$container.css({height:this.dimensionModel.get("totalRowHeight")});},_onScroll:function(event){var attrs={scrollTop:event.target.scrollTop};if(this.whichSide===frameConst.R){attrs.scrollLeft=event.target.scrollLeft;}this.renderModel.set(attrs);},_onScrollLeftChange:function(model,value){if(this.whichSide===frameConst.R){this.el.scrollLeft=value;}},_onScrollTopChange:function(model,value){this.el.scrollTop=value;},_getColumnNameByVisibleIndex:function(columnIndex){var columns=this.columnModel.getVisibleColumnModelList(null,false);return columns[columnIndex].columnName;},_onMouseDown:function(event){var columnModel=this.columnModel;var $target=$(event.target);var $td=$target.closest("td");var $tr=$target.closest("tr");var columnName=$td.attr(attrNameConst.COLUMN_NAME);var rowKey=$tr.attr(attrNameConst.ROW_KEY);var startAction=true;var inputData=_.pick(event,"pageX","pageY","shiftKey");var indexData;if(!$td.length){indexData=this.coordConverterModel.getIndexFromMousePosition(event.pageX,event.pageY);columnName=this._getColumnNameByVisibleIndex(indexData.column);}else{if(rowKey&&columnName){indexData={column:columnModel.indexOfColumnName(columnName,true),row:this.dataModel.indexOfRowKey(rowKey)};if(this.columnModel.get("selectType")==="radio"){this.dataModel.check(rowKey);}}else{startAction=false;}}if(startAction){this._controlStartAction(inputData,indexData,columnName,$target.is("input, textarea"));}},_controlStartAction:function(inputData,indexData,columnName,isInput){var selectionModel=this.selectionModel,columnIndex=indexData.column,rowIndex=indexData.row,startDrag=true;if(!selectionModel.isEnabled()){return;}if(!util.isMetaColumn(columnName)){selectionModel.setType(selTypeConst.CELL);if(inputData.shiftKey&&!isInput){selectionModel.update(rowIndex,columnIndex);}else{startDrag=this._doFocusAtAndCheckDraggable(rowIndex,columnIndex);selectionModel.end();}}else{if(columnName==="_number"){this._updateSelectionByRow(rowIndex,inputData.shiftKey);}else{startDrag=false;}}if(!isInput&&startDrag){this.dimensionModel.refreshLayout();this._attachDragEvents(inputData.pageX,inputData.pageY);}},_updateSelectionByRow:function(rowIndex,shiftKey){if(shiftKey){this.selectionModel.update(rowIndex,0,selTypeConst.ROW);}else{this.selectionModel.selectRow(rowIndex);}},_doFocusAtAndCheckDraggable:function(rowIndex,columnIndex){var startTime=(new Date()).getTime(),focusSuccessed=this.focusModel.focusAt(rowIndex,columnIndex),endTime=(new Date()).getTime(),hasPaused=(endTime-startTime)>MIN_INTERVAL_FOR_PAUSED;if(!focusSuccessed||hasPaused){return false;}return true;},_attachDragEvents:function(pageX,pageY){this.setOwnProperties({mouseDownX:pageX,mouseDownY:pageY});$(document).on("mousemove",$.proxy(this._onMouseMove,this)).on("mouseup",$.proxy(this._detachDragEvents,this)).on("selectstart",$.proxy(this._onSelectStart,this));},_detachDragEvents:function(){this.selectionModel.stopAutoScroll();$(document).off("mousemove",this._onMouseMove).off("mouseup",this._detachDragEvents).off("selectstart",this._onSelectStart);},_onMouseMove:function(event){var dragged=this._getMouseMoveDistance(event.pageX,event.pageY)>MIN_DISATNCE_FOR_DRAG;if(this.selectionModel.hasSelection()||dragged){this.selectionModel.updateByMousePosition(event.pageX,event.pageY);}},_getMouseMoveDistance:function(pageX,pageY){var dx=Math.abs(this.mouseDownX-pageX);var dy=Math.abs(this.mouseDownY-pageY);return Math.round(Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2)));},_onSelectStart:function(event){event.preventDefault();return false;},render:function(){var whichSide=this.whichSide;this._destroyChildren();if(!this.dimensionModel.get("scrollX")){this.$el.css("overflow-x","hidden");}if(!this.dimensionModel.get("scrollY")&&whichSide===frameConst.R){this.$el.css("overflow-y","hidden");}this.$el.css("height",this.dimensionModel.get("bodyHeight"));this.$container=$("<div>").addClass(classNameConst.BODY_CONTAINER);this.$el.append(this.$container);this._addChildren([this.viewFactory.createBodyTable(whichSide),this.viewFactory.createSelectionLayer(whichSide),this.viewFactory.createFocusLayer(whichSide)]);this.$container.append(this._renderChildren());this._resetContainerHeight();return this;}});module.exports=Body;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var constMap=__webpack_require__(9);var classNameConst=__webpack_require__(14);var CELL_BORDER_WIDTH=constMap.dimension.CELL_BORDER_WIDTH;var ATTR_COLUMN_NAME=constMap.attrName.COLUMN_NAME;var BodyTable=View.extend({initialize:function(options){View.prototype.initialize.call(this);this.setOwnProperties({dimensionModel:options.dimensionModel,coordColumnModel:options.coordColumnModel,renderModel:options.renderModel,columnModel:options.columnModel,viewFactory:options.viewFactory,painterManager:options.painterManager,whichSide:options.whichSide||"R"});this.listenTo(this.coordColumnModel,"columnWidthChanged",this._onColumnWidthChanged);this.listenTo(this.renderModel,"change:dummyRowCount",this._onChangeDummyRowCount);this.listenTo(this.dimensionModel,"change:bodyHeight",this._resetHeight);this._attachAllTableEventHandlers();},className:classNameConst.BODY_TABLE_CONTAINER,template:_.template('<table class="'+classNameConst.TABLE+'">   <colgroup><%=colGroup%></colgroup>   <tbody><%=tbody%></tbody></table>'),templateCol:_.template('<col <%=attrColumnName%>="<%=columnName%>" style="width:<%=width%>px">'),_onColumnWidthChanged:function(){var columnWidthList=this.coordColumnModel.getColumnWidthList(this.whichSide);var $colList=this.$el.find("col");_.each(columnWidthList,function(width,index){$colList.eq(index).css("width",width+CELL_BORDER_WIDTH);},this);},_onChangeDummyRowCount:function(){this._resetOverflow();this._resetHeight();},_resetOverflow:function(){var overflow="visible";if(this.renderModel.get("dummyRowCount")>0){overflow="hidden";}this.$el.css("overflow",overflow);},_resetHeight:function(){var dimensionModel=this.dimensionModel;if(this.renderModel.get("dummyRowCount")>0){this.$el.height(dimensionModel.get("bodyHeight")-dimensionModel.getScrollXHeight());}else{this.$el.css("height","");}},resetTablePosition:function(){this.$el.css("top",this.renderModel.get("top"));},render:function(){this._destroyChildren();this.$el.html(this.template({colGroup:this._getColGroupMarkup(),tbody:""}));this._addChildren(this.viewFactory.createRowList({bodyTableView:this,el:this.$el.find("tbody"),whichSide:this.whichSide}));this._renderChildren();this._resetHeight();this._resetOverflow();return this;},_attachAllTableEventHandlers:function(){var cellPainters=this.painterManager.getCellPainters();_.each(cellPainters,function(painter){painter.attachEventHandlers(this.$el,"");},this);},redrawTable:function(tbodyHtml){this.$el[0].innerHTML=this.template({colGroup:this._getColGroupMarkup(),tbody:tbodyHtml});return this.$el.find("tbody");},_getColGroupMarkup:function(){var whichSide=this.whichSide;var columnWidthList=this.coordColumnModel.getColumnWidthList(whichSide);var columnModelList=this.columnModel.getVisibleColumnModelList(whichSide,true);var html="";_.each(columnModelList,function(columnModel,index){html+=this.templateCol({attrColumnName:ATTR_COLUMN_NAME,columnName:columnModel.columnName,width:columnWidthList[index]+CELL_BORDER_WIDTH});},this);return html;}});module.exports=BodyTable;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var classNameConst=__webpack_require__(14);var constMap=__webpack_require__(9);var frameConst=constMap.frame;var ATTR_COLUMN_NAME=constMap.attrName.COLUMN_NAME;var Footer=View.extend({initialize:function(options){this.columnTemplateMap=options.columnTemplateMap||{};this.whichSide=options.whichSide;this.columnModel=options.columnModel;this.dimensionModel=options.dimensionModel;this.coordColumnModel=options.coordColumnModel;this.renderModel=options.renderModel;this.summaryModel=options.summaryModel;this.listenTo(this.renderModel,"change:scrollLeft",this._onChangeScrollLeft);this.listenTo(this.coordColumnModel,"columnWidthChanged",this._onChangeColumnWidth);this.listenTo(this.columnModel,"setFooterContent",this._setcolumnContent);if(this.summaryModel){this.listenTo(this.summaryModel,"change",this._onChangeSummaryValue);}},className:classNameConst.FOOT_AREA,events:{scroll:"_onScrollView"},template:_.template('<table class="<%=className%>" style="height:<%=height%>px"><tbody><%=tbody%></tbody></table>'),templateHeader:_.template('<th <%=attrColumnName%>="<%=columnName%>" class="<%=className%>" style="width:<%=width%>px"><%=value%></th>'),_onScrollView:function(event){if(this.whichSide===frameConst.R){this.renderModel.set("scrollLeft",event.target.scrollLeft);}},_onChangeScrollLeft:function(model,value){if(this.whichSide===frameConst.R){this.el.scrollLeft=value;}},_onChangeColumnWidth:function(){var columnWidthList=this.coordColumnModel.getColumnWidthList(this.whichSide);var $ths=this.$el.find("th");_.each(columnWidthList,function(columnWidth,index){$ths.eq(index).css("width",columnWidth);});},_setcolumnContent:function(columnName,contents){var $th=this.$el.find("th["+ATTR_COLUMN_NAME+'="'+columnName+'"]');$th.html(contents);},_onChangeSummaryValue:function(columnName,valueMap){var contents=this._generateValueHTML(columnName,valueMap);this._setcolumnContent(columnName,contents);},_generateValueHTML:function(columnName,valueMap){var template=this.columnTemplateMap[columnName];var html="";if(_.isFunction(template)){html=template(valueMap);}return html;},_generateTbodyHTML:function(){var summaryModel=this.summaryModel;var columnModelList=this.columnModel.getVisibleColumnModelList(this.whichSide,true);var columnWidthList=this.coordColumnModel.getColumnWidthList(this.whichSide);return _.reduce(columnModelList,function(memo,column,index){var columnName=column.columnName;var valueMap;if(summaryModel){valueMap=summaryModel.getValue(column.columnName);}return memo+this.templateHeader({attrColumnName:ATTR_COLUMN_NAME,columnName:columnName,className:classNameConst.CELL_HEAD+" "+classNameConst.CELL,width:columnWidthList[index],value:this._generateValueHTML(columnName,valueMap)});},"",this);},render:function(){var footerHeight=this.dimensionModel.get("footerHeight");if(footerHeight){this.$el.html(this.template({className:classNameConst.TABLE,height:footerHeight,tbody:this._generateTbodyHTML()}));}return this;}});module.exports=Footer;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var constMap=__webpack_require__(9);var classNameConst=__webpack_require__(14);var attrNameConst=constMap.attrName;var frameConst=constMap.frame;var CELL_BORDER_WIDTH=constMap.dimension.CELL_BORDER_WIDTH;var RowList=View.extend({initialize:function(options){var focusModel=options.focusModel;var renderModel=options.renderModel;var selectionModel=options.selectionModel;var coordRowModel=options.coordRowModel;var whichSide=options.whichSide||"R";this.setOwnProperties({whichSide:whichSide,bodyTableView:options.bodyTableView,focusModel:focusModel,renderModel:renderModel,selectionModel:selectionModel,coordRowModel:coordRowModel,dataModel:options.dataModel,columnModel:options.columnModel,collection:renderModel.getCollection(whichSide),painterManager:options.painterManager,sortOptions:null,renderedRowKeys:null});this.listenTo(this.collection,"change",this._onModelChange).listenTo(this.collection,"restore",this._onModelRestore).listenTo(focusModel,"change:rowKey",this._refreshFocusedRow).listenTo(renderModel,"rowListChanged",this.render);if(this.whichSide===frameConst.L){this.listenTo(focusModel,"change:rowKey",this._refreshSelectedMetaColumns).listenTo(selectionModel,"change:range",this._refreshSelectedMetaColumns).listenTo(renderModel,"rowListChanged",this._refreshSelectedMetaColumns);}},_getColumnModelList:function(){return this.columnModel.getVisibleColumnModelList(this.whichSide,true);},_removeOldRows:function(dupRowKeys){var firstIdx=_.indexOf(this.renderedRowKeys,dupRowKeys[0]);var lastIdx=_.indexOf(this.renderedRowKeys,_.last(dupRowKeys));var $rows=this.$el.children("tr");$rows.slice(0,firstIdx).remove();$rows.slice(lastIdx+1).remove();},_appendNewRows:function(rowKeys,dupRowKeys){var beforeRows=this.collection.slice(0,_.indexOf(rowKeys,dupRowKeys[0])),afterRows=this.collection.slice(_.indexOf(rowKeys,_.last(dupRowKeys))+1);this.$el.prepend(this._getRowsHtml(beforeRows));this.$el.append(this._getRowsHtml(afterRows));},_resetRows:function(){var html=this._getRowsHtml(this.collection.models),$tbody;if(RowList.isInnerHtmlOfTbodyReadOnly){$tbody=this.bodyTableView.redrawTable(html);this.setElement($tbody,false);}else{try{this.$el[0].innerHTML=html;}catch(e){RowList.isInnerHtmlOfTbodyReadOnly=true;this._resetRows();}}},_getRowsHtml:function(rows){var rowPainter=this.painterManager.getRowPainter(),columnNames=_.pluck(this._getColumnModelList(),"columnName");return _.map(rows,function(row){return rowPainter.generateHtml(row,columnNames);}).join("");},_getRowElement:function(rowKey){return this.$el.find("tr["+attrNameConst.ROW_KEY+"="+rowKey+"]");},_refreshSelectedMetaColumns:function(){var $rows=this.$el.find("tr");var metaSelector="."+classNameConst.CELL_HEAD;var $filteredRows;if(this.selectionModel.hasSelection()){$filteredRows=this._filterRowsByIndexRange($rows,this.selectionModel.get("range").row);}else{$filteredRows=this._filterRowByKey($rows,this.focusModel.get("rowKey"));}$rows.find(metaSelector).removeClass(classNameConst.CELL_SELECTED);$filteredRows.find(metaSelector).addClass(classNameConst.CELL_SELECTED);},_filterRowsByIndexRange:function($rows,rowRange){var renderModel=this.renderModel,renderStartIndex=renderModel.get("startIndex"),startIndex,endIndex;startIndex=Math.max(rowRange[0]-renderStartIndex,0);endIndex=Math.max(rowRange[1]-renderStartIndex+1,0);if(!startIndex&&!endIndex){return $();}return $rows.slice(startIndex,endIndex);},_filterRowByKey:function($rows,rowKey){var rowIndex=this.dataModel.indexOfRowKey(rowKey),renderStartIndex=this.renderModel.get("startIndex");if(renderStartIndex>rowIndex){return $();}return $rows.eq(rowIndex-renderStartIndex);},_refreshFocusedRow:function(){var rowKey=this.focusModel.get("rowKey");var prevRowKey=this.focusModel.get("prevRowKey");this._setFocusedRowClass(prevRowKey,false);this._setFocusedRowClass(rowKey,true);},_setFocusedRowClass:function(rowKey,focused){var columnNames=_.pluck(this._getColumnModelList(),"columnName");var trMap={};_.each(columnNames,function(columnName){var mainRowKey=this.dataModel.getMainRowKey(rowKey,columnName),$td;if(!trMap[mainRowKey]){trMap[mainRowKey]=this._getRowElement(mainRowKey);}$td=trMap[mainRowKey].find("td["+attrNameConst.COLUMN_NAME+'="'+columnName+'"]');$td.toggleClass(classNameConst.CELL_CURRENT_ROW,focused);},this);},render:function(dataListChanged){var rowKeys=this.collection.pluck("rowKey");var dupRowKeys;this.bodyTableView.resetTablePosition();if(dataListChanged){this._resetRows();}else{dupRowKeys=_.intersection(rowKeys,this.renderedRowKeys);if(_.isEmpty(rowKeys)||_.isEmpty(dupRowKeys)||(dupRowKeys.length/rowKeys.length<0.7)){this._resetRows();}else{this._removeOldRows(dupRowKeys);this._appendNewRows(rowKeys,dupRowKeys);}}this.renderedRowKeys=rowKeys;return this;},_onModelChange:function(model){var rowKey=model.get("rowKey");var $tr=this._getRowElement(rowKey);if("height" in model.changed){$tr.css("height",model.get("height")+CELL_BORDER_WIDTH);}else{this.painterManager.getRowPainter().refresh(model.changed,$tr);this.coordRowModel.syncWithDom();}},_onModelRestore:function(cellData){var $td=this.dataModel.getElement(cellData.rowKey,cellData.columnName);var editType=this.columnModel.getEditType(cellData.columnName);this.painterManager.getCellPainter(editType).refresh(cellData,$td);this.coordRowModel.syncWithDom();}},{isInnerHtmlOfTbodyReadOnly:(tui.util.browser.msie&&tui.util.browser.version<=9)});module.exports=RowList;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var classNameConst=__webpack_require__(14);var CELL_BORDER_WIDTH=__webpack_require__(9).dimension.CELL_BORDER_WIDTH;var frameConst=__webpack_require__(9).frame;var SelectionLayer=View.extend({initialize:function(options){this.setOwnProperties({whichSide:options.whichSide||frameConst.R,dimensionModel:options.dimensionModel,coordRowModel:options.coordRowModel,coordColumnModel:options.coordColumnModel,columnModel:options.columnModel,selectionModel:options.selectionModel});this._updateColumnWidthList();this.listenTo(this.coordColumnModel,"columnWidthChanged",this._onChangeColumnWidth);this.listenTo(this.selectionModel,"change:range",this.render);},className:classNameConst.LAYER_SELECTION,_updateColumnWidthList:function(){this.columnWidthList=this.coordColumnModel.getColumnWidthList(this.whichSide);},_onChangeColumnWidth:function(){this._updateColumnWidthList();this.render();},_getOwnSideColumnRange:function(columnRange){var columnFixCount=this.columnModel.getVisibleColumnFixCount();var ownColumnRange=null;if(this.whichSide===frameConst.L){if(columnRange[0]<columnFixCount){ownColumnRange=[columnRange[0],Math.min(columnRange[1],columnFixCount-1)];}}else{if(columnRange[1]>=columnFixCount){ownColumnRange=[Math.max(columnRange[0],columnFixCount)-columnFixCount,columnRange[1]-columnFixCount];}}return ownColumnRange;},_getVerticalStyles:function(rowRange){var coordRowModel=this.coordRowModel;var top=coordRowModel.getOffsetAt(rowRange[0]);var bottom=coordRowModel.getOffsetAt(rowRange[1])+coordRowModel.getHeightAt(rowRange[1]);return{top:top+"px",height:(bottom-top)+"px"};},_getHorizontalStyles:function(columnRange){var columnWidthList=this.columnWidthList;var metaColumnCount=this.columnModel.getVisibleMetaColumnCount();var startIndex=columnRange[0];var endIndex=columnRange[1];var left=0;var width=0;var i=0;if(this.whichSide===frameConst.L){startIndex+=metaColumnCount;endIndex+=metaColumnCount;}endIndex=Math.min(endIndex,columnWidthList.length-1);for(;i<=endIndex;i+=1){if(i<startIndex){left+=columnWidthList[i]+CELL_BORDER_WIDTH;}else{width+=columnWidthList[i]+CELL_BORDER_WIDTH;}}width-=CELL_BORDER_WIDTH;return{left:left+"px",width:width+"px"};},render:function(){var range=this.selectionModel.get("range");var styles,columnRange;if(range){columnRange=this._getOwnSideColumnRange(range.column);}if(columnRange){styles=_.assign({},this._getVerticalStyles(range.row),this._getHorizontalStyles(columnRange));this.$el.show().css(styles);}else{this.$el.hide();}return this;}});module.exports=SelectionLayer;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var CELL_BORDER_WIDTH=__webpack_require__(9).dimension.CELL_BORDER_WIDTH;var attrNameConst=__webpack_require__(9).attrName;var classNameConst=__webpack_require__(14);var EditingLayer=View.extend({initialize:function(options){this.renderModel=options.renderModel;this.domState=options.domState;this.inputPainters=options.inputPainters;this.listenTo(this.renderModel,"editingStateChanged",this._onEditingStateChanged);},className:classNameConst.LAYER_EDITING+" "+classNameConst.CELL_CONTENT,_startEditing:function(cellData){var rowKey=cellData.rowKey;var columnName=cellData.columnName;var editType=tui.util.pick(cellData,"columnModel","editOption","type");var styleMap=this._calculateLayoutStyle(rowKey,columnName,this._isWidthExpandable(editType));var painter=this.inputPainters[editType];this.$el.html(painter.generateHtml(cellData)).attr(attrNameConst.ROW_KEY,rowKey).attr(attrNameConst.COLUMN_NAME,columnName).css(styleMap).show();this._adjustLeftPosition();painter.focus(this.$el);},_isWidthExpandable:function(editType){return _.contains(["checkbox","radio"],editType);},_finishEditing:function(){this.$el.removeAttr(attrNameConst.ROW_KEY);this.$el.removeAttr(attrNameConst.COLUMN_NAME);this.$el.empty().hide();},_adjustLeftPosition:function(){var gridWidth=this.domState.getWidth();var layerWidth=this.$el.outerWidth();var layerLeftPos=this.$el.position().left;if(layerLeftPos+layerWidth>gridWidth){this.$el.css("left",gridWidth-layerWidth);}},_adjustCellOffsetValue:function(offsetValue){var browser=tui.util.browser;var result=offsetValue;if(browser.msie){if(browser.version===9){result=offsetValue-1;}else{if(browser.version>9){result=Math.floor(offsetValue);}}}return result;},_calculateLayoutStyle:function(rowKey,columnName,expandable){var wrapperOffset=this.domState.getOffset();var $cell=this.domState.getElement(rowKey,columnName);var cellOffset=$cell.offset();var cellHeight=$cell.outerHeight()+CELL_BORDER_WIDTH;var cellWidth=$cell.outerWidth()+CELL_BORDER_WIDTH;return{top:this._adjustCellOffsetValue(cellOffset.top)-wrapperOffset.top,left:this._adjustCellOffsetValue(cellOffset.left)-wrapperOffset.left,height:cellHeight,minWidth:expandable?cellWidth:"",width:expandable?"":cellWidth,lineHeight:cellHeight+"px"};},_onEditingStateChanged:function(cellData){if(cellData.isEditing){this._startEditing(cellData);}else{this._finishEditing();}},render:function(){_.each(this.inputPainters,function(painter){painter.attachEventHandlers(this.$el,"");},this);return this;}});module.exports=EditingLayer;},function(module,exports,__webpack_require__){var View=__webpack_require__(2);var classNameConst=__webpack_require__(14);var DEFAULT_DATE_FORMAT="yyyy-mm-dd";var DatePickerLayer;function arrowHTML(dirClassName){var classNameStr=classNameConst.ICO_ARROW+" "+dirClassName;return'<span class="'+classNameStr+'"></span>';}DatePickerLayer=View.extend({initialize:function(options){this.textPainter=options.textPainter;this.columnModel=options.columnModel;this.domState=options.domState;this.calendar=this._createCalendar();this.datePicker=this._createDatePicker();this._customizeCalendarBtns();this.listenTo(this.textPainter,"focusIn",this._onFocusInTextInput);this.listenTo(this.textPainter,"focusOut",this._onFocusOutTextInput);},className:classNameConst.LAYER_DATE_PICKER,_createCalendar:function(){var $calendarEl=$("<div>").addClass(classNameConst.CALENDAR);$calendarEl.mousedown(function(ev){ev.preventDefault();ev.target.unselectable=true;return false;});return new tui.component.Calendar({element:$calendarEl,classPrefix:classNameConst.CALENDAR+"-"});},_customizeCalendarBtns:function(){var $header=this.calendar.$header;var leftArrowHTML=arrowHTML(classNameConst.ICO_ARROW_LEFT);var rightArrowHTML=arrowHTML(classNameConst.ICO_ARROW_RIGHT);$header.find("."+classNameConst.CALENDAR_BTN_PREV_YEAR).html(leftArrowHTML+leftArrowHTML);$header.find("."+classNameConst.CALENDAR_BTN_NEXT_YEAR).html(rightArrowHTML+rightArrowHTML);$header.find("."+classNameConst.CALENDAR_BTN_PREV_MONTH).html(leftArrowHTML);$header.find("."+classNameConst.CALENDAR_BTN_NEXT_MONTH).html(rightArrowHTML);},_createDatePicker:function(){var datePicker=new tui.component.DatePicker({parentElement:this.$el,enableSetDateByEnterKey:false,selectableClassName:classNameConst.CALENDAR_SELECTABLE,selectedClassName:classNameConst.CALENDAR_SELECTED,pos:{top:0,left:0}},this.calendar);datePicker.on("update",function(){datePicker.close();});return datePicker;},_createDateForNow:function(){var now=new Date();return{year:now.getFullYear(),month:now.getMonth()+1,date:now.getDate()};},_resetDatePicker:function(options,$input){var datePicker=this.datePicker;var date=options.date||this._createDateForNow();datePicker.setDateForm(options.dateForm||DEFAULT_DATE_FORMAT);datePicker.setRanges(options.selectableRanges||[]);datePicker.setDate(date.year,date.month,date.date);datePicker.setElement($input);},_calculatePosition:function($input){var inputOffset=$input.offset();var inputHeight=$input.outerHeight();var wrapperOffset=this.domState.getOffset();return{top:inputOffset.top-wrapperOffset.top+inputHeight,left:inputOffset.left-wrapperOffset.left};},_onFocusInTextInput:function($input,address){var columnName=address.columnName;var component=this.columnModel.getColumnModel(columnName).component;var editType=this.columnModel.getEditType(columnName);if(editType==="text"&&component&&component.name==="datePicker"){this.$el.css(this._calculatePosition($input)).show();this._resetDatePicker(component.option||{},$input);this.datePicker.open();}},_onFocusOutTextInput:function(){this.datePicker.close();this.$el.hide();},render:function(){this.$el.hide();return this;}});module.exports=DatePickerLayer;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var View=__webpack_require__(2);var constMap=__webpack_require__(9);var classNameConst=__webpack_require__(14);var frameConst=constMap.frame;var CELL_BORDER_WIDTH=constMap.dimension.CELL_BORDER_WIDTH;var HTML_BORDER_DIV='<div class="'+classNameConst.LAYER_FOCUS_BORDER+'"></div>';var FocusLayer=View.extend({initialize:function(options){this.focusModel=options.focusModel;this.columnModel=options.columnModel;this.coordRowModel=options.coordRowModel;this.coordColumnModel=options.coordColumnModel;this.coordConverterModel=options.coordConverterModel;this.whichSide=options.whichSide;this.borderEl={$top:$(HTML_BORDER_DIV),$left:$(HTML_BORDER_DIV),$right:$(HTML_BORDER_DIV),$bottom:$(HTML_BORDER_DIV)};this.listenTo(this.coordColumnModel,"columnWidthChanged",this._refreshCurrentLayout);this.listenTo(this.coordRowModel,"reset",this._refreshCurrentLayout);this.listenTo(this.focusModel,"blur",this._onBlur);this.listenTo(this.focusModel,"focus",this._onFocus);},className:classNameConst.LAYER_FOCUS,_refreshCurrentLayout:function(){var focusModel=this.focusModel;if(this.$el.css("display")!=="none"){this._refreshBorderLayout(focusModel.get("rowKey"),focusModel.get("columnName"));}},_onBlur:function(){this.$el.hide();},_onFocus:function(rowKey,columnName){var targetSide=this.columnModel.isLside(columnName)?frameConst.L:frameConst.R;if(targetSide===this.whichSide){this._refreshBorderLayout(rowKey,columnName);this.$el.show();}},_refreshBorderLayout:function(rowKey,columnName){var pos=this.coordConverterModel.getCellPosition(rowKey,columnName);var width=pos.right-pos.left;var height=pos.bottom-pos.top;this.borderEl.$left.css({top:pos.top,left:pos.left,width:CELL_BORDER_WIDTH,height:height+CELL_BORDER_WIDTH});this.borderEl.$top.css({top:pos.top===0?CELL_BORDER_WIDTH:pos.top,left:pos.left,width:width+CELL_BORDER_WIDTH,height:CELL_BORDER_WIDTH});this.borderEl.$right.css({top:pos.top,left:pos.left+width,width:CELL_BORDER_WIDTH,height:height+CELL_BORDER_WIDTH});this.borderEl.$bottom.css({top:pos.top+height,left:pos.left,width:width+CELL_BORDER_WIDTH,height:CELL_BORDER_WIDTH});},render:function(){var $el=this.$el;_.each(this.borderEl,function($border){$el.append($border);});$el.hide();return this;}});module.exports=FocusLayer;},function(module,exports,__webpack_require__){var attrNameConst=__webpack_require__(9).attrName;var classNameConst=__webpack_require__(14);var DomState=tui.util.defineClass({init:function($el){this.$el=$el;},_getBodyTableRows:function(frameClassName){return this.$el.find("."+frameClassName).find("."+classNameConst.BODY_TABLE_CONTAINER).find("tr["+attrNameConst.ROW_KEY+"]");},_getMaxCellHeight:function($row){var heights=$row.find("."+classNameConst.CELL_CONTENT).map(function(){return this.scrollHeight;}).get();return _.max(heights);},getElement:function(rowKey,columnName){return this.$el.find("tr["+attrNameConst.ROW_KEY+"="+rowKey+"]").find("td["+attrNameConst.COLUMN_NAME+'="'+columnName+'"]');},getRowHeights:function(){var $lsideRows=this._getBodyTableRows(classNameConst.LSIDE_AREA);var $rsideRows=this._getBodyTableRows(classNameConst.RSIDE_AREA);var lsideHeight,rsideHeight;var heights=[];var i,len;for(i=0,len=$lsideRows.length;i<len;i+=1){lsideHeight=this._getMaxCellHeight($lsideRows.eq(i));rsideHeight=this._getMaxCellHeight($rsideRows.eq(i));heights[i]=Math.max(lsideHeight,rsideHeight)+1;}return heights;},getOffset:function(){return this.$el.offset();},getWidth:function(){return this.$el.width();},getParentHeight:function(){return this.$el.parent().height();},hasFocusedElement:function(){return !!this.$el.find(":focus").length;}});module.exports=DomState;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Backbone=__webpack_require__(3);var PublicEventEmitter=tui.util.defineClass({init:function(publicObject){this.publicObject=publicObject;},_listenForThrough:function(target,eventNames){_.each(eventNames,function(eventName){this.listenTo(target,eventName,_.bind(this._triggerOnPublic,this,eventName));},this);},_listenForRename:function(target,eventName,publicEventName){this.listenTo(target,eventName,_.bind(this._triggerOnPublic,this,publicEventName));},_triggerOnPublic:function(eventName,eventData){this.publicObject.trigger(eventName,eventData);},listenToNetAddon:function(net){this._listenForThrough(net,["beforeRequest","response","successResponse","failResponse","errorResponse"]);},listenToContainerView:function(container){this._listenForThrough(container,["click","dblclick","mousedown","clickCell","dblclickCell","mouseoverCell","mouseoutCell","rendered"]);},listenToFocusModel:function(focusModel){this._listenForRename(focusModel,"select","selectRow");}});_.extend(PublicEventEmitter.prototype,Backbone.Events);module.exports=PublicEventEmitter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var RowPainter=__webpack_require__(52);var CellPainter=__webpack_require__(54);var DummyCellPainter=__webpack_require__(55);var TextPainter=__webpack_require__(56);var SelectPainter=__webpack_require__(58);var ButtonPainter=__webpack_require__(59);var MainButtonPainter=__webpack_require__(60);var PainterManager=tui.util.defineClass({init:function(options){this.gridId=options.gridId;this.selectType=options.selectType;this.isFixedRowHeight=options.isFixedRowHeight;this.inputPainters=this._createInputPainters(options.controller);this.cellPainters=this._createCellPainters(options.controller);this.rowPainter=this._createRowPainter();},_createInputPainters:function(controller){return{text:new TextPainter({controller:controller,inputType:"text"}),password:new TextPainter({controller:controller,inputType:"password"}),checkbox:new ButtonPainter({controller:controller,inputType:"checkbox"}),radio:new ButtonPainter({controller:controller,inputType:"radio"}),select:new SelectPainter({controller:controller}),mainButton:new MainButtonPainter({controller:controller,inputType:this.selectType,gridId:this.gridId})};},_createCellPainters:function(controller){var cellPainters={dummy:new DummyCellPainter({controller:controller}),normal:new CellPainter({controller:controller,isFixedRowHeight:this.isFixedRowHeight,editType:"normal"})};_.each(this.inputPainters,function(inputPainter,editType){cellPainters[editType]=new CellPainter({editType:editType,controller:controller,isFixedRowHeight:this.isFixedRowHeight,inputPainter:inputPainter});},this);return cellPainters;},_createRowPainter:function(){return new RowPainter({painterManager:this});},getCellPainter:function(editType){return this.cellPainters[editType];},getCellPainters:function(){return this.cellPainters;},getInputPainters:function(withoutMeta){var result=this.inputPainters;if(withoutMeta){result=_.omit(result,"mainButton");}return result;},getRowPainter:function(){return this.rowPainter;}});module.exports=PainterManager;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Painter=__webpack_require__(53);var constMap=__webpack_require__(9);var attrNameConst=constMap.attrName;var CELL_BORDER_WIDTH=constMap.dimension.CELL_BORDER_WIDTH;var RowPainter=tui.util.defineClass(Painter,{init:function(options){Painter.apply(this,arguments);this.painterManager=options.painterManager;},selector:"tr",template:_.template('<tr <%=rowKeyAttr%>" class="<%=className%>" style="height: <%=height%>px;"><%=contents%></tr>'),_getEditType:function(columnName,cellData){var editType=tui.util.pick(cellData.columnModel,"editOption","type");return editType||"normal";},_generateHtmlForDummyRow:function(rowNum,columnNames){var cellPainter=this.painterManager.getCellPainter("dummy"),html="";_.each(columnNames,function(columnName){html+=cellPainter.generateHtml(rowNum,columnName);});return html;},_generateHtmlForActualRow:function(model,columnNames){var html="";_.each(columnNames,function(columnName){var cellData=model.get(columnName),editType,cellPainter;if(cellData&&cellData.isMainRow){editType=this._getEditType(columnName,cellData);cellPainter=this.painterManager.getCellPainter(editType);html+=cellPainter.generateHtml(cellData);}},this);return html;},generateHtml:function(model,columnNames){var rowKey=model.get("rowKey");var rowNum=model.get("rowNum");var className="";var rowKeyAttr="";var html;if(_.isUndefined(rowKey)){html=this._generateHtmlForDummyRow(rowNum,columnNames);}else{rowKeyAttr=attrNameConst.ROW_KEY+'="'+rowKey+'"';html=this._generateHtmlForActualRow(model,columnNames);}return this.template({rowKeyAttr:rowKeyAttr,height:model.get("height")+CELL_BORDER_WIDTH,contents:html,className:className});},refresh:function(changed,$tr){_.each(changed,function(cellData,columnName){var editType,cellPainter,$td;if(columnName!=="_extraData"){$td=$tr.find("td["+attrNameConst.COLUMN_NAME+'="'+columnName+'"]');editType=this._getEditType(columnName,cellData);cellPainter=this.painterManager.getCellPainter(editType);cellPainter.refresh(cellData,$td);}},this);}});module.exports=RowPainter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var attrNameConst=__webpack_require__(9).attrName;var Painter=tui.util.defineClass({init:function(options){this.controller=options.controller;},events:{},selector:"",_getCellAddress:function($target){var $addressHolder=$target.closest("["+attrNameConst.ROW_KEY+"]");return{rowKey:$addressHolder.attr(attrNameConst.ROW_KEY),columnName:$addressHolder.attr(attrNameConst.COLUMN_NAME)};},attachEventHandlers:function($target,parentSelector){_.each(this.events,function(methodName,eventName){var boundHandler=_.bind(this[methodName],this),selector=parentSelector+" "+this.selector;$target.on(eventName,selector,boundHandler);},this);},generateHtml:function(){throw new Error("implement generateHtml() method");}});module.exports=Painter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Painter=__webpack_require__(53);var util=__webpack_require__(8);var attrNameConst=__webpack_require__(9).attrName;var classNameConst=__webpack_require__(14);var Cell=tui.util.defineClass(Painter,{init:function(options){Painter.apply(this,arguments);this.editType=options.editType;this.isFixedRowHeight=options.isFixedRowHeight;this.inputPainter=options.inputPainter;this.selector="td["+attrNameConst.EDIT_TYPE+'="'+this.editType+'"]';},events:{dblclick:"_onDblClick"},template:_.template('<td <%=attributeString%> style="<%=style%>"><%=contentHtml%></td>'),contentTemplate:_.template('<div class="<%=className%>" style="<%=style%>"><%=content%></div>'),_onDblClick:function(event){var address;if(this._isEditableType()){address=this._getCellAddress($(event.target));this.controller.startEditing(address,true);}},_isEditableType:function(){return !_.contains(["normal","mainButton"],this.editType);},_getContentStyle:function(cellData){var whiteSpace=cellData.columnModel.whiteSpace||"nowrap";var styles=[];if(whiteSpace){styles.push("white-space:"+whiteSpace);}if(this.isFixedRowHeight){styles.push("max-height:"+cellData.height+"px");}return styles.join(";");},_getContentHtml:function(cellData){var content=cellData.formattedValue;var beforeContent=cellData.beforeContent;var afterContent=cellData.afterContent;var fullContent;if(this.inputPainter){content=this.inputPainter.generateHtml(cellData);if(this._shouldContentBeWrapped()&&!this._isUsingViewMode(cellData)){beforeContent=this._getSpanWrapContent(beforeContent,classNameConst.CELL_CONTENT_BEFORE);afterContent=this._getSpanWrapContent(afterContent,classNameConst.CELL_CONTENT_AFTER);content=this._getSpanWrapContent(content,classNameConst.CELL_CONTENT_INPUT);fullContent=beforeContent+afterContent+content;}}if(!fullContent){fullContent=beforeContent+content+afterContent;}return this.contentTemplate({content:fullContent,className:classNameConst.CELL_CONTENT,style:this._getContentStyle(cellData)});},_isUsingViewMode:function(cellData){return tui.util.pick(cellData,"columnModel","editOption","useViewMode")!==false;},_shouldContentBeWrapped:function(){return _.contains(["text","password","select"],this.editType);},_getSpanWrapContent:function(content,className){if(tui.util.isFalsy(content)){content="";}return'<span class="'+className+'">'+content+"</span>";},_getAttributes:function(cellData){var classNames=[cellData.className,classNameConst.CELL,(cellData.rowNum%2)?classNameConst.CELL_ROW_ODD:classNameConst.CELL_ROW_EVEN];var attrs={align:cellData.columnModel.align||"left"};attrs["class"]=classNames.join(" ");attrs[attrNameConst.EDIT_TYPE]=this.editType;attrs[attrNameConst.ROW_KEY]=cellData.rowKey;attrs[attrNameConst.COLUMN_NAME]=cellData.columnName;if(cellData.rowSpan){attrs.rowspan=cellData.rowSpan;}return attrs;},attachEventHandlers:function($target,parentSelector){Painter.prototype.attachEventHandlers.call(this,$target,parentSelector);if(this.inputPainter){this.inputPainter.attachEventHandlers($target,parentSelector+" "+this.selector);}},generateHtml:function(cellData){var attributeString=util.getAttributesString(this._getAttributes(cellData));var contentHtml=this._getContentHtml(cellData);var valign=cellData.columnModel.valign;var styles=[];if(valign){styles.push("vertical-align:"+valign);}return this.template({attributeString:attributeString,style:styles.join(";"),contentHtml:contentHtml});},refresh:function(cellData,$td){var contentProps=["value","isEditing","isDisabled","optionList"];var editingChangedToTrue=_.contains(cellData.changed,"isEditing")&&cellData.isEditing;var shouldUpdateContent=_.intersection(contentProps,cellData.changed).length>0;var attrs=this._getAttributes(cellData);$td.attr(attrs);if(editingChangedToTrue&&!this._isUsingViewMode(cellData)){this.inputPainter.focus($td);}else{if(shouldUpdateContent){$td.html(this._getContentHtml(cellData));$td.scrollLeft(0);}}}});module.exports=Cell;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Painter=__webpack_require__(53);var util=__webpack_require__(8);var attrNameConst=__webpack_require__(9).attrName;var classNameConst=__webpack_require__(14);var DummyCell=tui.util.defineClass(Painter,{init:function(){Painter.apply(this,arguments);},selector:"td["+attrNameConst.EDIT_TYPE+'="dummy"]',template:_.template("<td "+attrNameConst.COLUMN_NAME+'="<%=columnName%>" '+attrNameConst.EDIT_TYPE+'="dummy" class="<%=className%>"></td>'),generateHtml:function(rowNum,columnName){var classNames=[classNameConst.CELL,classNameConst.CELL_DUMMY,(rowNum%2)?classNameConst.CELL_ROW_ODD:classNameConst.CELL_ROW_EVEN];if(util.isMetaColumn(columnName)){classNames.push(classNameConst.CELL_HEAD);}return this.template({columnName:columnName,className:classNames.join(" ")});}});module.exports=DummyCell;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var InputPainter=__webpack_require__(57);var util=__webpack_require__(8);var classNameConst=__webpack_require__(14);var SELECTOR_TEXT="."+classNameConst.CELL_CONTENT_TEXT;var SELECTOR_PASSWORD="input[type=password]";var TextPainter=tui.util.defineClass(InputPainter,{init:function(options){InputPainter.apply(this,arguments);this.inputType=options.inputType;this.selector=(options.inputType==="text")?SELECTOR_TEXT:SELECTOR_PASSWORD;this._extendEvents({selectstart:"_onSelectStart"});},templateInput:_.template('<input class="<%=className%>" type="<%=type%>" value="<%=value%>" name="<%=name%>" align="center" maxLength="<%=maxLength%>" <%=disabled%>/>'),templateTextArea:_.template('<textarea class="<%=className%>" name="<%=name%>" maxLength="<%=maxLength%>" <%=disabled%>><%=value%></textarea>'),_onSelectStart:function(event){event.stopPropagation();},_convertStringToAsterisks:function(value){return Array(value.length+1).join("*");},_getDisplayValue:function(cellData){var value=cellData.formattedValue;if(this.inputType==="password"){value=this._convertStringToAsterisks(cellData.value);}return value;},_generateInputHtml:function(cellData){var maxLength=tui.util.pick(cellData,"columnModel","editOption","maxLength");var params={type:this.inputType,className:classNameConst.CELL_CONTENT_TEXT,value:cellData.value,name:util.getUniqueKey(),disabled:cellData.isDisabled?"disabled":"",maxLength:maxLength};if(cellData.whiteSpace==="normal"){return this.templateTextArea(params);}return this.templateInput(params);},focus:function($parent){var $input=$parent.find(this.selector);if($input.length===1&&!$input.is(":focus")){$input.select();}}});module.exports=TextPainter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Painter=__webpack_require__(53);var keyNameMap=__webpack_require__(9).keyName;var InputPainter=tui.util.defineClass(Painter,{init:function(){Painter.apply(this,arguments);},events:{keydown:"_onKeyDown",focusin:"_onFocusIn",focusout:"_onFocusOut"},keyDownActions:{ESC:function(param){this.controller.finishEditing(param.address,true);},ENTER:function(param){this.controller.finishEditing(param.address,true,param.value);},TAB:function(param){this.controller.finishEditing(param.address,true,param.value);this.controller.focusInToNextCell(param.shiftKey);}},_extendKeydownActions:function(actions){this.keyDownActions=_.assign({},this.keyDownActions,actions);},_extendEvents:function(events){this.events=_.assign({},this.events,events);},_executeCustomEventHandler:function(event){var $input=$(event.target);var address=this._getCellAddress($input);this.controller.executeCustomInputEventHandler(event,address);},_onFocusIn:function(event){var $target=$(event.target);var address=this._getCellAddress($target);var self=this;_.defer(function(){self._executeCustomEventHandler(event);self.trigger("focusIn",$target,address);self.controller.startEditing(address);});},_onFocusOut:function(event){var $target=$(event.target);var address=this._getCellAddress($target);this._executeCustomEventHandler(event);this.trigger("focusOut",$target,address);this.controller.finishEditing(address,false,$target.val());},_onKeyDown:function(event){var keyCode=event.keyCode||event.which;var keyName=keyNameMap[keyCode];var action=this.keyDownActions[keyName];var $target=$(event.target);var param={$target:$target,address:this._getCellAddress($target),shiftKey:event.shiftKey,value:$target.val()};this._executeCustomEventHandler(event);if(action){action.call(this,param);event.preventDefault();}},_getDisplayValue:function(){throw new Error("implement _getDisplayValue() method");},_generateInputHtml:function(){throw new Error("implement _generateInputHtml() method");},_isUsingViewMode:function(cellData){return tui.util.pick(cellData,"columnModel","editOption","useViewMode")!==false;},generateHtml:function(cellData){var result;if(!_.isNull(cellData.convertedHTML)){result=cellData.convertedHTML;}else{if(!this._isUsingViewMode(cellData)||cellData.isEditing){result=this._generateInputHtml(cellData);}else{result=this._getDisplayValue(cellData);}}return result;},focus:function($parent){var $input=$parent.find(this.selector);if(!$input.is(":focus")){$input.eq(0).focus();}}});_.assign(InputPainter.prototype,Backbone.Events);module.exports=InputPainter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var InputPainter=__webpack_require__(57);var util=__webpack_require__(8);var SelectPainter=tui.util.defineClass(InputPainter,{init:function(){InputPainter.apply(this,arguments);this.selector="select";},template:_.template('<select name="<%=name%>" <%=disabled%>><%=options%></select>'),optionTemplate:_.template('<option value="<%=value%>" <%=selected%>><%=text%></option>'),_getDisplayValue:function(cellData){var selectedOption=_.find(cellData.optionList,function(item){return String(item.value)===String(cellData.value);});return selectedOption?selectedOption.text:"";},_generateInputHtml:function(cellData){var optionHtml=_.reduce(cellData.optionList,function(html,item){return html+this.optionTemplate({value:item.value,text:item.text,selected:(String(cellData.value)===String(item.value))?"selected":""});},"",this);return this.template({name:util.getUniqueKey(),disabled:cellData.isDisabled?"disabled":"",options:optionHtml});}});module.exports=SelectPainter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var InputPainter=__webpack_require__(57);var util=__webpack_require__(8);var ButtonPainter=tui.util.defineClass(InputPainter,{init:function(options){InputPainter.apply(this,arguments);this.inputType=options.inputType;this.selector="fieldset[data-type="+this.inputType+"]";this._extendEvents({mousedown:"_onMouseDown"});this._extendKeydownActions({TAB:function(param){var value;if(!this._focusNextInput(param.$target,param.shiftKey)){value=this._getCheckedValueString(param.$target);this.controller.finishEditing(param.address,true,value);this.controller.focusInToNextCell(param.shiftKey);}},ENTER:function(param){var value=this._getCheckedValueString(param.$target);this.controller.finishEditing(param.address,true,value);},LEFT_ARROW:function(param){this._focusNextInput(param.$target,true);},RIGHT_ARROW:function(param){this._focusNextInput(param.$target);},UP_ARROW:function(){},DOWN_ARROW:function(){}});},template:_.template('<fieldset data-type="<%=type%>"><%=content%></fieldset>'),inputTemplate:_.template('<input type="<%=type%>" data-value-type="<%=valueType%>" name="<%=name%>" id="<%=id%>" value="<%=value%>" <%=checked%> <%=disabled%> />'),labelTemplate:_.template('<label for="<%=id%>"><%=labelText%></label>'),_onFocusOut:function(event){var $target=$(event.target);var self=this;_.defer(function(){var address,value;if(!$target.siblings("input:focus").length){address=self._getCellAddress($target);value=self._getCheckedValueString($target);self.controller.finishEditing(address,false,value);}});},_onMouseDown:function(event){var $target=$(event.target);var hasFocusedInput=$target.closest("fieldset").find("input:focus").length>0;if(!$target.is("input")&&hasFocusedInput){event.stopPropagation();event.preventDefault();}},_focusNextInput:function($target,reverse){var traverseFuncName=reverse?"prevAll":"nextAll",$nextInputs=$target[traverseFuncName]("input");if($nextInputs.length){$nextInputs.first().focus();return true;}return false;},_getCheckedValueString:function($target){var $checkedInputs=$target.parent().find("input:checked");var checkedValues=[];var result;$checkedInputs.each(function(){var $input=$(this);var valueType=$input.attr("data-value-type");var value=util.convertValueType($input.val(),valueType);checkedValues.push(value);});if(checkedValues.length===1){result=checkedValues[0];}else{result=checkedValues.join(",");}return result;},_getCheckedValueSet:function(value){var checkedMap={};_.each(String(value).split(","),function(itemValue){checkedMap[itemValue]=true;});return checkedMap;},_getDisplayValue:function(cellData){var checkedSet=this._getCheckedValueSet(cellData.value);var optionTexts=[];_.each(cellData.optionList,function(item){if(checkedSet[item.value]){optionTexts.push(item.text);}});return optionTexts.join(",");},_generateInputHtml:function(cellData){var checkedSet=this._getCheckedValueSet(cellData.value);var name=util.getUniqueKey();var contentHtml="";_.each(cellData.optionList,function(item){var id=name+"_"+item.value;contentHtml+=this.inputTemplate({type:this.inputType,id:id,name:name,value:item.value,valueType:typeof item.value,checked:checkedSet[item.value]?"checked":"",disabled:cellData.isDisabled?"disabled":""});if(item.text){contentHtml+=this.labelTemplate({id:id,labelText:item.text});}},this);return this.template({type:this.inputType,content:contentHtml});},focus:function($parent){var $input=$parent.find("input");if(!$input.is(":focus")){$input.eq(0).focus();}}});module.exports=ButtonPainter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var Painter=__webpack_require__(53);var classNameConst=__webpack_require__(14);var keyCodeMap=__webpack_require__(9).keyCode;var InputPainter=tui.util.defineClass(Painter,{init:function(options){Painter.apply(this,arguments);this.selector="input."+classNameConst.CELL_MAIN_BUTTON;this.inputType=options.inputType;this.gridId=options.gridId;},events:{change:"_onChange",keydown:"_onKeydown"},template:_.template('<input class="'+classNameConst.CELL_MAIN_BUTTON+'" type="<%=type%>" name="<%=name%>" <%=checked%> <%=disabled%> />'),_onChange:function(event){var $target=$(event.target);var address=this._getCellAddress($target);this.controller.setValue(address,$target.is(":checked"));},_onKeydown:function(event){var address;if(event.keyCode===keyCodeMap.TAB){event.preventDefault();address=this._getCellAddress($(event.target));this.controller.focusInToRow(address.rowKey);}},generateHtml:function(cellData){return this.template({type:this.inputType,name:this.gridId,checked:cellData.value?"checked":"",disabled:cellData.isDisabled?"disabled":""});}});module.exports=InputPainter;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var util=__webpack_require__(8);var PainterController=tui.util.defineClass({init:function(options){this.focusModel=options.focusModel;this.dataModel=options.dataModel;this.columnModel=options.columnModel;this.selectionModel=options.selectionModel;},startEditing:function(address,force){var result;if(force){this.focusModel.finishEditing();}result=this.focusModel.startEditing(address.rowKey,address.columnName);if(result){this.selectionModel.end();}return result;},_checkMaxLength:function(columnName,value){var column=this.columnModel.getColumnModel(columnName);var maxLength=tui.util.pick(column,"editOption","maxLength");if(maxLength>0&&value.length>maxLength){return value.substring(0,maxLength);}return value;},finishEditing:function(address,shouldBlur,value){var focusModel=this.focusModel;var row,currentValue;if(!focusModel.isEditingCell(address.rowKey,address.columnName)){return false;}this.selectionModel.enable();if(!_.isUndefined(value)){row=this.dataModel.get(address.rowKey);currentValue=row.get(address.columnName);if(!(util.isBlank(value)&&util.isBlank(currentValue))){this.setValue(address,this._checkMaxLength(address.columnName,value));}}focusModel.finishEditing();if(shouldBlur){focusModel.focusClipboard();}else{_.defer(function(){focusModel.refreshState();});}return true;},focusInToNextCell:function(reverse){var focusModel=this.focusModel;var address=reverse?focusModel.prevAddress():focusModel.nextAddress();focusModel.focusIn(address.rowKey,address.columnName,true);},focusInToRow:function(rowKey){var focusModel=this.focusModel;focusModel.focusIn(rowKey,focusModel.firstColumnName(),true);},executeCustomInputEventHandler:function(event,address){var columnModel=this.columnModel.getColumnModel(address.columnName);var eventType=event.type;var eventHandler;if(eventType==="focusin"){eventType="focus";}else{if(eventType==="focusout"){eventType="blur";}}eventHandler=tui.util.pick(columnModel,"editOption","inputEvents",eventType);if(_.isFunction(eventHandler)){eventHandler.call(event.target,event,address);}},setValue:function(address,value){var columnModel=this.columnModel.getColumnModel(address.columnName);if(_.isString(value)){value=$.trim(value);}if(columnModel.dataType==="number"){value=convertToNumber(value);}this.dataModel.setValue(address.rowKey,address.columnName,value);}});function convertToNumber(value){if(_.isString(value)){value=value.replace(/,/g,"");}if(_.isNumber(value)||isNaN(value)||util.isBlank(value)){return value;}return Number(value);}module.exports=PainterController;},function(module,exports,__webpack_require__){var Backbone=__webpack_require__(3);var _=__webpack_require__(1);var View=__webpack_require__(2);var Router=__webpack_require__(63);var util=__webpack_require__(8);var formUtil=__webpack_require__(64);var GridEvent=__webpack_require__(21);var renderStateMap=__webpack_require__(9).renderState;var DELAY_FOR_LOADING_STATE=200;var Net=View.extend({initialize:function(options){var defaultOptions;defaultOptions={initialRequest:true,api:{readData:"",createData:"",updateData:"",deleteData:"",modifyData:"",downloadExcel:"",downloadExcelAll:""},perPage:500,enableAjaxHistory:true};options=$.extend(true,defaultOptions,options);this.setOwnProperties({dataModel:options.dataModel,toolbarModel:options.toolbarModel,renderModel:options.renderModel,router:null,pagination:options.pagination,api:options.api,enableAjaxHistory:options.enableAjaxHistory,readDataMethod:options.readDataMethod||"POST",perPage:options.perPage,curPage:1,timeoutIdForDelay:null,requestedFormData:null,isLocked:false,lastRequestedReadData:null});this._initializeDataModelNetwork();this._initializeRouter();this._initializePagination();this._showToolbarExcelBtns();this.listenTo(this.dataModel,"sortChanged",this._onSortChanged,this);if(options.initialRequest){if(!this.lastRequestedReadData){this._readDataAt(1,false);}}},tagName:"form",events:{submit:"_onSubmit"},_initializePagination:function(){var pagination=this.pagination;if(pagination){pagination.setOption("itemPerPage",this.perPage);pagination.setOption("itemCount",1);pagination.on("beforeMove",$.proxy(this._onPageBeforeMove,this));}},_onRouterRead:function(queryStr){var data=util.toQueryObject(queryStr);this._requestReadData(data);},_initializeDataModelNetwork:function(){this.dataModel.url=this.api.readData;this.dataModel.sync=$.proxy(this._sync,this);},_initializeRouter:function(){if(this.enableAjaxHistory){this.router=new Router({net:this});this.listenTo(this.router,"route:read",this._onRouterRead);if(!Backbone.History.started){Backbone.history.start();}}},_showToolbarExcelBtns:function(){var toolbarModel=this.toolbarModel;var api=this.api;if(!toolbarModel){return;}if(api.downloadExcel){toolbarModel.set("isExcelButtonVisible",true);}if(api.downloadExcelAll){toolbarModel.set("isExcelAllButtonVisible",true);}},_onPageBeforeMove:function(customEvent){var page=customEvent.page;if(this.curPage!==page){this._readDataAt(page,true);}},_onSubmit:function(submitEvent){submitEvent.preventDefault();this._readDataAt(1,false);},_setFormData:function(data){var formData=_.clone(data);_.each(this.lastRequestedReadData,function(value,key){if((_.isUndefined(formData[key])||_.isNull(formData[key]))&&value){formData[key]="";}});formUtil.setFormData(this.$el,formData);},_sync:function(method,model,options){var params;if(method==="read"){options=options||{};params=$.extend({},options);if(!options.url){params.url=_.result(model,"url");}this._ajax(params);}else{Backbone.sync(Backbone,method,model,options);}},_lock:function(){var renderModel=this.renderModel;this.timeoutIdForDelay=setTimeout(function(){renderModel.set("state",renderStateMap.LOADING);},DELAY_FOR_LOADING_STATE);this.isLocked=true;},_unlock:function(){if(this.timeoutIdForDelay!==null){clearTimeout(this.timeoutIdForDelay);this.timeoutIdForDelay=null;}this.isLocked=false;},_getFormData:function(){return formUtil.getFormData(this.$el);},_onReadSuccess:function(dataModel,responseData){var pagination=this.pagination;var page,totalCount;dataModel.setOriginalRowList();if(pagination&&responseData.pagination){page=responseData.pagination.page;totalCount=responseData.pagination.totalCount;pagination.setOption("itemPerPage",this.perPage);pagination.setOption("itemCount",totalCount||1);pagination.movePageTo(page);this.curPage=page;}},_onReadError:function(dataModel,responseData,options){},reloadData:function(){this._requestReadData(this.lastRequestedReadData);},readData:function(page,data,resetData){if(resetData){if(!data){data={};}data.perPage=this.perPage;this._changeSortOptions(data,this.dataModel.sortOptions);}else{data=_.assign({},this.lastRequestedReadData,data);}data.page=page;this._requestReadData(data);},_requestReadData:function(data){var startNumber=1;this._setFormData(data);if(!this.isLocked){this.renderModel.initializeVariables();this._lock();this.requestedFormData=_.clone(data);this.curPage=data.page||this.curPage;startNumber=(this.curPage-1)*this.perPage+1;this.renderModel.set({startNumber:startNumber});this.lastRequestedReadData=_.clone(data);this.dataModel.fetch({requestType:"readData",data:data,type:this.readDataMethod,success:$.proxy(this._onReadSuccess,this),error:$.proxy(this._onReadError,this),reset:true});this.dataModel.setSortOptionValues(data.sortColumn,data.sortAscending);}if(this.router){this.router.navigate("read/"+util.toQueryString(data),{trigger:false});}},_onSortChanged:function(sortOptions){if(sortOptions.isRequireFetch){this._readDataAt(1,true,sortOptions);}},_changeSortOptions:function(data,sortOptions){if(!sortOptions){return;}if(sortOptions.columnName==="rowKey"){delete data.sortColumn;delete data.sortAscending;}else{data.sortColumn=sortOptions.columnName;data.sortAscending=sortOptions.isAscending;}},_readDataAt:function(page,isUsingRequestedData,sortOptions){var data;isUsingRequestedData=_.isUndefined(isUsingRequestedData)?true:isUsingRequestedData;data=isUsingRequestedData?this.requestedFormData:this._getFormData();data.page=page;data.perPage=this.perPage;this._changeSortOptions(data,sortOptions);this._requestReadData(data);},request:function(requestType,options){var newOptions=_.extend({url:this.api[requestType],type:null,hasDataParam:true,isOnlyChecked:true,isOnlyModified:true,isSkipConfirm:false,isUpdateOriginal:false},options);var param=this._getRequestParam(requestType,newOptions);if(param){if(newOptions.isUpdateOriginal){this.dataModel.setOriginalRowList();}this._ajax(param);}},download:function(type){var apiName="download"+util.toUpperCaseFirstLetter(type),data=this.requestedFormData,url=this.api[apiName],paramStr;if(type==="excel"){data.page=this.curPage;data.perPage=this.perPage;}else{data=_.omit(data,"page","perPage");}paramStr=$.param(data);window.location=url+"?"+paramStr;},setPerPage:function(perPage){this.perPage=perPage;this._readDataAt(1);},_getDataParam:function(requestType,options){var dataModel=this.dataModel,checkMap={createData:["createList"],updateData:["updateList"],deleteData:["deleteList"],modifyData:["createList","updateList","deleteList"]},checkList=checkMap[requestType],data={},count=0,dataMap;options=_.defaults(options||{},{hasDataParam:true,isOnlyModified:true,isOnlyChecked:true});if(options.hasDataParam){if(options.isOnlyModified){dataMap=dataModel.getModifiedRowList({isOnlyChecked:options.isOnlyChecked});_.each(dataMap,function(list,name){if(_.contains(checkList,name)&&list.length){count+=list.length;data[name]=JSON.stringify(list);}},this);}else{data.rowList=dataModel.getRowList(options.isOnlyChecked);count=data.rowList.length;}}return{data:data,count:count};},_getRequestParam:function(requestType,options){var defaultOptions={url:this.api[requestType],type:null,hasDataParam:true,isOnlyModified:true,isOnlyChecked:true};var newOptions=$.extend(defaultOptions,options);var dataParam=this._getDataParam(requestType,newOptions);var param=null;if(newOptions.isSkipConfirm||this._isConfirmed(requestType,dataParam.count)){param={requestType:requestType,url:newOptions.url,data:dataParam.data,type:newOptions.type};}return param;},_isConfirmed:function(requestType,count){var result=false;if(count>0){result=confirm(this._getConfirmMessage(requestType,count));}else{alert(this._getConfirmMessage(requestType,count));}return result;},_getConfirmMessage:function(requestType,count){var textMap={createData:"입력",updateData:"수정",deleteData:"삭제",modifyData:"반영"};var actionName=textMap[requestType];var message;if(count>0){message=count+"건의 데이터를 "+actionName+"하시겠습니까?";}else{message=actionName+"할 데이터가 없습니다.";}return message;},_ajax:function(options){var eventData=new GridEvent(options.data);var params;this.trigger("beforeRequest",eventData);if(eventData.isStopped()){return;}options=$.extend({requestType:""},options);params={url:options.url,data:options.data||{},type:options.type||"POST",dataType:options.dataType||"json",complete:$.proxy(this._onComplete,this,options.complete,options),success:$.proxy(this._onSuccess,this,options.success,options),error:$.proxy(this._onError,this,options.error,options)};if(options.url){$.ajax(params);}},_onComplete:function(callback,jqXHR,status){this._unlock();},_onSuccess:function(callback,options,responseData,status,jqXHR){var message=responseData&&responseData.message;var eventData=new GridEvent({httpStatus:status,requestType:options.requestType,requestParameter:options.data,responseData:responseData});this.trigger("response",eventData);if(eventData.isStopped()){return;}if(responseData&&responseData.result){this.trigger("successResponse",eventData);if(eventData.isStopped()){return;}if(_.isFunction(callback)){callback(responseData.data||{},status,jqXHR);}}else{this.trigger("failResponse",eventData);if(eventData.isStopped()){return;}if(message){alert(message);}}},_onError:function(callback,options,jqXHR,status){var eventData=new GridEvent({httpStatus:status,requestType:options.requestType,requestParameter:options.data,responseData:null});this.renderModel.set("state",renderStateMap.DONE);this.trigger("response",eventData);if(eventData.isStopped()){return;}this.trigger("errorResponse",eventData);if(eventData.isStopped()){return;}if(jqXHR.readyState>1){alert("데이터 요청 중에 에러가 발생하였습니다.\n\n다시 시도하여 주시기 바랍니다.");}}});module.exports=Net;},function(module,exports,__webpack_require__){var Backbone=__webpack_require__(3);var Router=Backbone.Router.extend({initialize:function(attributes){this.net=attributes.net;},routes:{"read/:queryStr":"read"}});module.exports=Router;},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var formUtil={setInput:{_changeToStringInArray:function(arr){_.each(arr,function(value,i){arr[i]=String(value);});return arr;},radio:function(targetElement,formValue){targetElement.checked=(targetElement.value===formValue);},checkbox:function(targetElement,formValue){if(_.isArray(formValue)){targetElement.checked=$.inArray(targetElement.value,this._changeToStringInArray(formValue))!==-1;}else{targetElement.checked=(targetElement.value===formValue);}},"select-one":function(targetElement,formValue){var options=tui.util.toArray(targetElement.options);targetElement.selectedIndex=_.findIndex(options,function(option){return option.value===formValue||option.text===formValue;});},"select-multiple":function(targetElement,formValue){var options=tui.util.toArray(targetElement.options);if(_.isArray(formValue)){formValue=this._changeToStringInArray(formValue);_.each(options,function(targetOption){targetOption.selected=$.inArray(targetOption.value,formValue)!==-1||$.inArray(targetOption.text,formValue)!==-1;});}else{this["select-one"].apply(this,arguments);}},defaultAction:function(targetElement,formValue){targetElement.value=formValue;}},getFormData:function($form){var result={},valueList=$form.serializeArray(),isExisty=tui.util.isExisty;_.each(valueList,function(obj){var value=obj.value||"",name=obj.name;if(isExisty(result[name])){result[name]=[].concat(result[name],value);}else{result[name]=value;}});return result;},getFormElement:function($form,elementName){var formElement;if($form&&$form.length){if(elementName){formElement=$form.prop("elements")[String(elementName)];}else{formElement=$form.prop("elements");}}return $(formElement);},setFormData:function($form,formData){_.each(formData,function(value,property){this.setFormElementValue($form,property,value);},this);},setFormElementValue:function($form,elementName,formValue){var $elementList=this.getFormElement($form,elementName),type;if(!$elementList.length){return;}if(!_.isArray(formValue)){formValue=String(formValue);}$elementList=tui.util.isHTMLTag($elementList)?[$elementList]:$elementList;$elementList=tui.util.toArray($elementList);_.each($elementList,function(targetElement){type=this.setInput[targetElement.type]?targetElement.type:"defaultAction";this.setInput[type](targetElement,formValue);},this);},setCursorToEnd:function(target){var length=target.value.length,range;target.focus();if(target.setSelectionRange){try{target.setSelectionRange(length,length);}catch(e){}}else{if(target.createTextRange){range=target.createTextRange();range.collapse(true);range.moveEnd("character",length);range.moveStart("character",length);try{range.select();}catch(e){}}}}};module.exports=formUtil;},function(module,exports){var defaultOptionsMap={pagination:null};var ComponentHolder=tui.util.defineClass({init:function(optionsMap){this.optionsMap=$.extend(true,defaultOptionsMap,optionsMap);this.instanceMap={};},getInstance:function(key){return this.instanceMap[key];},setInstance:function(key,instance){this.instanceMap[key]=instance;},getOptions:function(key){return this.optionsMap[key];}});module.exports=ComponentHolder;},function(module,exports,__webpack_require__){var util=__webpack_require__(8);var styleGen=__webpack_require__(67);var themeNameConst=__webpack_require__(9).themeName;var STYLE_ELEMENT_ID="tui-grid-theme-style";var presetOptions={};presetOptions[themeNameConst.DEFAULT]=__webpack_require__(69);presetOptions[themeNameConst.STRIPED]=__webpack_require__(70);presetOptions[themeNameConst.CLEAN]=__webpack_require__(71);function buildCssString(options){var styles=[styleGen.grid(options.grid),styleGen.scrollbar(options.scrollbar),styleGen.toolbar(options.toolbar),styleGen.heightResizeHandle(options.heightResizeHandle),styleGen.pagination(options.pagination),styleGen.selection(options.selection)];var cell=options.cell;if(cell){styles=styles.concat([styleGen.cell(cell.normal),styleGen.cellDummy(cell.dummy),styleGen.cellEditable(cell.editable),styleGen.cellHead(cell.head),styleGen.cellOddRow(cell.oddRow),styleGen.cellEvenRow(cell.evenRow),styleGen.cellRequired(cell.required),styleGen.cellDisabled(cell.disabled),styleGen.cellInvalid(cell.invalid),styleGen.cellCurrentRow(cell.currentRow),styleGen.cellSelectedHead(cell.selectedHead),styleGen.cellFocused(cell.focused)]);}return styles.join("");}function setDocumentStyle(options){var cssString=buildCssString(options);$("#"+STYLE_ELEMENT_ID).remove();util.appendStyleElement(STYLE_ELEMENT_ID,cssString);}module.exports={apply:function(themeName,extOptions){var options=presetOptions[themeName];if(!options){options=presetOptions[themeNameConst.DEFAULT];}options=$.extend(true,{},options,extOptions);setDocumentStyle(options);},isApplied:function(){return $("#"+STYLE_ELEMENT_ID).length===1;}};},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var builder=__webpack_require__(68);var classNameConst=__webpack_require__(14);var classRule=_.bind(builder.createClassRule,builder);function bgTextRuleString(className,options){return classRule(className).bg(options.background).text(options.text).build();}function bgBorderRuleString(className,options){return classRule(className).bg(options.background).border(options.border).build();}module.exports={grid:function(options){var containerRule=classRule(classNameConst.CONTAINER).bg(options.background).text(options.text);var contentAreaRule=classRule(classNameConst.CONTENT_AREA).border(options.border);var tableRule=classRule(classNameConst.TABLE).border(options.border);var headerRule=classRule(classNameConst.HEAD_AREA).border(options.border);var footerRule=classRule(classNameConst.FOOT_AREA).border(options.border);var borderLineRule=classRule(classNameConst.BORDER_LINE).bg(options.border);var scrollHeadRule=classRule(classNameConst.SCROLLBAR_HEAD).border(options.border);var scrollBorderRule=classRule(classNameConst.SCROLLBAR_BORDER).bg(options.border);var footerRightRule=classRule(classNameConst.FOOT_AREA_RIGHT).border(options.border);return builder.buildAll([containerRule,contentAreaRule,tableRule,headerRule,footerRule,borderLineRule,scrollHeadRule,scrollBorderRule,footerRightRule]);},scrollbar:function(options){var webkitScrollbarRules=builder.createWebkitScrollbarRules("."+classNameConst.CONTAINER,options);var ieScrollbarRule=builder.createIEScrollbarRule("."+classNameConst.CONTAINER,options);var rightBottomRule=classRule(classNameConst.SCROLLBAR_RIGHT_BOTTOM).bg(options.background);var leftBottomRule=classRule(classNameConst.SCROLLBAR_LEFT_BOTTOM).bg(options.background);var scrollHeadRule=classRule(classNameConst.SCROLLBAR_HEAD).bg(options.background);var footerRightRule=classRule(classNameConst.FOOT_AREA_RIGHT).bg(options.background);var bodyAreaRule=classRule(classNameConst.BODY_AREA).bg(options.background);return builder.buildAll(webkitScrollbarRules.concat([ieScrollbarRule,rightBottomRule,leftBottomRule,scrollHeadRule,footerRightRule,bodyAreaRule]));},toolbar:function(options){return bgBorderRuleString(classNameConst.TOOLBAR,options);},heightResizeHandle:function(options){return bgBorderRuleString(classNameConst.HEIGHT_RESIZE_HANDLE,options);},pagination:function(options){return bgBorderRuleString(classNameConst.PAGINATION,options);},selection:function(options){return bgBorderRuleString(classNameConst.LAYER_SELECTION,options);},cell:function(options){var cellRule=classRule(classNameConst.CELL).bg(options.background).border(options.border).borderWidth(options).text(options.text);return cellRule.build();},cellHead:function(options){var headRule=classRule(classNameConst.CELL_HEAD).bg(options.background).border(options.border).borderWidth(options).text(options.text);var headAreaRule=classRule(classNameConst.HEAD_AREA).bg(options.background);var footerAreaRule=classRule(classNameConst.FOOT_AREA).bg(options.background);return builder.buildAll([headRule,headAreaRule,footerAreaRule]);},cellEvenRow:function(options){return classRule(classNameConst.CELL_ROW_EVEN).bg(options.background).build();},cellOddRow:function(options){return classRule(classNameConst.CELL_ROW_ODD).bg(options.background).build();},cellSelectedHead:function(options){return builder.create("."+classNameConst.CELL_HEAD+"."+classNameConst.CELL_SELECTED).bg(options.background).text(options.text).build();},cellFocused:function(options){var focusLayerRule=classRule(classNameConst.LAYER_FOCUS_BORDER).bg(options.border);var editingLayerRule=classRule(classNameConst.LAYER_EDITING).border(options.border);return builder.buildAll([focusLayerRule,editingLayerRule]);},cellEditable:function(options){return bgTextRuleString(classNameConst.CELL_EDITABLE,options);},cellRequired:function(options){return bgTextRuleString(classNameConst.CELL_REQUIRED,options);},cellDisabled:function(options){return bgTextRuleString(classNameConst.CELL_DISABLED,options);},cellDummy:function(options){return bgTextRuleString(classNameConst.CELL_DUMMY,options);},cellInvalid:function(options){return bgTextRuleString(classNameConst.CELL_INVALID,options);},cellCurrentRow:function(options){return bgTextRuleString(classNameConst.CELL_CURRENT_ROW,options);}};},function(module,exports,__webpack_require__){var _=__webpack_require__(1);var CSSRuleBuilder=tui.util.defineClass({init:function(selector){if(!_.isString(selector)||!selector){throw new Error("The Selector must be a string and not be empty.");}this._selector=selector;this._propValues=[];},add:function(property,value){if(value){this._propValues.push(property+":"+value);}return this;},border:function(value){return this.add("border-color",value);},borderWidth:function(options){var vertical=options.showVerticalBorder;var horizontal=options.showHorizontalBorder;var value;if(_.isBoolean(vertical)){value=vertical?"1px":"0";this.add("border-left-width",value).add("border-right-width",value);}if(_.isBoolean(horizontal)){value=horizontal?"1px":"0";this.add("border-top-width",value).add("border-bottom-width",value);}return this;},bg:function(value){return this.add("background-color",value);},text:function(value){return this.add("color",value);},build:function(){var result="";if(this._propValues.length){result=this._selector+"{"+this._propValues.join(";")+"}";}return result;}});module.exports={create:function(selector){return new CSSRuleBuilder(selector);},createClassRule:function(className){return this.create("."+className);},createWebkitScrollbarRules:function(selector,options){return[this.create(selector+" ::-webkit-scrollbar").bg(options.background),this.create(selector+" ::-webkit-scrollbar-thumb").bg(options.thumb),this.create(selector+" ::-webkit-scrollbar-thumb:hover").bg(options.active)];},createIEScrollbarRule:function(selector,options){var bgProps=["scrollbar-3dlight-color","scrollbar-darkshadow-color","scrollbar-track-color","scrollbar-shadow-color"];var thumbProps=["scrollbar-face-color","scrollbar-highlight-color"];var ieScrollbarRule=this.create(selector);_.each(bgProps,function(prop){ieScrollbarRule.add(prop,options.background);});_.each(thumbProps,function(prop){ieScrollbarRule.add(prop,options.thumb);});ieScrollbarRule.add("scrollbar-arrow-color",options.active);return ieScrollbarRule;},buildAll:function(rules){return _.map(rules,function(rule){return rule.build();}).join("");}};},function(module,exports){module.exports={grid:{background:"#fff",border:"#ccc",text:"#444"},selection:{background:"#4daaf9",border:"#004082"},toolbar:{border:"transparent",background:"transparent"},heightResizeHandle:{border:"#ccc",background:"#fff"},pagination:{border:"transparent",background:"transparent"},scrollbar:{background:"#f5f5f5",thumb:"#d9d9d9",active:"#c1c1c1"},cell:{normal:{background:"#fbfbfb",border:"#e0e0e0",showVerticalBorder:true,showHorizontalBorder:true},head:{background:"#eee",border:"#ccc",showVerticalBorder:true,showHorizontalBorder:true},selectedHead:{background:"#d8d8d8"},focused:{border:"#418ed4"},required:{background:"#fffdeb"},editable:{background:"#fff"},disabled:{text:"#b0b0b0"},dummy:{background:"#fff"},invalid:{background:"#ff8080"},evenRow:{},oddRow:{},currentRow:{}}};},function(module,exports,__webpack_require__){var presetDefault=__webpack_require__(69);module.exports=$.extend(true,{},presetDefault,{cell:{normal:{background:"#fff",border:"#e8e8e8",showVerticalBorder:false,showHorizontalBorder:false},oddRow:{background:"#f3f3f3"},evenRow:{background:"#fff"},head:{background:"#fff",showVerticalBorder:false,showHorizontalBorder:false}}});},function(module,exports,__webpack_require__){var presetDefault=__webpack_require__(69);module.exports=$.extend(true,{},presetDefault,{grid:{border:"#c0c0c0"},toolbar:{border:"#e0e0e0"},cell:{normal:{background:"#fff",border:"#e0e0e0",showVerticalBorder:false,showHorizontalBorder:true},head:{background:"#fff",border:"#e0e0e0",showVerticalBorder:false,showHorizontalBorder:true},selectedHead:{background:"#e0e0e0"}}});},function(module,exports){}]);