(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0);}if(i){return i(o,!0);}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o]);}return s;})({1:[function(require,module,exports){var dom=require("../helpers/domHandler"),chartConst=require("../const"),calculator=require("../helpers/calculator"),renderUtil=require("../helpers/renderUtil"),axisTemplate=require("./axisTemplate");var Axis=tui.util.defineClass({init:function(params){tui.util.extend(this,params);this.className="tui-chart-axis-area";},_renderAxisArea:function(axisContainer,bound,data){var theme=this.theme,isVertical=!!data.isVertical,isPositionRight=!!data.isPositionRight,options=this.options,dimension=bound.dimension,size=isVertical?dimension.height:dimension.width,elTitleArea=this._renderTitleArea({title:options.title,theme:theme.title,isVertical:isVertical,isPositionRight:isPositionRight,size:size}),elLabelArea=this._renderLabelArea(data,size,dimension.width,bound.degree),elTickArea;this.data=data;this.bound=bound;if(!isVertical||!data.aligned){elTickArea=this._renderTickArea(size);}renderUtil.renderDimension(axisContainer,dimension);renderUtil.renderPosition(axisContainer,bound.position);dom.addClass(axisContainer,isVertical?"vertical":"horizontal");dom.addClass(axisContainer,isPositionRight?"right":"");dom.append(axisContainer,[elTitleArea,elTickArea,elLabelArea]);},render:function(bound,data){var el=dom.create("DIV",this.className);this._renderAxisArea(el,bound,data);this.axisContainer=el;return el;},rerender:function(bound,data){this.axisContainer.innerHTML="";if(bound.dimension.width>0){if(data.options){this.options=data.options;}this._renderAxisArea(this.axisContainer,bound,data);}},resize:function(bound,data){this.rerender(bound,data);},_renderTitleAreaStyle:function(elTitleArea,size,isPositionRight){var cssTexts=[renderUtil.concatStr("width:",size,"px")];if(isPositionRight){if(renderUtil.isIE7()){cssTexts.push(renderUtil.concatStr("right:","0px"));}else{cssTexts.push(renderUtil.concatStr("right:",-size,"px"));}cssTexts.push("top:0px");}else{cssTexts.push("left:0px");if(!renderUtil.isOldBrowser()){cssTexts.push(renderUtil.concatStr("top:",size,"px"));}}elTitleArea.style.cssText+=";"+cssTexts.join(";");},_renderTitleArea:function(params){var elTitleArea=renderUtil.renderTitle(params.title,params.theme,"tui-chart-title-area");if(elTitleArea&&params.isVertical){this._renderTitleAreaStyle(elTitleArea,params.size,params.isPositionRight);}return elTitleArea;},_renderTickArea:function(size){var data=this.data,tickCount=data.tickCount,tickColor=this.theme.tickColor,positions=calculator.makeTickPixelPositions(size,tickCount),elTickArea=dom.create("DIV","tui-chart-tick-area"),posType=data.isVertical?"bottom":"left",borderColorType=data.isVertical?(data.isPositionRight?"borderLeftColor":"borderRightColor"):"borderTopColor",template=axisTemplate.tplAxisTick,ticksHtml=tui.util.map(positions,function(position,index){var cssText;if(data.aligned&&data.labels[index]===chartConst.EMPTY_AXIS_LABEL){return"";}cssText=[renderUtil.concatStr("background-color:",tickColor),renderUtil.concatStr(posType,": ",position,"px")].join(";");return template({cssText:cssText});},this).join("");elTickArea.innerHTML=ticksHtml;elTickArea.style[borderColorType]=tickColor;return elTickArea;},_makeVerticalLabelCssText:function(axisWidth,titleAreaWidth){return";width:"+(axisWidth-titleAreaWidth+chartConst.V_LABEL_RIGHT_PADDING)+"px";},_renderLabelArea:function(data,size,axisWidth,degree){var tickPixelPositions=calculator.makeTickPixelPositions(size,data.tickCount),labelSize=tickPixelPositions[1]-tickPixelPositions[0],posType="left",cssTexts=this._makeLabelCssTexts({isVertical:data.isVertical,isLabelAxis:data.isLabelAxis,labelSize:labelSize}),elLabelArea=dom.create("DIV","tui-chart-label-area"),areaCssText=renderUtil.makeFontCssText(this.theme.label),categories=data.labels,labelsHtml,titleAreaWidth;if(data.isVertical){posType=data.isLabelAxis?"top":"bottom";titleAreaWidth=this._getRenderedTitleHeight()+chartConst.TITLE_AREA_WIDTH_PADDING;areaCssText+=this._makeVerticalLabelCssText(axisWidth,titleAreaWidth);}else{if(data.isLabelAxis&&this.options.rotation===false){categories=this.dataProcessor.getMultilineCategories();}}tickPixelPositions.length=categories.length;labelsHtml=this._makeLabelsHtml({positions:tickPixelPositions,labels:categories,posType:posType,cssTexts:cssTexts,labelSize:labelSize,degree:degree,theme:this.theme.label});elLabelArea.innerHTML=labelsHtml;elLabelArea.style.cssText=areaCssText;this._changeLabelAreaPosition({elLabelArea:elLabelArea,isVertical:data.isVertical,isLabelAxis:data.isLabelAxis,theme:this.theme.label,labelSize:labelSize,aligned:data.aligned});return elLabelArea;},_getRenderedTitleHeight:function(){var title=this.options.title,theme=this.theme.title,result=title?renderUtil.getRenderedLabelHeight(title,theme):0;return result;},_makeLabelCssTexts:function(params){var cssTexts=[];if(params.isVertical&&params.isLabelAxis){cssTexts.push(renderUtil.concatStr("height:",params.labelSize,"px"));cssTexts.push(renderUtil.concatStr("line-height:",params.labelSize,"px"));}else{if(!params.isVertical){cssTexts.push(renderUtil.concatStr("width:",params.labelSize,"px"));}}return cssTexts;},_calculateRotationMovingPosition:function(params){var moveLeft=params.moveLeft;if(params.degree===chartConst.ANGLE_85){moveLeft+=calculator.calculateAdjacent(chartConst.ANGLE_90-params.degree,params.labelHeight/2);}return{top:params.top,left:params.left-moveLeft};},_calculateRotationMovingPositionForIE8:function(params){var labelWidth=renderUtil.getRenderedLabelWidth(params.label,params.theme),smallAreaWidth=calculator.calculateAdjacent(chartConst.ANGLE_90-params.degree,params.labelHeight/2),newLabelWidth=(calculator.calculateAdjacent(params.degree,labelWidth/2)+smallAreaWidth)*2,collectLeft=labelWidth-newLabelWidth,moveLeft=(params.labelWidth/2)-(smallAreaWidth*2);if(params.degree===chartConst.ANGLE_85){moveLeft+=smallAreaWidth;}return{top:chartConst.XAXIS_LABEL_TOP_MARGIN,left:params.left+collectLeft-moveLeft};},_makeCssTextForRotationMoving:function(params){var position;if(renderUtil.isOldBrowser()){position=this._calculateRotationMovingPositionForIE8(params);}else{position=this._calculateRotationMovingPosition(params);}return renderUtil.concatStr("left:",position.left,"px",";top:",position.top,"px");},_makeRotationLabelsHtml:function(params){var template=axisTemplate.tplAxisLabel,labelHeight=renderUtil.getRenderedLabelHeight(params.labels[0],params.theme),labelCssText=params.cssTexts.length?params.cssTexts.join(";")+";":"",addClass=" tui-chart-xaxis-rotation tui-chart-xaxis-rotation"+params.degree,halfWidth=params.labelSize/2,moveLeft=calculator.calculateAdjacent(params.degree,halfWidth),top=calculator.calculateOpposite(params.degree,halfWidth)+chartConst.XAXIS_LABEL_TOP_MARGIN,labelsHtml=tui.util.map(params.positions,function(position,index){var label=params.labels[index],rotationCssText=this._makeCssTextForRotationMoving({degree:params.degree,labelHeight:labelHeight,labelWidth:params.labelSize,top:top,left:position,moveLeft:moveLeft,label:label,theme:params.theme});return template({addClass:addClass,cssText:labelCssText+rotationCssText,label:label});},this).join("");return labelsHtml;},_makeNormalLabelsHtml:function(params){var template=axisTemplate.tplAxisLabel,labelCssText=params.cssTexts.length?params.cssTexts.join(";")+";":"",labelsHtml=tui.util.map(params.positions,function(position,index){var addCssText=renderUtil.concatStr(params.posType,":",position,"px");return template({addClass:"",cssText:labelCssText+addCssText,label:params.labels[index]});},this).join("");return labelsHtml;},_makeLabelsHtml:function(params){var labelsHtml;if(params.degree){labelsHtml=this._makeRotationLabelsHtml(params);}else{labelsHtml=this._makeNormalLabelsHtml(params);}return labelsHtml;},_changeLabelAreaPosition:function(params){var labelHeight;if(params.isLabelAxis&&!params.aligned){return;}if(params.isVertical){labelHeight=renderUtil.getRenderedLabelHeight("ABC",params.theme);params.elLabelArea.style.top=renderUtil.concatStr(parseInt(labelHeight/2,10),"px");}else{params.elLabelArea.style.left=renderUtil.concatStr("-",parseInt(params.labelSize/2,10),"px");}}});module.exports=Axis;},{"../const":15,"../helpers/calculator":28,"../helpers/domHandler":30,"../helpers/renderUtil":33,"./axisTemplate":2}],2:[function(require,module,exports){var templateMaker=require("../helpers/templateMaker");var tags={HTML_AXIS_TICK:'<div class="tui-chart-tick" style="{{ cssText }}"></div>',HTML_AXIS_LABEL:'<div class="tui-chart-label{{ addClass }}" style="{{ cssText }}"><span>{{ label }}</span></div>'};module.exports={tplAxisTick:templateMaker.template(tags.HTML_AXIS_TICK),tplAxisLabel:templateMaker.template(tags.HTML_AXIS_LABEL)};},{"../helpers/templateMaker":34}],3:[function(require,module,exports){var chartConst=require("./const"),chartFactory=require("./factories/chartFactory"),pluginFactory=require("./factories/pluginFactory"),themeFactory=require("./factories/themeFactory");var _createChart;require("./polyfill");require("./code-snippet-util");require("./registerCharts");require("./registerThemes");tui.util.defineNamespace("tui.chart");_createChart=function(container,data,options){var themeName,theme,chart;options=options||{};themeName=options.theme||chartConst.DEFAULT_THEME_NAME;theme=themeFactory.get(themeName);chart=chartFactory.get(options.chartType,data,theme,options);container.appendChild(chart.render());container.style.overflow="hidden";chart.animateChart();return chart;};tui.chart.barChart=function(container,data,options){options=options||{};options.chartType=chartConst.CHART_TYPE_BAR;return _createChart(container,data,options);};tui.chart.columnChart=function(container,data,options){options=options||{};options.chartType=chartConst.CHART_TYPE_COLUMN;return _createChart(container,data,options);};tui.chart.lineChart=function(container,data,options){options=options||{};options.chartType=chartConst.CHART_TYPE_LINE;return _createChart(container,data,options);};tui.chart.areaChart=function(container,data,options){options=options||{};options.chartType=chartConst.CHART_TYPE_AREA;return _createChart(container,data,options);};tui.chart.comboChart=function(container,data,options){options=options||{};options.chartType=chartConst.CHART_TYPE_COMBO;return _createChart(container,data,options);};tui.chart.pieChart=function(container,data,options){options=options||{};options.chartType=chartConst.CHART_TYPE_PIE;return _createChart(container,data,options);};tui.chart.registerTheme=function(themeName,theme){themeFactory.register(themeName,theme);};tui.chart.registerPlugin=function(libType,plugin){pluginFactory.register(libType,plugin);};},{"./code-snippet-util":14,"./const":15,"./factories/chartFactory":23,"./factories/pluginFactory":24,"./factories/themeFactory":25,"./polyfill":48,"./registerCharts":49,"./registerThemes":50}],4:[function(require,module,exports){var ChartBase=require("./chartBase"),lineTypeMixer=require("./lineTypeMixer"),axisTypeMixer=require("./axisTypeMixer"),verticalTypeMixer=require("./verticalTypeMixer"),Series=require("../series/areaChartSeries");var AreaChart=tui.util.defineClass(ChartBase,{className:"tui-area-chart",Series:Series,init:function(){this._lineTypeInit.apply(this,arguments);}});axisTypeMixer.mixin(AreaChart);verticalTypeMixer.mixin(AreaChart);lineTypeMixer.mixin(AreaChart);module.exports=AreaChart;},{"../series/areaChartSeries":51,"./axisTypeMixer":5,"./chartBase":7,"./lineTypeMixer":11,"./verticalTypeMixer":13}],5:[function(require,module,exports){var renderUtil=require("../helpers/renderUtil"),ChartBase=require("./chartBase"),Axis=require("../axes/axis"),Plot=require("../plots/plot"),Legend=require("../legends/legend"),GroupTypeCustomEvent=require("../customEvents/groupTypeCustomEvent"),PointTypeCustomEvent=require("../customEvents/pointTypeCustomEvent"),Tooltip=require("../tooltips/tooltip"),GroupTooltip=require("../tooltips/groupTooltip");var axisTypeMixer={_addAxisComponents:function(axisNames,aligned){tui.util.forEach(axisNames,function(name){var axisParams={aligned:aligned};if(name==="rightYAxis"){axisParams.componentType="yAxis";axisParams.index=1;}this._addComponent(name,Axis,axisParams);},this);},_addSeriesComponents:function(serieses,options){var seriesBaseParams={libType:options.libType,chartType:options.chartType,userEvent:this.userEvent,componentType:"series"};tui.util.forEach(serieses,function(series){var seriesParams=tui.util.extend(seriesBaseParams,series.data);this._addComponent(series.name,series.SeriesClass,seriesParams);},this);},_addTooltipComponent:function(){var TooltipClass=this.hasGroupTooltip?GroupTooltip:Tooltip;this._addComponent("tooltip",TooltipClass,this._makeTooltipData());},_addLegendComponent:function(chartTypes,chartType,legendOptions){if(!legendOptions||!legendOptions.hidden){this._addComponent("legend",Legend,{chartTypes:chartTypes,chartType:chartType,userEvent:this.userEvent});}},_addComponentsForAxisType:function(params){var options=this.options,aligned=!!params.aligned;this._addComponent("plot",Plot);this._addAxisComponents(params.axes,aligned);this._addLegendComponent(params.seriesChartTypes,params.chartType,this.options.legend);this._addSeriesComponents(params.serieses,options);this._addTooltipComponent(options.chartType);},_getLimitMap:function(axesData,chartTypes,isVertical){var limitMap={},yAxisLimit=axesData.yAxis.limit;limitMap[chartTypes[0]]=isVertical?yAxisLimit:axesData.xAxis.limit;if(chartTypes.length>1){limitMap[chartTypes[1]]=axesData.rightYAxis?axesData.rightYAxis.limit:yAxisLimit;}return limitMap;},_makeSeriesDataForRendering:function(axesData,chartTypes,isVertical){var limitMap=this._getLimitMap(axesData,chartTypes,isVertical),aligned=axesData.xAxis.aligned,seriesData={};tui.util.forEachArray(chartTypes,function(chartType){seriesData[chartType+"Series"]={limit:limitMap[chartType],aligned:aligned};});return seriesData;},_makeRenderingData:function(bounds){var axesData,optionChartTypes,seriesData;axesData=this._makeAxesData(bounds);optionChartTypes=this.chartTypes||[this.chartType];seriesData=this._makeSeriesDataForRendering(axesData,optionChartTypes,this.isVertical);return tui.util.extend({plot:{vTickCount:axesData.yAxis.validTickCount,hTickCount:axesData.xAxis.validTickCount},customEvent:{tickCount:this.isVertical?axesData.xAxis.tickCount:axesData.yAxis.tickCount},tooltip:{chartDimension:bounds.chart.dimension}},seriesData,axesData);},_addCustomEventComponentForGroupTooltip:function(){this._addComponent("customEvent",GroupTypeCustomEvent,{chartType:this.chartType,isVertical:this.isVertical});},_addCustomEventComponentForNormalTooltip:function(){this._addComponent("customEvent",PointTypeCustomEvent,{chartType:this.chartType,isVertical:this.isVertical});},_addCustomEventComponent:function(){if(this.hasGroupTooltip){this._addCustomEventComponentForGroupTooltip();}else{this._addCustomEventComponentForNormalTooltip();}},_attachCustomEventForGroupTooltip:function(){var customEvent=this.componentMap.customEvent,tooltip=this.componentMap.tooltip,serieses=tui.util.filter(this.componentMap,function(component){return component.componentType==="series";});customEvent.on("showGroupTooltip",tooltip.onShow,tooltip);customEvent.on("hideGroupTooltip",tooltip.onHide,tooltip);tui.util.forEach(serieses,function(series){if(series.onShowGroupTooltipLine){tooltip.on("showGroupTooltipLine",series.onShowGroupTooltipLine,series);tooltip.on("hideGroupTooltipLine",series.onHideGroupTooltipLine,series);}tooltip.on("showGroupAnimation",series.onShowGroupAnimation,series);tooltip.on("hideGroupAnimation",series.onHideGroupAnimation,series);},this);},_attachCustomEventForNormalTooltip:function(){var customEvent=this.componentMap.customEvent,tooltip=this.componentMap.tooltip,serieses=tui.util.filter(this.componentMap,function(component){return component.componentType==="series";});customEvent.on("showTooltip",tooltip.onShow,tooltip);customEvent.on("hideTooltip",tooltip.onHide,tooltip);tui.util.forEach(serieses,function(series){if(series.onShowAnimation){tooltip.on(renderUtil.makeCustomEventName("show",series.chartType,"animation"),series.onShowAnimation,series);tooltip.on(renderUtil.makeCustomEventName("hide",series.chartType,"animation"),series.onHideAnimation,series);}},this);},_attachCustomEventForSeriesSelection:function(){var customEvent=this.componentMap.customEvent,serieses=tui.util.filter(this.componentMap,function(component){return component.componentType==="series";});tui.util.forEach(serieses,function(series){customEvent.on(renderUtil.makeCustomEventName("select",series.chartType,"series"),series.onSelectSeries,series);customEvent.on(renderUtil.makeCustomEventName("unselect",series.chartType,"series"),series.onUnselectSeries,series);},this);},_attachCustomEvent:function(){ChartBase.prototype._attachCustomEvent.call(this);if(this.hasGroupTooltip){this._attachCustomEventForGroupTooltip();}else{this._attachCustomEventForNormalTooltip();}this._attachCustomEventForSeriesSelection();},mixin:function(func){tui.util.extend(func.prototype,this);}};module.exports=axisTypeMixer;},{"../axes/axis":1,"../customEvents/groupTypeCustomEvent":19,"../customEvents/pointTypeCustomEvent":20,"../helpers/renderUtil":33,"../legends/legend":36,"../plots/plot":39,"../tooltips/groupTooltip":61,"../tooltips/tooltip":63,"./chartBase":7}],6:[function(require,module,exports){var ChartBase=require("./chartBase"),axisTypeMixer=require("./axisTypeMixer"),axisDataMaker=require("../helpers/axisDataMaker"),Series=require("../series/barChartSeries");var BarChart=tui.util.defineClass(ChartBase,{init:function(rawData,theme,options){this.className="tui-bar-chart";ChartBase.call(this,{rawData:rawData,theme:theme,options:options,hasAxes:true});this._addComponents(options.chartType);},_makeAxesData:function(bounds){var options=this.options,xAxisData=axisDataMaker.makeValueAxisData({values:this.dataProcessor.getGroupValues(),seriesDimension:bounds.series.dimension,stacked:options.series&&options.series.stacked||"",chartType:options.chartType,formatFunctions:this.dataProcessor.getFormatFunctions(),options:options.xAxis}),yAxisData=axisDataMaker.makeLabelAxisData({labels:this.dataProcessor.getCategories(),isVertical:true});return{xAxis:xAxisData,yAxis:yAxisData};},_addComponents:function(chartType){this._addComponentsForAxisType({axes:["yAxis","xAxis"],chartType:chartType,serieses:[{name:"barSeries",SeriesClass:Series}]});}});axisTypeMixer.mixin(BarChart);module.exports=BarChart;},{"../helpers/axisDataMaker":26,"../series/barChartSeries":52,"./axisTypeMixer":5,"./chartBase":7}],7:[function(require,module,exports){var dom=require("../helpers/domHandler"),renderUtil=require("../helpers/renderUtil"),DataProcessor=require("../helpers/dataProcessor"),boundsMaker=require("../helpers/boundsMaker"),UserEventListener=require("../helpers/userEventListener");var ChartBase=tui.util.defineClass({init:function(params){this.dataProcessor=this._createDataProcessor(params);this.orgWholeLegendData=this.dataProcessor.getWholeLegendData();this.components=[];this.componentMap={};this.rawData=params.rawData;this.theme=params.theme;this.options=params.options;this.hasAxes=params.hasAxes;this.isVertical=!!params.isVertical;this.hasGroupTooltip=params.options.tooltip&&params.options.tooltip.grouped;this.userEvent=new UserEventListener();this.chartType=this.options.chartType;this._addCustomEventComponent();},_createDataProcessor:function(params){var dataProcessor=new DataProcessor(params.rawData),options=params.options;dataProcessor.process(params.rawData,options,params.seriesChartTypes);return dataProcessor;},_makeTooltipData:function(){return{isVertical:this.isVertical,userEvent:this.userEvent,chartType:this.chartType};},_addCustomEventComponent:function(){},_addComponent:function(name,Component,params){var commonParams={},options,index,theme,component,componentType;params=params||{};componentType=params.componentType||name;options=params.options||this.options[componentType];theme=params.theme||this.theme[componentType];index=params.index||0;commonParams.theme=tui.util.isArray(theme)?theme[index]:theme;commonParams.options=tui.util.isArray(options)?options[index]:options||{};commonParams.dataProcessor=this.dataProcessor;params=tui.util.extend(params,commonParams);component=new Component(params);this.components.push({name:name,componentType:componentType,instance:component});this.componentMap[name]=component;},_makeBounds:function(boundParams){return boundsMaker.make(this.dataProcessor,tui.util.extend({theme:this.theme,options:this.options,hasAxes:this.hasAxes,isVertical:this.isVertical,chartType:this.chartType},boundParams));},_makeRenderingData:function(){},_attachCustomEvent:function(){var legend=this.componentMap.legend,serieses=tui.util.filter(this.componentMap,function(component){return component.componentType==="series";});if(legend){legend.on("changeCheckedLegends",this.onChangeCheckedLegends,this);tui.util.forEach(serieses,function(series){legend.on(renderUtil.makeCustomEventName("select",series.chartType,"legend"),series.onSelectLegend,series);},this);}},render:function(boundParams){var el=dom.create("DIV",this.className),bounds,renderingData;dom.addClass(el,"tui-chart");bounds=this._makeBounds(boundParams);renderingData=this._makeRenderingData(bounds);this._renderTitle(el);renderUtil.renderDimension(el,bounds.chart.dimension);renderUtil.renderBackground(el,this.theme.chart.background);renderUtil.renderFontFamily(el,this.theme.chart.fontFamily);this._renderComponents(bounds,renderingData,"render",el);this._sendSeriesData();this._attachCustomEvent();this.chartContainer=el;return el;},_filterRawData:function(rawData,checkedLegends){var cloneData=JSON.parse(JSON.stringify(rawData));if(tui.util.isArray(cloneData.series)){cloneData.series=tui.util.filter(cloneData.series,function(series,index){return checkedLegends[index];});}else{tui.util.forEach(cloneData.series,function(serieses,chartType){if(!checkedLegends[chartType]){cloneData.series[chartType]=[];}else{if(checkedLegends[chartType].length){cloneData.series[chartType]=tui.util.filter(serieses,function(series,index){return checkedLegends[chartType][index];});}}});}return cloneData;},_makeRerenderingData:function(renderingData,checkedLegends){var tooltipData=this._makeTooltipData(),serieses=tui.util.filter(this.componentMap,function(component){return component.componentType==="series";});renderingData.tooltip=tui.util.extend({checkedLegends:checkedLegends},tooltipData,renderingData.tooltip);tui.util.forEach(serieses,function(series,seriesName){renderingData[seriesName]=tui.util.extend({checkedLegends:checkedLegends[series.chartType]||checkedLegends},renderingData[seriesName]);});return renderingData;},_rerender:function(checkedLegends,rawData,boundsParams){var newWholeLegendData,bounds,renderingData;rawData=rawData||this._filterRawData(this.dataProcessor.getRawData(),checkedLegends);this.dataProcessor.process(rawData,this.options,this.seriesChartTypes);newWholeLegendData=this.dataProcessor.getWholeLegendData();this.dataProcessor.setWholeLegendData(this.orgWholeLegendData);bounds=this._makeBounds(boundsParams);this.dataProcessor.setWholeLegendData(newWholeLegendData);renderingData=this._makeRenderingData(bounds);renderingData=this._makeRerenderingData(renderingData,checkedLegends);this._renderComponents(bounds,renderingData,"rerender");this._sendSeriesData(boundsParams);},onChangeCheckedLegends:function(checkedLegends,rawData,boundsParams){this._rerender(checkedLegends,rawData,boundsParams);},_renderTitle:function(el){var chartOptions=this.options.chart||{},elTitle=renderUtil.renderTitle(chartOptions.title,this.theme.title,"tui-chart-title");dom.append(el,elTitle);},_renderComponents:function(bounds,renderingData,funcName,container){var elements=tui.util.map(this.components,function(component){var bound=bounds[component.name]||bounds[component.componentType],data=renderingData[component.name],element=null;if(bound&&component.instance[funcName]){element=component.instance[funcName](bound,data);}return element;},this);if(container){dom.append(container,elements);}},_sendSeriesData:function(){var seriesInfos,chartTypes;if(!this.componentMap.customEvent){return;}chartTypes=this.chartTypes||[this.chartType];seriesInfos=tui.util.map(chartTypes,function(chartType){var component=this.componentMap[chartType+"Series"]||this.componentMap.series;return{chartType:chartType,data:component.getSeriesData()};},this);this.componentMap.customEvent.initCustomEventData(seriesInfos);},_makeAnimationEventName:function(chartType,prefix){return prefix+chartType.substring(0,1).toUpperCase()+chartType.substring(1)+"Animation";},animateChart:function(){tui.util.forEachArray(this.components,function(component){if(component.instance.animateComponent){component.instance.animateComponent();}});},on:function(eventName,func){this.userEvent.register(eventName,func);},_updateDimension:function(dimension){var updated=false;if(dimension.width){this.options.chart.width=dimension.width;updated=true;}if(dimension.height){this.options.chart.height=dimension.height;updated=true;}return updated;},resize:function(dimension){var updated,bounds,renderingData;if(!dimension){return;}updated=this._updateDimension(dimension);if(!updated){return;}bounds=this._makeBounds();renderingData=this._makeRenderingData(bounds);renderUtil.renderDimension(this.chartContainer,bounds.chart.dimension);this._renderComponents(bounds,renderingData,"resize");this._sendSeriesData();},setTooltipAlign:function(align){this.componentMap.tooltip.setAlign(align);},setTooltipPosition:function(position){this.componentMap.tooltip.setPosition(position);},resetTooltipAlign:function(){this.componentMap.tooltip.resetAlign();},resetTooltipPosition:function(){this.componentMap.tooltip.resetPosition();}});module.exports=ChartBase;},{"../helpers/boundsMaker":27,"../helpers/dataProcessor":29,"../helpers/domHandler":30,"../helpers/renderUtil":33,"../helpers/userEventListener":35}],8:[function(require,module,exports){var ChartBase=require("./chartBase"),axisTypeMixer=require("./axisTypeMixer"),verticalTypeMixer=require("./verticalTypeMixer"),Series=require("../series/columnChartSeries");var ColumnChart=tui.util.defineClass(ChartBase,{init:function(rawData,theme,options){this.className="tui-column-chart";ChartBase.call(this,{rawData:rawData,theme:theme,options:options,hasAxes:true,isVertical:true});this._addComponents(options.chartType);},_addComponents:function(chartType){this._addComponentsForAxisType({axes:["yAxis","xAxis"],chartType:chartType,serieses:[{name:"columnSeries",SeriesClass:Series,data:{allowNegativeTooltip:true}}]});}});axisTypeMixer.mixin(ColumnChart);verticalTypeMixer.mixin(ColumnChart);module.exports=ColumnChart;},{"../series/columnChartSeries":54,"./axisTypeMixer":5,"./chartBase":7,"./verticalTypeMixer":13}],9:[function(require,module,exports){var calculator=require("../helpers/calculator"),ChartBase=require("./chartBase"),axisTypeMixer=require("./axisTypeMixer"),axisDataMaker=require("../helpers/axisDataMaker"),defaultTheme=require("../themes/defaultTheme"),ColumnChartSeries=require("../series/columnChartSeries"),LineChartSeries=require("../series/lineChartSeries");var ComboChart=tui.util.defineClass(ChartBase,{init:function(rawData,theme,options){var chartTypesMap;this.className="tui-combo-chart";chartTypesMap=this._makeChartTypesMap(rawData.series,options.yAxis);tui.util.extend(this,chartTypesMap);ChartBase.call(this,{rawData:rawData,theme:theme,options:options,hasAxes:true,isVertical:true,seriesChartTypes:chartTypesMap.seriesChartTypes});this.yAxisOptionsMap=this._makeYAxisOptionsMap(chartTypesMap.chartTypes,options.yAxis);this._addComponents(chartTypesMap);},_makeYAxisOptionsMap:function(chartTypes,yAxisOptions){var optionMap={};yAxisOptions=yAxisOptions||{};tui.util.forEachArray(chartTypes,function(chartType,index){optionMap[chartType]=yAxisOptions[index]||yAxisOptions;});return optionMap;},_makeChartTypesMap:function(rawSeriesData,yAxisOption){var seriesChartTypes=tui.util.keys(rawSeriesData).sort(),optionChartTypes=this._getYAxisOptionChartTypes(seriesChartTypes,yAxisOption),chartTypes=optionChartTypes.length?optionChartTypes:seriesChartTypes,validChartTypes=tui.util.filter(optionChartTypes,function(chartType){return rawSeriesData[chartType].length;}),chartTypesMap;if(validChartTypes.length===1){chartTypesMap={chartTypes:validChartTypes,seriesChartTypes:validChartTypes,optionChartTypes:!optionChartTypes.length?optionChartTypes:validChartTypes};}else{chartTypesMap={chartTypes:chartTypes,seriesChartTypes:seriesChartTypes,optionChartTypes:optionChartTypes};}return chartTypesMap;},_makeOptionsMap:function(chartTypes){var optionsMap={};tui.util.forEachArray(chartTypes,function(chartType){optionsMap[chartType]=this.options.series&&this.options.series[chartType];},this);return optionsMap;},_makeThemeMap:function(chartTypes){var theme=this.theme,themeMap={},colorCount=0;tui.util.forEachArray(chartTypes,function(chartType){var chartTheme=JSON.parse(JSON.stringify(theme)),removedColors;if(chartTheme.series[chartType]){themeMap[chartType]=chartTheme.series[chartType];}else{if(!chartTheme.series.colors){themeMap[chartType]=JSON.parse(JSON.stringify(defaultTheme.series));themeMap[chartType].label.fontFamily=chartTheme.chart.fontFamily;}else{removedColors=chartTheme.series.colors.splice(0,colorCount);chartTheme.series.colors=chartTheme.series.colors.concat(removedColors);themeMap[chartType]=chartTheme.series;colorCount+=this.dataProcessor.getLegendLabels(chartType).length;}}},this);return themeMap;},_makeSerieses:function(chartTypes){var seriesClasses={column:ColumnChartSeries,line:LineChartSeries},optionsMap=this._makeOptionsMap(chartTypes),themeMap=this._makeThemeMap(chartTypes),serieses;serieses=tui.util.map(chartTypes,function(chartType){var data={allowNegativeTooltip:true,componentType:"series",chartType:chartType,options:optionsMap[chartType],theme:themeMap[chartType]};return{name:chartType+"Series",SeriesClass:seriesClasses[chartType],data:data};});return serieses;},_addComponents:function(chartTypesMap){var axes=["yAxis","xAxis"],serieses=this._makeSerieses(chartTypesMap.seriesChartTypes);if(chartTypesMap.optionChartTypes.length){axes.push("rightYAxis");}this._addComponentsForAxisType({axes:axes,seriesChartTypes:chartTypesMap.seriesChartTypes,chartType:this.options.chartType,serieses:serieses});},_getYAxisOptionChartTypes:function(chartTypes,yAxisOptions){var resultChartTypes=chartTypes.slice(),isReverse=false,optionChartTypes;yAxisOptions=yAxisOptions?[].concat(yAxisOptions):[];if(yAxisOptions.length===1&&!yAxisOptions[0].chartType){resultChartTypes=[];}else{if(yAxisOptions.length){optionChartTypes=tui.util.map(yAxisOptions,function(option){return option.chartType;});tui.util.forEachArray(optionChartTypes,function(chartType,index){isReverse=isReverse||(chartType&&resultChartTypes[index]!==chartType||false);});if(isReverse){resultChartTypes.reverse();}}}return resultChartTypes;},_makeYAxisData:function(params){var index=params.index,chartType=params.chartTypes[index],options=params.options,yAxisOptions=this.yAxisOptionsMap[chartType],yAxisValues,seriesOption,yAxisData;if(!chartType){return{};}if(params.isOneYAxis){yAxisValues=this.dataProcessor.getWholeGroupValues();}else{yAxisValues=this.dataProcessor.getGroupValues(chartType);}seriesOption=options.series&&options.series[chartType]||options.series;yAxisData=axisDataMaker.makeValueAxisData(tui.util.extend({values:yAxisValues,stacked:seriesOption&&seriesOption.stacked||"",options:yAxisOptions,chartType:chartType,seriesDimension:params.seriesDimension,formatFunctions:this.dataProcessor.getFormatFunctions(),isVertical:true},params.addParams));yAxisData.options=yAxisOptions;return yAxisData;},_makeAxesData:function(bounds){var options=this.options,formatFunctions=this.dataProcessor.getFormatFunctions(),yAxisParams={seriesDimension:bounds.series.dimension,chartTypes:this.chartTypes,isOneYAxis:!this.optionChartTypes.length,options:options},xAxisData=axisDataMaker.makeLabelAxisData({labels:this.dataProcessor.getCategories()}),yAxisData=this._makeYAxisData(tui.util.extend({index:0},yAxisParams)),axesData,rightYAxisData;axesData={yAxis:yAxisData,xAxis:xAxisData};if(!yAxisParams.isOneYAxis){rightYAxisData=this._makeYAxisData(tui.util.extend({index:1,addParams:{isPositionRight:true}},yAxisParams));if(yAxisData.tickCount<rightYAxisData.tickCount){this._increaseYAxisTickCount(rightYAxisData.tickCount-yAxisData.tickCount,yAxisData,formatFunctions);}else{if(yAxisData.tickCount>rightYAxisData.tickCount){this._increaseYAxisTickCount(yAxisData.tickCount-rightYAxisData.tickCount,rightYAxisData,formatFunctions);}}rightYAxisData.aligned=xAxisData.aligned;axesData.rightYAxis=rightYAxisData;}return axesData;},_increaseYAxisTickCount:function(increaseTickCount,toData,formatFunctions){toData.limit.max+=toData.step*increaseTickCount;toData.labels=axisDataMaker.formatLabels(calculator.makeLabelsFromLimit(toData.limit,toData.step),formatFunctions);toData.tickCount+=increaseTickCount;toData.validTickCount+=increaseTickCount;},render:function(){return ChartBase.prototype.render.call(this,{optionChartTypes:this.optionChartTypes});},onChangeCheckedLegends:function(checkedLegends){var rawData=this._filterRawData(this.rawData,checkedLegends),chartTypesMap=this._makeChartTypesMap(rawData.series,this.options.yAxis);tui.util.extend(this,chartTypesMap);ChartBase.prototype.onChangeCheckedLegends.call(this,checkedLegends,rawData,chartTypesMap);}});axisTypeMixer.mixin(ComboChart);module.exports=ComboChart;},{"../helpers/axisDataMaker":26,"../helpers/calculator":28,"../series/columnChartSeries":54,"../series/lineChartSeries":55,"../themes/defaultTheme":60,"./axisTypeMixer":5,"./chartBase":7}],10:[function(require,module,exports){var ChartBase=require("./chartBase"),lineTypeMixer=require("./lineTypeMixer"),axisTypeMixer=require("./axisTypeMixer"),verticalTypeMixer=require("./verticalTypeMixer"),Series=require("../series/lineChartSeries");var LineChart=tui.util.defineClass(ChartBase,{className:"tui-line-chart",Series:Series,init:function(){this._lineTypeInit.apply(this,arguments);}});axisTypeMixer.mixin(LineChart);verticalTypeMixer.mixin(LineChart);lineTypeMixer.mixin(LineChart);module.exports=LineChart;},{"../series/lineChartSeries":55,"./axisTypeMixer":5,"./chartBase":7,"./lineTypeMixer":11,"./verticalTypeMixer":13}],11:[function(require,module,exports){var ChartBase=require("./chartBase"),AreaTypeCustomEvent=require("../customEvents/areaTypeCustomEvent");var lineTypeMixer={_lineTypeInit:function(rawData,theme,options){ChartBase.call(this,{rawData:rawData,theme:theme,options:options,hasAxes:true,isVertical:true});this._addComponents(options.chartType);},_addCustomEventComponentForNormalTooltip:function(){this._addComponent("customEvent",AreaTypeCustomEvent,{chartType:this.chartType,isVertical:this.isVertical});},_addComponents:function(chartType){this._addComponentsForAxisType({axes:["yAxis","xAxis"],chartType:chartType,serieses:[{name:this.options.chartType+"Series",SeriesClass:this.Series}]});},render:function(){return ChartBase.prototype.render.apply(this,arguments);},mixin:function(func){tui.util.extend(func.prototype,this);}};module.exports=lineTypeMixer;},{"../customEvents/areaTypeCustomEvent":16,"./chartBase":7}],12:[function(require,module,exports){var ChartBase=require("./chartBase"),chartConst=require("../const"),predicate=require("../helpers/predicate"),renderUtil=require("../helpers/renderUtil"),Legend=require("../legends/legend"),Tooltip=require("../tooltips/tooltip"),Series=require("../series/pieChartSeries");var PieChart=tui.util.defineClass(ChartBase,{init:function(rawData,theme,options){this.className="tui-pie-chart";options.tooltip=options.tooltip||{};if(!options.tooltip.align){options.tooltip.align=chartConst.TOOLTIP_DEFAULT_ALIGN_OPTION;}ChartBase.call(this,{rawData:rawData,theme:theme,options:options});this._addComponents(theme.chart.background,options);},_addComponents:function(chartBackground,options){var legendAlign,isPieLegendType;options.legend=options.legend||{};legendAlign=options.legend&&options.legend.align;isPieLegendType=predicate.isPieLegendAlign(legendAlign);if(!isPieLegendType&&!options.legend.hidden){this._addComponent("legend",Legend,{chartType:options.chartType,userEvent:this.userEvent});}this._addComponent("tooltip",Tooltip,this._makeTooltipData());this._addComponent("pieSeries",Series,{libType:options.libType,chartType:options.chartType,componentType:"series",chartBackground:chartBackground,userEvent:this.userEvent,legendAlign:isPieLegendType&&!options.legend.hidden?legendAlign:null});},_makeRenderingData:function(bounds){return{tooltip:{seriesPosition:bounds.series.position,chartDimension:bounds.chart.dimension},pieSeries:{chartWidth:bounds.chart.dimension.width}};},_attachCustomEvent:function(){var tooltip,serieses;ChartBase.prototype._attachCustomEvent.call(this);tooltip=this.componentMap.tooltip;serieses=tui.util.filter(this.componentMap,function(component){return component.componentType==="series";});tui.util.forEach(serieses,function(series){series.on("showTooltip",tooltip.onShow,tooltip);series.on("hideTooltip",tooltip.onHide,tooltip);if(series.onShowAnimation){tooltip.on(renderUtil.makeCustomEventName("show",series.chartType,"animation"),series.onShowAnimation,series);tooltip.on(renderUtil.makeCustomEventName("hide",series.chartType,"animation"),series.onHideAnimation,series);}},this);}});module.exports=PieChart;},{"../const":15,"../helpers/predicate":32,"../helpers/renderUtil":33,"../legends/legend":36,"../series/pieChartSeries":57,"../tooltips/tooltip":63,"./chartBase":7}],13:[function(require,module,exports){var axisDataMaker=require("../helpers/axisDataMaker"),predicate=require("../helpers/predicate");var verticalTypeMixer={_makeAxesData:function(bounds){var options=this.options,aligned=predicate.isLineTypeChart(options.chartType),xAxisData=axisDataMaker.makeLabelAxisData({labels:this.dataProcessor.getCategories(),aligned:aligned,options:options.xAxis}),yAxisData=axisDataMaker.makeValueAxisData({values:this.dataProcessor.getGroupValues(),seriesDimension:bounds.series.dimension,stacked:options.series&&options.series.stacked||"",chartType:options.chartType,formatFunctions:this.dataProcessor.getFormatFunctions(),options:options.yAxis,isVertical:true,aligned:aligned});return{xAxis:xAxisData,yAxis:yAxisData};},mixin:function(func){tui.util.extend(func.prototype,this);}};module.exports=verticalTypeMixer;},{"../helpers/axisDataMaker":26,"../helpers/predicate":32}],14:[function(require,module,exports){var min=function(arr,condition,context){var result,minValue,rest;if(!condition){condition=function(item){return item;};}result=arr[0];minValue=condition.call(context,result);rest=arr.slice(1);tui.util.forEachArray(rest,function(item){var compareValue=condition.call(context,item);if(compareValue<minValue){minValue=compareValue;result=item;}});return result;};var max=function(arr,condition,context){var result,maxValue,rest;if(!condition){condition=function(item){return item;};}result=arr[0];maxValue=condition.call(context,result);rest=arr.slice(1);tui.util.forEachArray(rest,function(item){var compareValue=condition.call(context,item);if(compareValue>maxValue){maxValue=compareValue;result=item;}});return result;};var any=function(arr,condition){var result=false;tui.util.forEachArray(arr,function(item){if(condition(item)){result=true;return false;}});return result;};var all=function(arr,condition){var result=true;tui.util.forEachArray(arr,function(item){if(!condition(item)){result=false;return false;}});return result;};var pivot=function(arr2d){var result=[];tui.util.forEachArray(arr2d,function(arr){tui.util.forEachArray(arr,function(value,index){if(!result[index]){result[index]=[];}result[index].push(value);});});return result;};var lengthAfterPoint=function(value){var valueArr=(value+"").split(".");return valueArr.length===2?valueArr[1].length:0;};var findMultipleNum=function(){var args=[].slice.call(arguments),underPointLens=tui.util.map(args,function(value){return tui.util.lengthAfterPoint(value);}),underPointLen=tui.util.max(underPointLens),multipleNum=Math.pow(10,underPointLen);return multipleNum;};var mod=function(target,modNum){var multipleNum=tui.util.findMultipleNum(modNum);return((target*multipleNum)%(modNum*multipleNum))/multipleNum;};var addition=function(a,b){var multipleNum=findMultipleNum(a,b);return((a*multipleNum)+(b*multipleNum))/multipleNum;};var subtraction=function(a,b){var multipleNum=findMultipleNum(a,b);return((a*multipleNum)-(b*multipleNum))/multipleNum;};var multiplication=function(a,b){var multipleNum=findMultipleNum(a,b);return((a*multipleNum)*(b*multipleNum))/(multipleNum*multipleNum);};var division=function(a,b){var multipleNum=findMultipleNum(a,b);return(a*multipleNum)/(b*multipleNum);};var sum=function(values){var copyArr=values.slice();copyArr.unshift(0);return tui.util.reduce(copyArr,function(base,add){return parseFloat(base)+parseFloat(add);});};var properCase=function(str){return str.substring(0,1).toUpperCase()+str.substring(1);};tui.util.min=min;tui.util.max=max;tui.util.any=any;tui.util.all=all;tui.util.pivot=pivot;tui.util.lengthAfterPoint=lengthAfterPoint;tui.util.mod=mod;tui.util.findMultipleNum=findMultipleNum;tui.util.addition=addition;tui.util.subtraction=subtraction;tui.util.multiplication=multiplication;tui.util.division=division;tui.util.sum=sum;tui.util.properCase=properCase;var aps=Array.prototype.slice;function debounce(fn,delay){var timer,args;delay=delay||0;function debounced(){args=aps.call(arguments);window.clearTimeout(timer);timer=window.setTimeout(function(){fn.apply(null,args);},delay);}return debounced;}function throttle(fn,interval){var base,_timestamp=tui.util.timestamp,debounced,isLeading=true,stamp,args,tick=function(_args){fn.apply(null,_args);base=null;};interval=interval||0;debounced=tui.util.debounce(tick,interval);function throttled(){args=aps.call(arguments);if(isLeading){tick(args);isLeading=false;return;}stamp=_timestamp();base=base||stamp;debounced(args);if((stamp-base)>=interval){tick(args);}}function reset(){isLeading=true;base=null;}throttled.reset=reset;return throttled;}tui.util.debounce=debounce;tui.util.throttle=throttle;},{}],15:[function(require,module,exports){var chartConst={CLASS_NAME_LEGEND_LABEL:"tui-chart-legend-label",CLASS_NAME_LEGEND_CHECKBOX:"tui-chart-legend-checkbox",CLASS_NAME_SERIES_LABEL:"tui-chart-series-label",CLASS_NAME_SERIES_LEGEND:"tui-chart-series-legend",CHART_TYPE_BAR:"bar",CHART_TYPE_COLUMN:"column",CHART_TYPE_LINE:"line",CHART_TYPE_AREA:"area",CHART_TYPE_COMBO:"combo",CHART_TYPE_PIE:"pie",CHART_PADDING:10,CHART_DEFAULT_WIDTH:500,CHART_DEFAULT_HEIGHT:400,HIDDEN_WIDTH:1,TEXT_PADDING:2,SERIES_EXPAND_SIZE:10,SERIES_LABEL_PADDING:5,DEFAULT_TITLE_FONT_SIZE:14,DEFAULT_AXIS_TITLE_FONT_SIZE:10,DEFAULT_LABEL_FONT_SIZE:12,DEFAULT_SERIES_LABEL_FONT_SIZE:11,DEFAULT_PLUGIN:"raphael",DEFAULT_TICK_COLOR:"black",DEFAULT_THEME_NAME:"default",STACKED_NORMAL_TYPE:"normal",STACKED_PERCENT_TYPE:"percent",EMPTY_AXIS_LABEL:"",ANGLE_85:85,ANGLE_90:90,ANGLE_360:360,RAD:Math.PI/180,LEGEND_ALIGN_OUTER:"outer",LEGEND_ALIGN_CENTER:"center",LEGEND_ALIGN_TOP:"top",LEGEND_ALIGN_BOTTOM:"bottom",LEGEND_ALIGN_LEFT:"left",SERIES_OUTER_LABEL_PADDING:20,PIE_GRAPH_DEFAULT_RATE:0.8,PIE_GRAPH_SMALL_RATE:0.65,DOT_RADIUS:4,YAXIS_PROPS:["tickColor","title","label"],SERIES_PROPS:["label","colors","borderColor","singleColors","selectionColor"],TITLE_AREA_WIDTH_PADDING:20,XAXIS_LABEL_TOP_MARGIN:10,V_LABEL_RIGHT_PADDING:10,TOOLTIP_PREFIX:"tui-chart-tooltip",MIN_PIXEL_TYPE_STEP_SIZE:40,MAX_PIXEL_TYPE_STEP_SIZE:60,PERCENT_STACKED_TICK_INFO:{limit:{min:0,max:100},step:25,tickCount:5,labels:[0,25,50,75,100]},NEGATIVE_PERCENT_STACKED_TICK_INFO:{limit:{min:-100,max:100},step:25,tickCount:9,labels:[-100,-75,-50,-25,0,25,50,75,100]},TITLE_PADDING:20,LEGEND_AREA_PADDING:10,LEGEND_CHECKBOX_WIDTH:20,LEGEND_RECT_WIDTH:12,LEGEND_LABEL_LEFT_PADDING:5,AXIS_LABEL_PADDING:7,DEGREE_CANDIDATES:[25,45,65,85],XAXIS_LABEL_COMPARE_MARGIN:20,XAXIS_LABEL_GUTTER:2,AXIS_STANDARD_MULTIPLE_NUMS:[1,2,5,10],LABEL_PADDING_TOP:2,LINE_MARGIN_TOP:5,TOOLTIP_GAP:5,TOOLTIP_DIRECTION_FORWARD:"forword",TOOLTIP_DIRECTION_CENTER:"center",TOOLTIP_DIRECTION_BACKWARD:"backword",TOOLTIP_DEFAULT_ALIGN_OPTION:"center top",TOOLTIP_DEFAULT_HORIZONTAL_ALIGN_OPTION:"right middle",TOOLTIP_DEFAULT_GROUP_ALIGN_OPTION:"right middle",TOOLTIP_DEFAULT_GROUP_HORIZONTAL_ALIGN_OPTION:"center bottom",HIDE_DELAY:200};module.exports=chartConst;},{}],16:[function(require,module,exports){var CustomEventBase=require("./customEventBase"),AreaTypeDataModel=require("./areaTypeDataModel"),chartConst=require("../const");var AreaTypeCustomEvent=tui.util.defineClass(CustomEventBase,{init:function(params){CustomEventBase.call(this,params);this.prevFoundData=null;},initCustomEventData:function(seriesInfos){var seriesInfo=seriesInfos[0];this.dataModel=new AreaTypeDataModel(seriesInfo);CustomEventBase.prototype.initCustomEventData.call(this,seriesInfos);},_onMousemove:function(e){var elTarget=e.target||e.srcElement,bound=elTarget.getBoundingClientRect(),layerX=e.clientX-chartConst.SERIES_EXPAND_SIZE-bound.left,layerY=e.clientY-bound.top,groupIndex=this.tickBaseDataModel.findIndex(layerX),foundData=this.dataModel.findData(groupIndex,layerY);if(!this._isChanged(this.prevFoundData,foundData)){return;}if(foundData){this.fire("showTooltip",foundData);}else{if(this.prevFoundData){this.fire("hideTooltip",this.prevFoundData);}}this.prevFoundData=foundData;},_onMouseout:function(){if(this.prevFoundData){this.fire("hideTooltip",this.prevFoundData);this.prevFoundData=null;}}});module.exports=AreaTypeCustomEvent;},{"../const":15,"./areaTypeDataModel":17,"./customEventBase":18}],17:[function(require,module,exports){var AreaTypeDataModel=tui.util.defineClass({init:function(seriesInfo){this.data=this._makeData(seriesInfo.data.groupPositions,seriesInfo.chartType);},_makeData:function(groupPositions,chartType){groupPositions=tui.util.pivot(groupPositions);return tui.util.map(groupPositions,function(positions,groupIndex){return tui.util.map(positions,function(position,index){return{chartType:chartType,indexes:{groupIndex:groupIndex,index:index},bound:position};});});},findData:function(groupIndex,layerY){var result=null,min=10000;tui.util.forEach(this.data[groupIndex],function(data){var diff=Math.abs(layerY-data.bound.top);if(min>diff){min=diff;result=data;}});return result;}});module.exports=AreaTypeDataModel;},{}],18:[function(require,module,exports){var eventListener=require("../helpers/eventListener"),TickBaseDataModel=require("./tickBaseDataModel"),PointTypeDataModel=require("./pointTypeDataModel"),chartConst=require("../const"),dom=require("../helpers/domHandler"),renderUtil=require("../helpers/renderUtil");var CustomEventBase=tui.util.defineClass({init:function(params){this.chartType=params.chartType;this.isVertical=params.isVertical;this.dataProcessor=params.dataProcessor;},_renderCustomEventArea:function(customEventContainer,bound,data){var expandedBound;this.bound=bound;this.tickBaseDataModel=new TickBaseDataModel(bound.dimension,data.tickCount,this.chartType,this.isVertical);expandedBound=renderUtil.expandBound(bound);renderUtil.renderDimension(customEventContainer,expandedBound.dimension);renderUtil.renderPosition(customEventContainer,expandedBound.position);},render:function(bound,data){var el=dom.create("DIV","tui-chart-series-custom-event-area");this._renderCustomEventArea(el,bound,data);this.attachEvent(el);this.customEventContainer=el;return el;},initCustomEventData:function(seriesInfos){this.pointTypeDataModel=new PointTypeDataModel(seriesInfos);},rerender:function(bound,data){this._renderCustomEventArea(this.customEventContainer,bound,data);},resize:function(bound,data){this.rerender(bound,data);},_isChanged:function(prev,cur){return !prev||!cur||prev.chartType!==cur.chartType||prev.indexes.groupIndex!==cur.indexes.groupIndex||prev.indexes.index!==cur.indexes.index;},_findPointTypeData:function(elTarget,clientX,clientY){var bound=elTarget.getBoundingClientRect(),layerX=clientX-bound.left,layerY=clientY-bound.top,groupIndex=this.tickBaseDataModel.findIndex(this.isVertical?layerX:layerY);return this.pointTypeDataModel.findData(groupIndex,layerX+chartConst.SERIES_EXPAND_SIZE,layerY);},_unselectSelectedData:function(){var eventName=renderUtil.makeCustomEventName("unselect",this.selectedData.chartType,"series");this.fire(eventName,this.selectedData);delete this.selectedData;},_onClick:function(e){var elTarget=e.target||e.srcElement,clientX=e.clientX-chartConst.SERIES_EXPAND_SIZE,foundData=this._findPointTypeData(elTarget,clientX,e.clientY);if(!this._isChanged(this.selectedData,foundData)){this._unselectSelectedData();}else{if(foundData){if(this.selectedData){this._unselectSelectedData();}this.fire(renderUtil.makeCustomEventName("select",foundData.chartType,"series"),foundData);this.selectedData=foundData;}}},_onMousemove:function(){},_onMouseout:function(){},attachEvent:function(el){eventListener.bindEvent("click",el,tui.util.bind(this._onClick,this));eventListener.bindEvent("mousemove",el,tui.util.bind(this._onMousemove,this));eventListener.bindEvent("mouseout",el,tui.util.bind(this._onMouseout,this));}});tui.util.CustomEvents.mixin(CustomEventBase);module.exports=CustomEventBase;},{"../const":15,"../helpers/domHandler":30,"../helpers/eventListener":31,"../helpers/renderUtil":33,"./pointTypeDataModel":21,"./tickBaseDataModel":22}],19:[function(require,module,exports){var CustomEventBase=require("./customEventBase"),chartConst=require("../const");var GroupTypeCustomEvent=tui.util.defineClass(CustomEventBase,{init:function(){CustomEventBase.apply(this,arguments);},_isOutPosition:function(layerX,layerY){var dimension=this.bound.dimension;return layerX<0||layerX>dimension.width||layerY<0||layerY>dimension.height;},_onMousemove:function(e){var elTarget=e.target||e.srcElement,bound=elTarget.getBoundingClientRect(),layerX=e.clientX-chartConst.SERIES_EXPAND_SIZE-bound.left,layerY=e.clientY-chartConst.SERIES_EXPAND_SIZE-bound.top,index=-1;if(!this._isOutPosition(layerX,layerY)){index=this.tickBaseDataModel.findIndex(this.isVertical?layerX:layerY);}if(index===-1){this._onMouseout();}else{if(this.prevIndex!==index){this.prevIndex=index;this.fire("showGroupTooltip",{index:index,range:this.tickBaseDataModel.makeRange(index,this.chartType),size:this.bound.dimension[this.isVertical?"height":"width"],isVertical:this.isVertical});}}},_onMouseout:function(){if(!tui.util.isUndefined(this.prevIndex)){this.fire("hideGroupTooltip",this.prevIndex);delete this.prevIndex;}}});module.exports=GroupTypeCustomEvent;},{"../const":15,"./customEventBase":18}],20:[function(require,module,exports){var chartConst=require("../const"),CustomEventBase=require("./customEventBase");var PointTypeCustomEven=tui.util.defineClass(CustomEventBase,{init:function(){CustomEventBase.apply(this,arguments);this.prevFoundData=null;},_onMousemove:function(e){var elTarget=e.target||e.srcElement,clientX=e.clientX-chartConst.SERIES_EXPAND_SIZE,foundData=this._findPointTypeData(elTarget,clientX,e.clientY);if(!this._isChanged(this.prevFoundData,foundData)){return;}if(this.prevFoundData){this.fire("hideTooltip",this.prevFoundData);}if(foundData){this.fire("showTooltip",foundData);}this.prevFoundData=foundData;},_onMouseout:function(){if(this.prevFoundData){this.fire("hideTooltip",this.prevFoundData);this.prevFoundData=null;}}});module.exports=PointTypeCustomEven;},{"../const":15,"./customEventBase":18}],21:[function(require,module,exports){var chartConst=require("../const"),predicate=require("../helpers/predicate");var PointTypeDataModel=tui.util.defineClass({init:function(seriesInfos){this.data=this._makeData(seriesInfos);},_makeRectTypeCoordinateData:function(groupBounds,chartType){return tui.util.map(groupBounds,function(bounds,groupIndex){return tui.util.map(bounds,function(_bound,index){var bound;if(!_bound){return null;}bound=_bound.end;return{sendData:{chartType:chartType,indexes:{groupIndex:groupIndex,index:index},allowNegativeTooltip:true,bound:bound},bound:{left:bound.left,top:bound.top,right:bound.left+bound.width,bottom:bound.top+bound.height}};});});},_makeDotTypeCoordinateData:function(groupPositions,chartType){if(!groupPositions){return[];}return tui.util.map(tui.util.pivot(groupPositions),function(positions,groupIndex){return tui.util.map(positions,function(position,index){return{sendData:{chartType:chartType,indexes:{groupIndex:groupIndex,index:index},bound:position},bound:{left:position.left-chartConst.DOT_RADIUS,top:position.top-chartConst.DOT_RADIUS,right:position.left+chartConst.DOT_RADIUS,bottom:position.top+chartConst.DOT_RADIUS}};});});},_joinData:function(groupData){var results=[];tui.util.forEachArray(groupData,function(coordData){tui.util.forEachArray(coordData,function(data,index){if(!results[index]){results[index]=[];}results[index]=results[index].concat(data);});});return results;},_makeData:function(seriesInfos){var coordinateData;seriesInfos.reverse();coordinateData=tui.util.map(seriesInfos,function(info){var result;if(predicate.isLineTypeChart(info.chartType)){result=this._makeDotTypeCoordinateData(info.data.groupPositions,info.chartType);}else{result=this._makeRectTypeCoordinateData(info.data.groupBounds,info.chartType);}return result;},this);return this._joinData(coordinateData);},findData:function(groupIndex,layerX,layerY){var min=10000,result=null,candidates;if(groupIndex===-1){return result;}candidates=tui.util.filter(this.data[groupIndex],function(data){var bound=data&&data.bound;return bound&&bound.left<=layerX&&bound.right>=layerX&&bound.top<=layerY&&bound.bottom>=layerY;});tui.util.forEachArray(candidates,function(data){var diff=Math.abs(layerY-data.sendData.bound.top);if(min>diff){min=diff;result=data.sendData;}});return result;}});module.exports=PointTypeDataModel;},{"../const":15,"../helpers/predicate":32}],22:[function(require,module,exports){var predicate=require("../helpers/predicate");var TickBaseDataModel=tui.util.defineClass({init:function(dimension,tickCount,chartType,isVertical){this.data=this._makeData(dimension,tickCount,chartType,isVertical);},_makeLineTypeData:function(width,tickCount){var tickInterval=(width+1)/(tickCount-1),halfInterval=tickInterval/2,ranges=tui.util.map(tui.util.range(0,tickCount),function(index){return{min:index*tickInterval-halfInterval,max:index*tickInterval+halfInterval};});ranges[tickCount-1].max-=1;return ranges;},_makeNormalData:function(size,tickCount){var len=tickCount-1,tickInterval=size/len,prev=0;return tui.util.map(tui.util.range(0,len),function(index){var max=tui.util.min([size,(index+1)*tickInterval]),limit={min:prev,max:max};prev=max;return limit;});},_makeData:function(dimension,tickCount,chartType,isVertical){var sizeType=isVertical?"width":"height",data;if(predicate.isLineTypeChart(chartType)){data=this._makeLineTypeData(dimension[sizeType],tickCount);}else{data=this._makeNormalData(dimension[sizeType],tickCount);}return data;},findIndex:function(pointValue){var foundIndex=-1;tui.util.forEachArray(this.data,function(limit,index){if(limit.min<pointValue&&limit.max>=pointValue){foundIndex=index;return false;}});return foundIndex;},getLength:function(){return this.data.length;},makeRange:function(index,chartType){var limit=this.data[index],range,center;if(predicate.isLineTypeChart(chartType)){center=parseInt(limit.max-(limit.max-limit.min)/2,10);range={start:center,end:center};}else{range={start:limit.min,end:limit.max};}return range;}});module.exports=TickBaseDataModel;},{"../helpers/predicate":32}],23:[function(require,module,exports){var charts={},factory={get:function(chartType,data,theme,options){var Chart=charts[chartType],chart;if(!Chart){throw new Error("Not exist "+chartType+" chart.");}chart=new Chart(data,theme,options);return chart;},register:function(chartType,ChartClass){charts[chartType]=ChartClass;}};module.exports=factory;},{}],24:[function(require,module,exports){var plugins={},factory={get:function(libType,chartType){var plugin=plugins[libType],Renderer,renderer;if(!plugin){throw new Error("Not exist "+libType+" plugin.");}Renderer=plugin[chartType];if(!Renderer){throw new Error("Not exist "+chartType+" chart renderer.");}renderer=new Renderer();return renderer;},register:function(libType,plugin){plugins[libType]=plugin;}};module.exports=factory;},{}],25:[function(require,module,exports){var chartConst=require("../const"),defaultTheme=require("../themes/defaultTheme");var themes={};module.exports={get:function(themeName){var theme=themes[themeName];if(!theme){throw new Error("Not exist "+themeName+" theme.");}return theme;},register:function(themeName,theme){var targetItems;theme=JSON.parse(JSON.stringify(theme));if(themeName!==chartConst.DEFAULT_THEME_NAME){theme=this._initTheme(theme);}targetItems=this._getInheritTargetThemeItems(theme);this._inheritThemeFont(theme,targetItems);this._copyColorInfo(theme);themes[themeName]=theme;},_initTheme:function(theme){var cloneTheme=JSON.parse(JSON.stringify(defaultTheme)),newTheme;this._concatDefaultColors(theme,cloneTheme.series.colors);newTheme=this._overwriteTheme(theme,cloneTheme);newTheme=this._copyProperty({propName:"yAxis",fromTheme:theme,toTheme:newTheme,rejectionProps:chartConst.YAXIS_PROPS});newTheme=this._copyProperty({propName:"series",fromTheme:theme,toTheme:newTheme,rejectionProps:chartConst.SERIES_PROPS});return newTheme;},_filterChartTypes:function(target,rejectionProps){var result;if(!target){return[];}result=tui.util.filter(target,function(item,name){return tui.util.inArray(name,rejectionProps)===-1;});return result;},_concatColors:function(theme,seriesColors){if(theme.colors){theme.colors=theme.colors.concat(seriesColors);}if(theme.singleColors){theme.singleColors=theme.singleColors.concat(seriesColors);}},_concatDefaultColors:function(theme,seriesColors){var chartTypes;if(!theme.series){return;}chartTypes=this._filterChartTypes(theme.series,chartConst.SERIES_PROPS);if(!tui.util.keys(chartTypes).length){this._concatColors(theme.series,seriesColors);}else{tui.util.forEach(chartTypes,function(item){this._concatColors(item,seriesColors);},this);}},_overwriteTheme:function(from,to){tui.util.forEach(to,function(item,key){var fromItem=from[key];if(!fromItem){return;}if(tui.util.isArray(fromItem)){to[key]=fromItem.slice();}else{if(tui.util.isObject(fromItem)){this._overwriteTheme(fromItem,item);}else{to[key]=fromItem;}}},this);return to;},_copyProperty:function(params){var chartTypes;if(!params.toTheme[params.propName]){return params.toTheme;}chartTypes=this._filterChartTypes(params.fromTheme[params.propName],params.rejectionProps);if(tui.util.keys(chartTypes).length){tui.util.forEach(chartTypes,function(item,key){var cloneTheme=JSON.parse(JSON.stringify(defaultTheme[params.propName]));params.fromTheme[params.propName][key]=this._overwriteTheme(item,cloneTheme);},this);params.toTheme[params.propName]=params.fromTheme[params.propName];}return params.toTheme;},_copyColorInfoToOther:function(seriesTheme,legendTheme,colors){legendTheme.colors=colors||seriesTheme.colors;if(seriesTheme.singleColors){legendTheme.singleColors=seriesTheme.singleColors;}if(seriesTheme.borderColor){legendTheme.borderColor=seriesTheme.borderColor;}if(seriesTheme.selectionColor){legendTheme.selectionColor=seriesTheme.selectionColor;}},_getInheritTargetThemeItems:function(theme){var items=[theme.title,theme.xAxis.title,theme.xAxis.label,theme.legend.label],yAxisChartTypeThems=this._filterChartTypes(theme.yAxis,chartConst.YAXIS_PROPS),seriesChartTypeThemes=this._filterChartTypes(theme.series,chartConst.SERIES_PROPS);if(!tui.util.keys(yAxisChartTypeThems).length){items.push(theme.yAxis.title);items.push(theme.yAxis.label);}else{tui.util.forEach(yAxisChartTypeThems,function(chatTypeTheme){items.push(chatTypeTheme.title);items.push(chatTypeTheme.label);});}if(!tui.util.keys(seriesChartTypeThemes).length){items.push(theme.series.label);}else{tui.util.forEach(seriesChartTypeThemes,function(chatTypeTheme){items.push(chatTypeTheme.label);});}return items;},_inheritThemeFont:function(theme,targetItems){var baseFont=theme.chart.fontFamily;tui.util.forEachArray(targetItems,function(item){if(!item.fontFamily){item.fontFamily=baseFont;}});},_copyColorInfo:function(theme){var seriesChartTypes=this._filterChartTypes(theme.series,chartConst.SERIES_PROPS);if(!tui.util.keys(seriesChartTypes).length){this._copyColorInfoToOther(theme.series,theme.legend);this._copyColorInfoToOther(theme.series,theme.tooltip);}else{tui.util.forEach(seriesChartTypes,function(item,chartType){theme.legend[chartType]={};theme.tooltip[chartType]={};this._copyColorInfoToOther(item,theme.legend[chartType],item.colors||theme.legend.colors);this._copyColorInfoToOther(item,theme.tooltip[chartType],item.colors||theme.tooltip.colors);delete theme.legend.colors;delete theme.tooltip.colors;},this);}}};},{"../const":15,"../themes/defaultTheme":60}],26:[function(require,module,exports){var chartConst=require("../const"),predicate=require("./predicate"),calculator=require("./calculator"),renderUtil=require("./renderUtil");var abs=Math.abs,concat=Array.prototype.concat;var axisDataMaker={_makeLabels:function(labels,labelInterval){var lastIndex;if(!labelInterval){return labels;}lastIndex=labels.length-1;return tui.util.map(labels,function(label,index){if(index>0&&index<lastIndex&&(index%labelInterval)>0){label=chartConst.EMPTY_AXIS_LABEL;}return label;});},makeLabelAxisData:function(params){var tickCount=params.labels.length,options=params.options||{};if(!params.aligned){tickCount+=1;}return{labels:this._makeLabels(params.labels,options.labelInterval),tickCount:tickCount,validTickCount:0,isLabelAxis:true,isVertical:!!params.isVertical,aligned:!!params.aligned};},makeValueAxisData:function(params){var options=params.options||{},isVertical=!!params.isVertical,isPositionRight=!!params.isPositionRight,isAllowedStackedOption=predicate.isAllowedStackedOption(params.chartType),formatFunctions=params.formatFunctions,tickInfo;if(isAllowedStackedOption&&predicate.isPercentStacked(params.stacked)){if(calculator.sumMinusValues(concat.apply([],params.values))<0){tickInfo=chartConst.NEGATIVE_PERCENT_STACKED_TICK_INFO;}else{tickInfo=chartConst.PERCENT_STACKED_TICK_INFO;}formatFunctions=[function(value){return value+"%";}];}else{tickInfo=this._getTickInfo({values:this._makeBaseValues(params.values,isAllowedStackedOption,params.stacked),seriesDimension:params.seriesDimension,isVertical:isVertical,isPositionRight:isPositionRight,chartType:params.chartType},options);}return{labels:this.formatLabels(tickInfo.labels,formatFunctions),tickCount:tickInfo.tickCount,validTickCount:tickInfo.tickCount,limit:tickInfo.limit,step:tickInfo.step,isVertical:isVertical,isPositionRight:isPositionRight,aligned:!!params.aligned};},_makeBaseValues:function(groupValues,isAllowedStackedOption,stacked){if(isAllowedStackedOption&&predicate.isNormalStacked(stacked)){groupValues=tui.util.map(groupValues,function(values){var plusSum=calculator.sumPlusValues(values),minusSum=calculator.sumMinusValues(values);return[plusSum,minusSum];},this);}return concat.apply([],groupValues);},_getBaseSize:function(dimension,isVertical){var baseSize;if(isVertical){baseSize=dimension.height;}else{baseSize=dimension.width;}return baseSize;},_getCandidateTickCounts:function(chartDimension,isVertical){var baseSize=this._getBaseSize(chartDimension,isVertical),start=tui.util.max([3,parseInt(baseSize/chartConst.MAX_PIXEL_TYPE_STEP_SIZE,10)]),end=tui.util.max([start,parseInt(baseSize/chartConst.MIN_PIXEL_TYPE_STEP_SIZE,10)])+1,tickCounts=tui.util.range(start,end);return tickCounts;},_getComparingValue:function(min,max,tickInfo){var diffMax=abs(tickInfo.limit.max-max),diffMin=abs(min-tickInfo.limit.min),weight=Math.pow(10,tui.util.lengthAfterPoint(tickInfo.step));return(diffMax+diffMin)*weight;},_selectTickInfo:function(min,max,candidates){var getComparingValue=tui.util.bind(this._getComparingValue,this,min,max),tickInfo=tui.util.min(candidates,getComparingValue);return tickInfo;},_getTickInfo:function(params,options){var min=tui.util.min(params.values),max=tui.util.max(params.values),intTypeInfo,tickCounts,candidates,tickInfo;if(min===0&&max===0){max=5;}intTypeInfo=this._makeIntegerTypeInfo(min,max,options);tickCounts=params.tickCount?[params.tickCount]:this._getCandidateTickCounts(params.seriesDimension,params.isVertical);candidates=this._getCandidateTickInfos({min:intTypeInfo.min,max:intTypeInfo.max,tickCounts:tickCounts,chartType:params.chartType},intTypeInfo.options);tickInfo=this._selectTickInfo(intTypeInfo.min,intTypeInfo.max,candidates);tickInfo=this._revertOriginalTypeTickInfo(tickInfo,intTypeInfo.divideNum);return tickInfo;},_makeIntegerTypeInfo:function(min,max,options){var multipleNum,changedOptions;if(abs(min)>=1||abs(max)>=1){return{min:min,max:max,options:options,divideNum:1};}multipleNum=tui.util.findMultipleNum(min,max);changedOptions={};if(!tui.util.isUndefined(options.min)){changedOptions.min=options.min*multipleNum;}if(!tui.util.isUndefined(options.max)){changedOptions.max=options.max*multipleNum;}return{min:min*multipleNum,max:max*multipleNum,options:changedOptions,divideNum:multipleNum};},_revertOriginalTypeTickInfo:function(tickInfo,divideNum){if(divideNum===1){return tickInfo;}tickInfo.step=tui.util.division(tickInfo.step,divideNum);tickInfo.limit.min=tui.util.division(tickInfo.limit.min,divideNum);tickInfo.limit.max=tui.util.division(tickInfo.limit.max,divideNum);tickInfo.labels=tui.util.map(tickInfo.labels,function(label){return tui.util.division(label,divideNum);});return tickInfo;},_normalizeStep:function(step){return calculator.normalizeAxisNumber(step);},_minimizeTickLimit:function(params){var tickInfo=params.tickInfo,ticks=tui.util.range(1,tickInfo.tickCount),options=params.options,step=tickInfo.step,limit=tickInfo.limit,tickMax=limit.max,tickMin=limit.min,isUndefinedMin=tui.util.isUndefined(options.min),isUndefinedMax=tui.util.isUndefined(options.max),labels;tui.util.forEachArray(ticks,function(tickIndex){var curStep=(step*tickIndex),curMin=tickMin+curStep,curMax=tickMax-curStep;if(params.userMin<=curMin&&params.userMax>=curMax){return false;}if((isUndefinedMin&&params.userMin>curMin)||(!isUndefinedMin&&options.min>=curMin)){limit.min=curMin;}if((isUndefinedMin&&params.userMax<curMax)||(!isUndefinedMax&&options.max<=curMax)){limit.max=curMax;}});labels=calculator.makeLabelsFromLimit(limit,step);tickInfo.labels=labels;tickInfo.step=step;tickInfo.tickCount=labels.length;return tickInfo;},_divideTickStep:function(tickInfo,orgTickCount){var step=tickInfo.step,limit=tickInfo.limit,tickCount=tickInfo.tickCount;if((step%2===0)&&abs(orgTickCount-((tickCount*2)-1))<=abs(orgTickCount-tickCount)){step=step/2;tickInfo.labels=calculator.makeLabelsFromLimit(limit,step);tickInfo.tickCount=tickInfo.labels.length;tickInfo.step=step;}return tickInfo;},_makeTickInfo:function(params){var limit=params.limit,step,tickInfo;step=calculator.calculateStepFromLimit(limit,params.tickCount);step=this._normalizeStep(step);limit=this.normalizeLimit(limit,step,params.tickCount);limit.min=this._addMinPadding({min:limit.min,step:step,userMin:params.userMin,minOption:params.options.min,chartType:params.chartType});limit.max=this._addMaxPadding({max:limit.max,step:step,userMax:params.userMax,maxOption:params.options.max,chartType:params.chartType});tickInfo=this._minimizeTickLimit({userMin:params.userMin,userMax:params.userMax,tickInfo:{limit:limit,step:step,tickCount:params.tickCount},options:params.options});tickInfo=this._divideTickStep(tickInfo,params.tickCount);return tickInfo;},_addMinPadding:function(params){var min=params.min;if((!predicate.isLineChart(params.chartType)&&params.userMin>=0)||!tui.util.isUndefined(params.minOption)){return min;}if(params.min===params.userMin){min-=params.step;}return min;},_addMaxPadding:function(params){var max=params.max;if((!predicate.isLineChart(params.chartType)&&params.userMax<=0)||!tui.util.isUndefined(params.maxOption)){return max;}if(tui.util.isUndefined(params.maxOption)&&(params.max===params.userMax)){max+=params.step;}return max;},_normalizeMin:function(min,step){var mod=tui.util.mod(min,step),normalized;if(mod===0){normalized=min;}else{normalized=tui.util.subtraction(min,(min>=0?mod:step+mod));}return normalized;},_makeNormalizedMax:function(limit,step,tickCount){var minMaxDiff=tui.util.multiplication(step,tickCount-1),normalizedMax=tui.util.addition(limit.min,minMaxDiff),maxDiff=limit.max-normalizedMax,modDiff,divideDiff;if(maxDiff>0){modDiff=maxDiff%step;divideDiff=Math.floor(maxDiff/step);normalizedMax+=step*(modDiff>0?divideDiff+1:divideDiff);}return normalizedMax;},normalizeLimit:function(limit,step,tickCount){limit.min=this._normalizeMin(limit.min,step);limit.max=this._makeNormalizedMax(limit,step,tickCount);return limit;},_getCandidateTickInfos:function(params,options){var userMin=params.min,userMax=params.max,min=params.min,max=params.max,limit,candidates;limit=this._makeBaseLimit(min,max,options);candidates=tui.util.map(params.tickCounts,function(tickCount){return this._makeTickInfo({tickCount:tickCount,limit:tui.util.extend({},limit),userMin:userMin,userMax:userMax,chartType:params.chartType,options:options});},this);return candidates;},_makeBaseLimit:function(min,max,options){var isMinus=false,tmpMin,limit;if(min===max){if(min>0){min=0;}else{max=0;}return{min:min,max:max};}if(min<0&&max<=0){isMinus=true;tmpMin=min;min=-max;max=-tmpMin;}limit=calculator.calculateLimit(min,max);if(isMinus){tmpMin=limit.min;limit.min=-limit.max;limit.max=-tmpMin;}limit.min=!tui.util.isUndefined(options.min)?options.min:limit.min;limit.max=!tui.util.isUndefined(options.max)?options.max:limit.max;return limit;},formatLabels:function(labels,formatFunctions){var result;if(!formatFunctions||!formatFunctions.length){return labels;}result=tui.util.map(labels,function(label){return renderUtil.formatValue(label,formatFunctions);});return result;}};module.exports=axisDataMaker;},{"../const":15,"./calculator":28,"./predicate":32,"./renderUtil":33}],27:[function(require,module,exports){var chartConst=require("../const"),calculator=require("./calculator"),predicate=require("./predicate"),renderUtil=require("./renderUtil");var concat=Array.prototype.concat;var boundsMaker={_getValueAxisMaxLabel:function(chartType){var values=predicate.isComboChart(chartType)?this.dataProcessor.getWholeGroupValues():this.dataProcessor.getGroupValues(chartType),formatFunctions=this.dataProcessor.getFormatFunctions(),flattenValues=concat.apply([],values),min=tui.util.min(flattenValues),max=tui.util.max(flattenValues),limit=calculator.calculateLimit(min,max),minLabel=calculator.normalizeAxisNumber(limit.min),maxLabel=calculator.normalizeAxisNumber(limit.max);maxLabel=(minLabel+"").length>(maxLabel+"").length?minLabel:maxLabel;return renderUtil.formatValue(maxLabel,formatFunctions);},_getXAxisHeight:function(options,labels,theme){var title=options&&options.title,titleAreaHeight=renderUtil.getRenderedLabelHeight(title,theme.title)+chartConst.TITLE_PADDING,height=renderUtil.getRenderedLabelsMaxHeight(labels,theme.label)+titleAreaHeight;return height;},_getYAxisWidth:function(options,labels,theme,index){var title="",titleAreaWidth,width;if(options){options=[].concat(options);title=options[index||0].title;}titleAreaWidth=renderUtil.getRenderedLabelHeight(title,theme.title)+chartConst.TITLE_PADDING;width=renderUtil.getRenderedLabelsMaxWidth(labels,theme.label)+titleAreaWidth+chartConst.AXIS_LABEL_PADDING;return width;},_getRightYAxisWidth:function(params){var chartTypes=params.chartTypes||[],len=chartTypes.length,width=0,index,chartType,theme,label;if(len>1){index=len-1;chartType=chartTypes[index];theme=params.theme[chartType]||params.theme;label=this._getValueAxisMaxLabel(chartType);width=this._getYAxisWidth(params.options,[label],theme,index);}return width;},_makeAxesDimension:function(params){var yAxisWidth=0,xAxisHeight=0,rightYAxisWidth=0,axesLabelInfo,chartType;if(params.hasAxes){axesLabelInfo=params.axesLabelInfo;chartType=params.optionChartTypes&&params.optionChartTypes[0]||"";yAxisWidth=this._getYAxisWidth(params.options.yAxis,axesLabelInfo.yAxis,params.theme.yAxis[chartType]||params.theme.yAxis);xAxisHeight=this._getXAxisHeight(params.options.xAxis,axesLabelInfo.xAxis,params.theme.xAxis);rightYAxisWidth=this._getRightYAxisWidth({chartTypes:params.optionChartTypes,theme:params.theme.yAxis,options:params.options.yAxis});}return{yAxis:{width:yAxisWidth},rightYAxis:{width:rightYAxisWidth},xAxis:{height:xAxisHeight}};},_isSkippedLegendSizing:function(chartType,options){return(predicate.isPieChart(chartType)&&predicate.isPieLegendAlign(options.align))||options.hidden;},_makeLegendWidth:function(labelWidth){return labelWidth+this.legendCheckboxWidth+chartConst.LEGEND_RECT_WIDTH+chartConst.LEGEND_LABEL_LEFT_PADDING+chartConst.LEGEND_AREA_PADDING;},_calculateLegendsWidthSum:function(labels,labelTheme){return tui.util.sum(tui.util.map(labels,function(label){var labelWidth=this._makeLegendWidth(renderUtil.getRenderedLabelWidth(label,labelTheme));return labelWidth;},this));},_divideLegendLabels:function(labels,count){var limitCount=Math.round(labels.length/count),results=[],temp=[];tui.util.forEachArray(labels,function(label){if(temp.length<limitCount){temp.push(label);}else{results.push(temp);temp=[label];}});if(temp.length){results.push(temp);}return results;},_makeDividedLabelsAndMaxLineWidth:function(labels,chartWidth,labelTheme){var divideCount=1,maxLineWidth=0,prevMaxWidth=0,dividedLabels,prevLabels;do{dividedLabels=this._divideLegendLabels(labels,divideCount);maxLineWidth=Math.max.apply(null,tui.util.map(dividedLabels,function(_labels){return this._calculateLegendsWidthSum(_labels,labelTheme);},this));if(prevMaxWidth===maxLineWidth){dividedLabels=prevLabels;break;}prevMaxWidth=maxLineWidth;prevLabels=dividedLabels;divideCount+=1;}while(maxLineWidth>=chartWidth);return{dividedLabels:dividedLabels,maxLineWidth:maxLineWidth};},_calculateHorizontalLegendHeight:function(dividedLabels,labelTheme){return tui.util.sum(tui.util.map(dividedLabels,function(labels){return renderUtil.getRenderedLabelsMaxHeight(labels,labelTheme);},this));},_getWholeLegendLabels:function(){return tui.util.map(this.dataProcessor.getWholeLegendData(),function(item){return item.label;});},_makeHorizontalLegendDimension:function(chartWidth,labelTheme){var labels=this._getWholeLegendLabels(),labelsAndMaxWidth=this._makeDividedLabelsAndMaxLineWidth(labels,chartWidth,labelTheme),legendHeight=this._calculateHorizontalLegendHeight(labelsAndMaxWidth.dividedLabels,labelTheme)+(chartConst.LEGEND_AREA_PADDING*2);return{width:labelsAndMaxWidth.maxLineWidth,height:legendHeight};},_makeVerticalLegendDimension:function(labelTheme){var labels=this._getWholeLegendLabels(),maxLabelWidth=renderUtil.getRenderedLabelsMaxWidth(labels,labelTheme),legendWidth=this._makeLegendWidth(maxLabelWidth);return{width:legendWidth,height:0};},_makeLegendDimension:function(labelTheme,chartType,chartWidth,legendOptions){var dimension={};legendOptions=legendOptions||{};if(this._isSkippedLegendSizing(chartType,legendOptions)){dimension.width=0;}else{if(predicate.isHorizontalLegend(legendOptions.align)){dimension=this._makeHorizontalLegendDimension(chartWidth,labelTheme);}else{dimension=this._makeVerticalLegendDimension(labelTheme);}}return dimension;},_makeSeriesDimension:function(params){var axesDimension=params.axesDimension,legendOption=params.legendOption||{},legendWidth=0,legendHeight=0,rightAreaWidth,bottomAreaWidth,width,height;if(predicate.isHorizontalLegend(legendOption.align)){legendHeight=params.legendDimension.height;}else{legendWidth=params.legendDimension.width;}rightAreaWidth=legendWidth+axesDimension.rightYAxis.width;bottomAreaWidth=legendHeight+axesDimension.xAxis.height;width=params.chartDimension.width-(chartConst.CHART_PADDING*2)-axesDimension.yAxis.width-rightAreaWidth;height=params.chartDimension.height-(chartConst.CHART_PADDING*2)-params.titleHeight-bottomAreaWidth;return{width:width,height:height};},_makeChartDimension:function(chartOptions){return{width:chartOptions.width||chartConst.CHART_DEFAULT_WIDTH,height:chartOptions.height||chartConst.CHART_DEFAULT_HEIGHT};},_makeTitleDimension:function(title,theme){return{height:renderUtil.getRenderedLabelHeight(title,theme)+chartConst.TITLE_PADDING};},_makePlotDimension:function(seriesDimension){return{width:seriesDimension.width+chartConst.HIDDEN_WIDTH,height:seriesDimension.height+chartConst.HIDDEN_WIDTH};},_makeComponentsDimensions:function(params){var chartOptions=params.options.chart||{},chartDimension=this._makeChartDimension(chartOptions),titleDimension=this._makeTitleDimension(chartOptions.title,params.theme.title),axesDimension=this._makeAxesDimension(params),legendDimension=this._makeLegendDimension(params.theme.legend.label,params.options.chartType,chartDimension.width,params.options.legend),seriesDimension=this._makeSeriesDimension({chartDimension:chartDimension,axesDimension:axesDimension,legendDimension:legendDimension,titleHeight:titleDimension.height,legendOption:params.options.legend});return tui.util.extend({chart:chartDimension,title:titleDimension,series:seriesDimension,plot:this._makePlotDimension(seriesDimension),legend:legendDimension},axesDimension);},_makeBasicBound:function(dimension,top,left){return{dimension:dimension,position:{top:top,left:left}};},_makeYAxisBound:function(dimensions,top,leftLegendWidth){return{dimension:{width:dimensions.yAxis.width,height:dimensions.plot.height},position:{top:top,left:this.chartLeftPadding+leftLegendWidth}};},_makeXAxisBound:function(dimensions,top,left,rotationInfo){var bound={dimension:{width:dimensions.plot.width,height:dimensions.xAxis.height},position:{top:top+dimensions.series.height,left:left-chartConst.HIDDEN_WIDTH}};if(rotationInfo){bound.degree=rotationInfo.degree;}return bound;},_makeRightYAxisBound:function(dimensions,top,leftLegendWidth){return{dimension:{width:dimensions.rightYAxis.width,height:dimensions.plot.height},position:{top:top,left:this.chartLeftPadding+dimensions.yAxis.width+dimensions.series.width+leftLegendWidth-chartConst.HIDDEN_WIDTH}};},_makeAxesBounds:function(params){var bounds;if(!params.hasAxes){return{};}bounds={plot:this._makeBasicBound(params.dimensions.plot,params.top,params.left-chartConst.HIDDEN_WIDTH),yAxis:this._makeYAxisBound(params.dimensions,params.top,params.leftLegendWidth),xAxis:this._makeXAxisBound(params.dimensions,params.top,params.left,params.rotationInfo)};bounds.rightYAxis=this._makeRightYAxisBound(params.dimensions,params.top,params.leftLegendWidth);return bounds;},_makeChartBound:function(dimension){return{dimension:dimension};},_makeLegendBound:function(dimensions,legendOption){var top=dimensions.title.height,left;if(predicate.isBottomLegendAlign(legendOption.align)){top+=dimensions.series.height+dimensions.xAxis.height+chartConst.LEGEND_AREA_PADDING;}if(predicate.isHorizontalLegend(legendOption.align)){left=(dimensions.chart.width-dimensions.legend.width)/2;}else{if(predicate.isLeftLegendAlign(legendOption.align)){left=0;}else{left=dimensions.yAxis.width+dimensions.series.width+dimensions.rightYAxis.width+this.chartLeftPadding;}}return{dimension:dimensions.legend,position:{top:top,left:left}};},_makeAxesLabelInfo:function(params){var chartType,maxValueLabel,labels,yLabels,xLabels;if(!params.hasAxes){return null;}chartType=params.optionChartTypes&&params.optionChartTypes[0]||params.chartType;maxValueLabel=this._getValueAxisMaxLabel(chartType);labels=this.dataProcessor.getCategories();if(params.isVertical){yLabels=[maxValueLabel];xLabels=labels;}else{yLabels=labels;xLabels=[maxValueLabel];}return{xAxis:xLabels,yAxis:yLabels};},_findRotationDegree:function(limitWidth,labelWidth,labelHeight){var foundDegree,halfWidth=labelWidth/2,halfHeight=labelHeight/2;tui.util.forEachArray(chartConst.DEGREE_CANDIDATES,function(degree){var compareWidth=(calculator.calculateAdjacent(degree,halfWidth)+calculator.calculateAdjacent(chartConst.ANGLE_90-degree,halfHeight))*2;foundDegree=degree;if(compareWidth<=limitWidth+chartConst.XAXIS_LABEL_COMPARE_MARGIN){return false;}});return foundDegree;},_makeHorizontalLabelRotationInfo:function(limitWidth,labels,theme){var maxLabelWidth=renderUtil.getRenderedLabelsMaxWidth(labels,theme),degree,labelHeight;if(maxLabelWidth<=limitWidth){return null;}labelHeight=renderUtil.getRenderedLabelsMaxHeight(labels,theme);degree=this._findRotationDegree(limitWidth,maxLabelWidth,labelHeight);return{maxLabelWidth:maxLabelWidth,labelHeight:labelHeight,degree:degree};},_calculateOverflowLeft:function(yAxisWidth,rotationInfo,firstLabel,theme){var degree=rotationInfo.degree,labelHeight=rotationInfo.labelHeight,firstLabelWidth=renderUtil.getRenderedLabelWidth(firstLabel,theme),newLabelWidth=(calculator.calculateAdjacent(degree,firstLabelWidth/2)+calculator.calculateAdjacent(chartConst.ANGLE_90-degree,labelHeight/2))*2,diffLeft=newLabelWidth-yAxisWidth;return diffLeft;},_calculateXAxisRotatedHeight:function(rotationInfo){var degree=rotationInfo.degree,maxLabelWidth=rotationInfo.maxLabelWidth,labelHeight=rotationInfo.labelHeight,axisHeight=(calculator.calculateOpposite(degree,maxLabelWidth/2)+calculator.calculateOpposite(chartConst.ANGLE_90-degree,labelHeight/2))*2;return axisHeight;},_calculateDiffWithRotatedHeight:function(rotationInfo){var rotatedHeight=this._calculateXAxisRotatedHeight(rotationInfo);return rotatedHeight-rotationInfo.labelHeight;},_updateDegree:function(seriesWidth,rotationInfo,labelLength,overflowLeft){var limitWidth,newDegree;if(overflowLeft>0){limitWidth=seriesWidth/labelLength+chartConst.XAXIS_LABEL_GUTTER;newDegree=this._findRotationDegree(limitWidth,rotationInfo.maxLabelWidth,rotationInfo.labelHeight);rotationInfo.degree=newDegree;}},_updateDimensionsWidth:function(dimensions,overflowLeft){if(overflowLeft>0){this.chartLeftPadding+=overflowLeft;dimensions.plot.width-=overflowLeft;dimensions.series.width-=overflowLeft;dimensions.xAxis.width-=overflowLeft;}},_updateDimensionsHeight:function(dimensions,diffHeight){dimensions.plot.height-=diffHeight;dimensions.series.height-=diffHeight;dimensions.xAxis.height+=diffHeight;},_calculateDiffWithMultilineHeight:function(labels,theme,limitWidth){var multilineLabels=this.dataProcessor.getMultilineCategories(limitWidth,theme),normalHeight=renderUtil.getRenderedLabelsMaxHeight(labels,theme),multilineHeight=renderUtil.getRenderedLabelsMaxHeight(multilineLabels,tui.util.extend({cssText:"line-height:1.2;width:"+limitWidth+"px"},theme));return multilineHeight-normalHeight;},_updateDimensionsAndDegree:function(dimensions,rotationInfo,labels,theme,limitWidth){var overflowLeft,diffHeight;if(rotationInfo){overflowLeft=this._calculateOverflowLeft(dimensions.yAxis.width,rotationInfo,labels[0],theme);this._updateDimensionsWidth(dimensions,overflowLeft);this._updateDegree(dimensions.series.width,rotationInfo,labels.length,overflowLeft);diffHeight=this._calculateDiffWithRotatedHeight(rotationInfo);}else{diffHeight=this._calculateDiffWithMultilineHeight(labels,theme,limitWidth);}this._updateDimensionsHeight(dimensions,diffHeight);},_calculateXAxisLabelLimitWidth:function(seriesWidth,labelCount,chartType){var isAlign=predicate.isLineTypeChart(chartType);return seriesWidth/(isAlign?labelCount-1:labelCount);},make:function(dataProcessor,params){var legendOption=params.options.legend||{},xAxisOptions=params.options.xAxis||{},axesLabelInfo,dimensions,limitWidth,rotationInfo,top,left,topLegendHeight,leftLegendWidth,seriesBound,axesBounds,bounds;this.dataProcessor=dataProcessor;this.chartLeftPadding=chartConst.CHART_PADDING;this.legendCheckboxWidth=legendOption.hasCheckbox===false?0:chartConst.LEGEND_CHECKBOX_WIDTH;axesLabelInfo=this._makeAxesLabelInfo(params);dimensions=this._makeComponentsDimensions(tui.util.extend({axesLabelInfo:axesLabelInfo},params));if(params.hasAxes){limitWidth=this._calculateXAxisLabelLimitWidth(dimensions.series.width,axesLabelInfo.xAxis.length,params.options.chartType);if(xAxisOptions.rotation!==false){rotationInfo=this._makeHorizontalLabelRotationInfo(limitWidth,axesLabelInfo.xAxis,params.theme.xAxis.label);}this._updateDimensionsAndDegree(dimensions,rotationInfo,axesLabelInfo.xAxis,params.theme.xAxis.label,limitWidth);}topLegendHeight=predicate.isTopLegendAlign(legendOption.align)?dimensions.legend.height:0;leftLegendWidth=predicate.isLeftLegendAlign(legendOption.align)?dimensions.legend.width:0;top=dimensions.title.height+chartConst.CHART_PADDING+topLegendHeight;left=dimensions.yAxis.width+this.chartLeftPadding+leftLegendWidth;seriesBound=this._makeBasicBound(dimensions.series,top,left);axesBounds=this._makeAxesBounds({hasAxes:params.hasAxes,rotationInfo:rotationInfo,optionChartTypes:params.optionChartTypes,dimensions:dimensions,top:top,left:left,leftLegendWidth:leftLegendWidth});bounds=tui.util.extend({chart:this._makeChartBound(dimensions.chart),series:seriesBound,legend:this._makeLegendBound(dimensions,legendOption),tooltip:this._makeBasicBound(dimensions.series,top-chartConst.SERIES_EXPAND_SIZE,left-chartConst.SERIES_EXPAND_SIZE),customEvent:seriesBound},axesBounds);return bounds;}};module.exports=boundsMaker;},{"../const":15,"./calculator":28,"./predicate":32,"./renderUtil":33}],28:[function(require,module,exports){var chartConst=require("../const"),predicate=require("./predicate");var calculator={calculateLimit:function(min,max){var saveMin=0,limit={},iodValue;if(min<0){saveMin=min;max-=min;min=0;}iodValue=(max-min)/20;limit.max=max+iodValue+saveMin;if(max/6>min){limit.min=0+saveMin;}else{limit.min=min-iodValue+saveMin;}return limit;},normalizeAxisNumber:function(value){var standard=0,flag=1,normalized,mod;if(value===0){return value;}else{if(value<0){flag=-1;}}value*=flag;tui.util.forEachArray(chartConst.AXIS_STANDARD_MULTIPLE_NUMS,function(num){if(value<num){if(num>1){standard=num;}return false;}else{if(num===10){standard=10;}}});if(standard<1){normalized=this.normalizeAxisNumber(value*10)*0.1;}else{mod=tui.util.mod(value,standard);normalized=tui.util.addition(value,(mod>0?standard-mod:0));}return normalized*=flag;},makeTickPixelPositions:function(size,count){var positions=[],pxLimit,pxStep;if(count>0){pxLimit={min:0,max:size-1};pxStep=this.calculateStepFromLimit(pxLimit,count);positions=tui.util.map(tui.util.range(0,size,pxStep),function(position){return Math.round(position);});positions[positions.length-1]=size-1;}return positions;},makeLabelsFromLimit:function(limit,step){var multipleNum=tui.util.findMultipleNum(step),min=limit.min*multipleNum,max=limit.max*multipleNum,labels=tui.util.range(min,max+1,step*multipleNum);labels=tui.util.map(labels,function(label){return label/multipleNum;});return labels;},calculateStepFromLimit:function(limit,count){return(limit.max-limit.min)/(count-1);},calculateAdjacent:function(degree,hypotenuse){return Math.cos(degree*chartConst.RAD)*hypotenuse;},calculateOpposite:function(degree,hypotenuse){return Math.sin(degree*chartConst.RAD)*hypotenuse;},sumPlusValues:function(values){var plusValues=tui.util.filter(values,function(value){return value>0;});return tui.util.sum(plusValues);},sumMinusValues:function(values){var minusValues=tui.util.filter(values,function(value){return value<0;});return tui.util.sum(minusValues);}};module.exports=calculator;},{"../const":15,"./predicate":32}],29:[function(require,module,exports){var predicate=require("./predicate"),renderUtil=require("./renderUtil"),calculator=require("./calculator");var concat=Array.prototype.concat;var DataProcessor=tui.util.defineClass({init:function(rawData){this.orgRawData=rawData;this.data=null;},getRawData:function(){return this.orgRawData;},process:function(rawData,options,seriesChartTypes){var chartType=options.chartType,categories=this._processCategories(rawData.categories),seriesData=rawData.series,values=this._pickValues(seriesData),wholeValues=this._makeWholeValues(values,seriesChartTypes),legendLabels=this._pickLegendLabels(seriesData),wholeLegendData=this._makeWholeLegendData(legendLabels,chartType,seriesChartTypes),format=options.chart&&options.chart.format||"",formatFunctions=this._findFormatFunctions(format),formattedValues=format?this._formatValues(values,formatFunctions):values,wholeFormattedValues=this._makeWholeValues(formattedValues,seriesChartTypes);this.data={categories:categories,values:values,wholeValues:wholeValues,legendLabels:legendLabels,wholeLegendData:wholeLegendData,formatFunctions:formatFunctions,formattedValues:formattedValues,wholeFormattedValues:wholeFormattedValues,percentValues:{}};},getCategories:function(){return this.data.categories;},getCategory:function(index){return this.data.categories[index];},getGroupValues:function(chartType){return this.data.values[chartType]||this.data.values;},getValue:function(groupIndex,index,chartType){var groupValues=this.getGroupValues(chartType);return groupValues[groupIndex][index];},getWholeGroupValues:function(){return this.data.wholeValues;},getLegendLabels:function(chartType){return this.data.legendLabels[chartType]||this.data.legendLabels;},getWholeLegendData:function(){return this.data.wholeLegendData;},setWholeLegendData:function(wholeLegendData){this.data.wholeLegendData=wholeLegendData;},getLegendData:function(index){return this.data.wholeLegendData[index];},getFormatFunctions:function(){return this.data.formatFunctions;},getFormattedGroupValues:function(chartType){return this.data.formattedValues[chartType]||this.data.formattedValues;},getFormattedValue:function(groupIndex,index,chartType){var formattedGroupValues=this.getFormattedGroupValues(chartType);return formattedGroupValues[groupIndex][index];},getFirstFormattedValue:function(chartType){return this.getFormattedValue(0,0,chartType);},getWholeFormattedValues:function(){return this.data.wholeFormattedValues;},_processCategories:function(categories){return tui.util.map(categories,tui.util.encodeHTMLEntity);},_pickValue:function(items){return tui.util.map([].concat(items.data),parseFloat);},_pickValues:function(seriesData){var values,result;if(tui.util.isArray(seriesData)){values=tui.util.map(seriesData,this._pickValue,this);result=tui.util.pivot(values);}else{result={};tui.util.forEach(seriesData,function(groupValues,type){values=tui.util.map(groupValues,this._pickValue,this);result[type]=tui.util.pivot(values);},this);}return result;},_makeWholeValues:function(groupValues,seriesChartTypes){var wholeValues=[];if(!seriesChartTypes){wholeValues=groupValues;}else{tui.util.forEachArray(seriesChartTypes,function(_chartType){tui.util.forEach(groupValues[_chartType],function(values,index){if(!wholeValues[index]){wholeValues[index]=[];}wholeValues[index]=wholeValues[index].concat(values);});});}return wholeValues;},_pickLegendLabel:function(item){return tui.util.encodeHTMLEntity(item.name);},_pickLegendLabels:function(seriesData){var result;if(tui.util.isArray(seriesData)){result=tui.util.map(seriesData,this._pickLegendLabel,this);}else{result={};tui.util.forEach(seriesData,function(groupValues,type){result[type]=tui.util.map(groupValues,this._pickLegendLabel,this);},this);}return result;},_makeWholeLegendData:function(legendLabels,chartType,seriesChartTypes){var wholeLabels;if(!seriesChartTypes||!seriesChartTypes.length){wholeLabels=tui.util.map(legendLabels,function(label){return{chartType:chartType,label:label};});}else{wholeLabels=[];tui.util.forEachArray(seriesChartTypes,function(_chartType){var labels=tui.util.map(legendLabels[_chartType],function(label){return{chartType:_chartType,label:label};});wholeLabels=wholeLabels.concat(labels);});}return wholeLabels;},_formatGroupValues:function(groupValues,formatFunctions){return tui.util.map(groupValues,function(values){return tui.util.map(values,function(value){var fns=[value].concat(formatFunctions);return tui.util.reduce(fns,function(stored,fn){return fn(stored);});});});},_formatValues:function(chartValues,formatFunctions){var result;if(tui.util.isArray(chartValues)){result=this._formatGroupValues(chartValues,formatFunctions);}else{result={};tui.util.forEach(chartValues,function(groupValues,chartType){result[chartType]=this._formatGroupValues(groupValues,formatFunctions);},this);}return result;},_pickMaxLenUnderPoint:function(values){var max=0;tui.util.forEachArray(values,function(value){var len=tui.util.lengthAfterPoint(value);if(len>max){max=len;}},this);return max;},_isZeroFill:function(format){return format.length>2&&format.charAt(0)==="0";},_isDecimal:function(format){var indexOf=format.indexOf(".");return indexOf>-1&&indexOf<format.length-1;},_isComma:function(format){return format.indexOf(",")===format.split(".")[0].length-4;},_formatZeroFill:function(len,value){var zero="0",isMinus=value<0;value=Math.abs(value)+"";if(value.length>=len){return value;}while(value.length<len){value=zero+value;}return(isMinus?"-":"")+value;},_formatDecimal:function(len,value){var pow;if(len===0){return Math.round(value,10);}pow=Math.pow(10,len);value=Math.round(value*pow)/pow;value=parseFloat(value).toFixed(len);return value;},_formatComma:function(value){var comma=",",underPointValue="",values,lastIndex;value+="";if(value.indexOf(".")>-1){values=value.split(".");value=values[0];underPointValue="."+values[1];}if(value.length<4){return value+underPointValue;}values=(value).split("").reverse();lastIndex=values.length-1;values=tui.util.map(values,function(charrr,index){var result=[charrr];if(index<lastIndex&&(index+1)%3===0){result.push(comma);}return result;});return concat.apply([],values).reverse().join("")+underPointValue;},_findFormatFunctions:function(format){var funcs=[],len;if(!format){return[];}if(this._isDecimal(format)){len=this._pickMaxLenUnderPoint([format]);funcs=[tui.util.bind(this._formatDecimal,this,len)];}else{if(this._isZeroFill(format)){len=format.length;funcs=[tui.util.bind(this._formatZeroFill,this,len)];return funcs;}}if(this._isComma(format)){funcs.push(this._formatComma);}return funcs;},_makeMultilineCategory:function(category,limitWidth,theme){var words=category.split(/\s+/),lineWords=words[0],lines=[];tui.util.forEachArray(words.slice(1),function(word){var width=renderUtil.getRenderedLabelWidth(lineWords+" "+word,theme);if(width>limitWidth){lines.push(lineWords);lineWords=word;}else{lineWords+=" "+word;}});if(lineWords){lines.push(lineWords);}return lines.join("<br>");},getMultilineCategories:function(limitWidth,theme){if(!this.data.multilineCategories){this.data.multilineCategories=tui.util.map(this.getCategories(),function(category){return this._makeMultilineCategory(category,limitWidth,theme);},this);}return this.data.multilineCategories;},_makePieChartPercentValues:function(groupValues){var result=tui.util.map(groupValues,function(values){var sum=tui.util.sum(values);return tui.util.map(values,function(value){return value/sum;});});return result;},_makeNormalStackedPercentValues:function(groupValues,limit){var distance=Math.abs(limit.max-limit.min);return tui.util.map(groupValues,function(values){return tui.util.map(values,function(value){return value/distance;});});},_makePercentStackedPercentValues:function(groupValues){var flattenValues=concat.apply([],groupValues),plusSum=calculator.sumPlusValues(flattenValues),minusSum=Math.abs(calculator.sumMinusValues(flattenValues)),ratio=(plusSum>0&&minusSum>0)?0.5:1;var percentValues=tui.util.map(groupValues,function(values){var sum=tui.util.sum(tui.util.map(values,function(value){return Math.abs(value);}));return tui.util.map(values,function(value){return sum===0?0:ratio*(value/sum);});});return percentValues;},_makePercentValues:function(groupValues,limit,isLineTypeChart){var min=limit.min,max=limit.max,distance=max-min,flag=1,subValue=0,percentValues;if(!isLineTypeChart&&min<0&&max<=0){flag=-1;subValue=max;distance=min-max;}else{if(isLineTypeChart||min>=0){subValue=min;}}percentValues=tui.util.map(groupValues,function(values){return tui.util.map(values,function(value){return(value-subValue)*flag/distance;});});return percentValues;},setPercentValues:function(limit,stacked,chartType){var result,groupValues=this.getGroupValues(chartType),isAllowedStackedOption=predicate.isAllowedStackedOption(chartType),isLineTypeChart=predicate.isLineTypeChart(chartType);if(predicate.isPieChart(chartType)){result=this._makePieChartPercentValues(groupValues);}else{if(isAllowedStackedOption&&predicate.isNormalStacked(stacked)){result=this._makeNormalStackedPercentValues(groupValues,limit);}else{if(isAllowedStackedOption&&predicate.isPercentStacked(stacked)){result=this._makePercentStackedPercentValues(groupValues);}else{result=this._makePercentValues(groupValues,limit,isLineTypeChart);}}}this.data.percentValues[chartType]=isLineTypeChart?tui.util.pivot(result):result;},getPercentValues:function(chartType){return this.data.percentValues[chartType];}});module.exports=DataProcessor;},{"./calculator":28,"./predicate":32,"./renderUtil":33}],30:[function(require,module,exports){var aps=Array.prototype.slice;var domHandler={create:function(tag,newClass){var el=document.createElement(tag);if(newClass){this.addClass(el,newClass);}return el;},_getClassNames:function(el){var className,classNames;if(el.classList){classNames=aps.call(el.classList);}else{className=el.className||"";classNames=className&&tui.util.isString(className)?className.split(" "):[];}return classNames;},addClass:function(el,newClass){var classNames=this._getClassNames(el),index=tui.util.inArray(newClass,classNames);if(index>-1){return;}classNames.push(newClass);el.className=classNames.join(" ");},removeClass:function(el,rmClass){var classNames=this._getClassNames(el),index=tui.util.inArray(rmClass,classNames);if(index===-1){return;}classNames.splice(index,1);el.className=classNames.join(" ");},hasClass:function(el,findClass){var classNames=this._getClassNames(el),index=tui.util.inArray(findClass,classNames);return index>-1;},findParentByClass:function(el,className,lastClass){var parent=el.parentNode;if(!parent){return null;}else{if(this.hasClass(parent,className)){return parent;}else{if(parent.nodeName==="BODY"||this.hasClass(parent,lastClass)){return null;}else{return this.findParentByClass(parent,className,lastClass);}}}},append:function(container,children){if(!container||!children){return;}children=tui.util.isArray(children)?children:[children];tui.util.forEachArray(children,function(child){if(!child){return;}container.appendChild(child);},this);}};module.exports=domHandler;},{}],31:[function(require,module,exports){var eventListener={_attachEvent:function(eventName,el,callback){if(typeof callback=="object"&&callback.handleEvent){el.attachEvent("on"+eventName,function(){callback.handleEvent.call(callback);});}else{el.attachEvent("on"+eventName,callback);}},_addEventListener:function(eventName,el,callback){try{el.addEventListener(eventName,callback);}catch(e){if(typeof callback=="object"&&callback.handleEvent){el.addEventListener(eventName,function(event){callback.handleEvent.call(callback,event);});}else{throw e;}}},bindEvent:function(eventName,el,callback){var bindEvent;if("addEventListener" in el){bindEvent=this._addEventListener;}else{if("attachEvent" in el){bindEvent=this._attachEvent;}}this.bindEvent=bindEvent;bindEvent(eventName,el,callback);}};module.exports=eventListener;},{}],32:[function(require,module,exports){var chartConst=require("../const");var predicate={isBarChart:function(chartType){return chartType===chartConst.CHART_TYPE_BAR;},isColumnChart:function(chartType){return chartType===chartConst.CHART_TYPE_COLUMN;},isComboChart:function(chartType){return chartType===chartConst.CHART_TYPE_COMBO;},isLineChart:function(chartType){return chartType===chartConst.CHART_TYPE_LINE;},isAreaChart:function(chartType){return chartType===chartConst.CHART_TYPE_AREA;},isLineTypeChart:function(chartType){return this.isLineChart(chartType)||this.isAreaChart(chartType);},isPieChart:function(chartType){return chartType===chartConst.CHART_TYPE_PIE;},isOuterLegendAlign:function(align){return align===chartConst.LEGEND_ALIGN_OUTER;},isCenterLegendAlign:function(align){return align===chartConst.LEGEND_ALIGN_CENTER;},isLeftLegendAlign:function(align){return align===chartConst.LEGEND_ALIGN_LEFT;},isTopLegendAlign:function(align){return align===chartConst.LEGEND_ALIGN_TOP;},isBottomLegendAlign:function(align){return align===chartConst.LEGEND_ALIGN_BOTTOM;},isHorizontalLegend:function(align){return this.isTopLegendAlign(align)||this.isBottomLegendAlign(align);},isPieLegendAlign:function(align){var result=false;if(align){result=this.isOuterLegendAlign(align)||this.isCenterLegendAlign(align);}return result;},isAllowedStackedOption:function(chartType){return this.isBarChart(chartType)||this.isColumnChart(chartType)||this.isAreaChart(chartType);},isNormalStacked:function(stacked){return stacked===chartConst.STACKED_NORMAL_TYPE;},isPercentStacked:function(stacked){return stacked===chartConst.STACKED_PERCENT_TYPE;},isValidStackedOption:function(stacked){return stacked&&(this.isNormalStacked(stacked)||this.isPercentStacked(stacked));}};module.exports=predicate;},{"../const":15}],33:[function(require,module,exports){var dom=require("./domHandler"),chartConst=require("./../const");var browser=tui.util.browser,isIE7=browser.msie&&browser.version===7,isOldBrowser=browser.msie&&browser.version<=8;var renderUtil={concatStr:function(){return String.prototype.concat.apply("",arguments);},makeFontCssText:function(theme){var cssTexts=[];if(!theme){return"";}if(theme.fontSize){cssTexts.push(this.concatStr("font-size:",theme.fontSize,"px"));}if(theme.fontFamily){cssTexts.push(this.concatStr("font-family:",theme.fontFamily));}if(theme.color){cssTexts.push(this.concatStr("color:",theme.color));}return cssTexts.join(";");},checkEl:null,_createSizeCheckEl:function(){var div,span;if(!this.checkEl){div=dom.create("DIV","tui-chart-size-check-element");span=dom.create("SPAN");div.appendChild(span);this.checkEl=div;}else{this.checkEl.style.cssText="";}return this.checkEl;},_makeCachingKey:function(label,theme,offsetType){var keys=[label,offsetType];tui.util.forEach(theme,function(key,value){keys.push(key+value);});return keys.join("-");},sizeCache:{},_addCssStyle:function(div,theme){div.style.fontSize=(theme.fontSize||chartConst.DEFAULT_LABEL_FONT_SIZE)+"px";if(theme.fontFamily){div.style.fontFamily=theme.fontFamily;}if(theme.cssText){div.style.cssText+=theme.cssText;}},_getRenderedLabelSize:function(label,theme,offsetType){var key,div,span,labelSize;theme=theme||{};if(!label){return 0;}label+="";key=this._makeCachingKey(label,theme,offsetType);labelSize=this.sizeCache[key];if(!labelSize){div=this._createSizeCheckEl();span=div.firstChild;span.innerHTML=label;this._addCssStyle(div,theme);document.body.appendChild(div);labelSize=span[offsetType];document.body.removeChild(div);this.sizeCache[key]=labelSize;}return labelSize;},getRenderedLabelWidth:function(label,theme){var labelWidth=this._getRenderedLabelSize(label,theme,"offsetWidth");return labelWidth;},getRenderedLabelHeight:function(label,theme){var labelHeight=this._getRenderedLabelSize(label,theme,"offsetHeight");return labelHeight;},_getRenderedLabelsMaxSize:function(labels,theme,iteratee){var sizes=tui.util.map(labels,function(label){return iteratee(label,theme);},this),maxSize=tui.util.max(sizes);return maxSize;},getRenderedLabelsMaxWidth:function(labels,theme){var iteratee=tui.util.bind(this.getRenderedLabelWidth,this),maxWidth=this._getRenderedLabelsMaxSize(labels,theme,iteratee);return maxWidth;},getRenderedLabelsMaxHeight:function(labels,theme){var iteratee=tui.util.bind(this.getRenderedLabelHeight,this),maxHeight=this._getRenderedLabelsMaxSize(labels,theme,iteratee);return maxHeight;},renderDimension:function(el,dimension){el.style.cssText=[this.concatStr("width:",dimension.width,"px"),this.concatStr("height:",dimension.height,"px")].join(";");},renderPosition:function(el,position){if(tui.util.isUndefined(position)){return;}if(position.top){el.style.top=position.top+"px";}if(position.left){el.style.left=position.left+"px";}if(position.right){el.style.right=position.right+"px";}},renderBackground:function(el,background){if(!background){return;}el.style.background=background;},renderFontFamily:function(el,fontFamily){if(!fontFamily){return;}el.style.fontFamily=fontFamily;},renderTitle:function(title,theme,className){var elTitle,cssText;if(!title){return null;}elTitle=dom.create("DIV",className);elTitle.innerHTML=title;cssText=renderUtil.makeFontCssText(theme);if(theme.background){cssText+=";"+this.concatStr("background:",theme.background);}elTitle.style.cssText=cssText;return elTitle;},expandBound:function(bound){var dimension=bound.dimension,position=bound.position;return{dimension:{width:dimension.width+chartConst.SERIES_EXPAND_SIZE*2,height:dimension.height+chartConst.SERIES_EXPAND_SIZE*2},position:{left:position.left-chartConst.SERIES_EXPAND_SIZE,top:position.top-chartConst.SERIES_EXPAND_SIZE}};},makeCustomEventName:function(prefix,value,suffix){return prefix+tui.util.properCase(value)+tui.util.properCase(suffix);},formatValue:function(value,formatFunctions){var fns=[value].concat(formatFunctions||[]);return tui.util.reduce(fns,function(stored,fn){return fn(stored);});},isIE7:function(){return isIE7;},isOldBrowser:function(){return isOldBrowser;}};module.exports=renderUtil;},{"./../const":15,"./domHandler":30}],34:[function(require,module,exports){module.exports={template:function(html){return function(data){var result=html;tui.util.forEach(data,function(value,key){var regExp=new RegExp("{{\\s*"+key+"\\s*}}","g");result=result.replace(regExp,value);});return result;};}};},{}],35:[function(require,module,exports){var UserEventListener=tui.util.defineClass({register:function(eventName,func){this.on(eventName,func);}});tui.util.CustomEvents.mixin(UserEventListener);module.exports=UserEventListener;},{}],36:[function(require,module,exports){var LegendModel=require("./legendModel"),chartConst=require("../const"),dom=require("../helpers/domHandler"),predicate=require("../helpers/predicate"),eventListener=require("../helpers/eventListener"),renderUtil=require("../helpers/renderUtil"),legendTemplate=require("./../legends/legendTemplate");var Legend=tui.util.defineClass({init:function(params){this.theme=params.theme;this.options=params.options||{};this.chartTypes=params.chartTypes;this.chartType=params.chartType;this.userEvent=params.userEvent;this.className="tui-chart-legend-area";this.checkedIndexes=[];this.legendModel=new LegendModel({theme:params.theme,labels:params.dataProcessor.getLegendLabels(),legendData:params.dataProcessor.getWholeLegendData(),chartTypes:params.chartTypes,chartType:params.chartType});},_renderLegendArea:function(legendContainer){legendContainer.innerHTML=this._makeLegendHtml(this.legendModel.getData());renderUtil.renderPosition(legendContainer,this.bound.position);this._renderLabelTheme(legendContainer,this.theme.label);},render:function(bound){var el=dom.create("DIV",this.className);this.legendContainer=el;this.bound=bound;if(predicate.isHorizontalLegend(this.options.align)){dom.addClass(el,"horizontal");}this._renderLegendArea(el);this._attachEvent(el);return el;},resize:function(bound){this.bound=bound;this._renderLegendArea(this.legendContainer);},_makeLegendRectCssText:function(legendDatum,baseMarginTop){var theme=legendDatum.theme,borderCssText=theme.borderColor?renderUtil.concatStr(";border:1px solid ",theme.borderColor):"",rectMargin,marginTop;if(legendDatum.chartType==="line"){marginTop=baseMarginTop+chartConst.LINE_MARGIN_TOP;}else{marginTop=baseMarginTop;}rectMargin=renderUtil.concatStr(";margin-top:",marginTop,"px");return renderUtil.concatStr("background-color:",theme.singleColor||theme.color,borderCssText,rectMargin);},_makeLabelsWidth:function(legendData){return tui.util.map(legendData,function(item){var labelWidth=renderUtil.getRenderedLabelWidth(item.label,this.theme.label);return labelWidth+chartConst.LEGEND_AREA_PADDING;},this);},_makeLegendHtml:function(legendData){var template=legendTemplate.tplLegend,checkBoxTemplate=legendTemplate.tplCheckbox,labelsWidth=this._makeLabelsWidth(legendData),labelHeight=renderUtil.getRenderedLabelHeight(legendData[0].label,legendData[0].theme),isHorizontalLegend=predicate.isHorizontalLegend(this.options.align),height=labelHeight+(chartConst.LABEL_PADDING_TOP*2),baseMarginTop=parseInt((height-chartConst.LEGEND_RECT_WIDTH)/2,10)-1,html=tui.util.map(legendData,function(legendDatum,index){var rectCssText=this._makeLegendRectCssText(legendDatum,baseMarginTop),checkbox=this.options.hasCheckbox===false?"":checkBoxTemplate({index:index,checked:this.legendModel.isCheckedIndex(index)?" checked":""}),data;data={rectCssText:rectCssText,height:height,labelHeight:labelHeight,unselected:this.legendModel.isUnselectedIndex(index)?" unselected":"",labelWidth:isHorizontalLegend?";width:"+labelsWidth[index]+"px":"",iconType:legendDatum.chartType||"rect",label:legendDatum.label,checkbox:checkbox,index:index};return template(data);},this).join("");return html;},_renderLabelTheme:function(el,theme){var cssText=renderUtil.makeFontCssText(theme);el.style.cssText+=";"+cssText;},_findLegendLabelElement:function(elTarget){var legendContainer;if(dom.hasClass(elTarget,chartConst.CLASS_NAME_LEGEND_LABEL)){legendContainer=elTarget;}else{legendContainer=dom.findParentByClass(elTarget,chartConst.CLASS_NAME_LEGEND_LABEL);}return legendContainer;},_fireLegendCheckboxEvent:function(){this.fire("changeCheckedLegends",this.legendModel.getCheckedIndexes());},_fireLegendSelectionEvent:function(data){var chartTypes=this.chartTypes||[data.chartType],index=this.legendModel.getSelectedIndex(),legendIndex=!tui.util.isNull(index)?data.seriesIndex:index;tui.util.forEachArray(chartTypes,function(chartType){this.fire(renderUtil.makeCustomEventName("select",chartType,"legend"),data.chartType,legendIndex);},this);},_fireUserEvent:function(data){this.userEvent.fire("selectLegend",{legend:data.label,chartType:data.chartType,index:data.index});},_selectLegend:function(index){var data=this.legendModel.getDatum(index);this.legendModel.toggleSelectedIndex(index);if(!tui.util.isNull(this.legendModel.getSelectedIndex())&&!this.legendModel.isCheckedSelectedIndex()){this.legendModel.checkSelectedIndex();this._fireLegendCheckboxEvent();}this._renderLegendArea(this.legendContainer);this._fireLegendSelectionEvent(data);this._fireUserEvent(data);},_getCheckedIndexes:function(){var checkedIndexes=[];tui.util.forEachArray(this.legendContainer.getElementsByTagName("input"),function(checkbox,index){if(checkbox.checked){checkedIndexes.push(index);}});return checkedIndexes;},_checkLegend:function(){var checkedIndexes=this._getCheckedIndexes(),checkedCount=checkedIndexes.length,data;if((predicate.isPieChart(this.chartType)&&checkedCount===1)||checkedCount===0){this._renderLegendArea(this.legendContainer);}else{this.legendModel.updateCheckedData(checkedIndexes);data=this.legendModel.getSelectedDatum();if(!this.legendModel.isCheckedSelectedIndex()){this.legendModel.updateSelectedIndex(null);}this._renderLegendArea(this.legendContainer);this._fireLegendCheckboxEvent();if(data){this._fireLegendSelectionEvent(data,true);}}},_onClick:function(e){var elTarget=e.target||e.srcElement,legendContainer,index;if(dom.hasClass(elTarget,chartConst.CLASS_NAME_LEGEND_CHECKBOX)){this._checkLegend();return;}legendContainer=this._findLegendLabelElement(elTarget);if(!legendContainer){return;}index=parseInt(legendContainer.getAttribute("data-index"),10);this._selectLegend(index);},_attachEvent:function(el){eventListener.bindEvent("click",el,tui.util.bind(this._onClick,this));}});tui.util.CustomEvents.mixin(Legend);module.exports=Legend;},{"../const":15,"../helpers/domHandler":30,"../helpers/eventListener":31,"../helpers/predicate":32,"../helpers/renderUtil":33,"./../legends/legendTemplate":38,"./legendModel":37}],37:[function(require,module,exports){var defaultTheme=require("../themes/defaultTheme");var concat=Array.prototype.concat;var LegendModel=tui.util.defineClass({init:function(params){this.theme=params.theme;this.labels=params.labels;this.legendData=params.legendData;this.chartTypes=params.chartTypes;this.chartType=params.chartType;this.data=null;this.selectedIndex=null;this.checkedIndexesMap={};this.checkedWholeIndexes=[];this._initCheckedIndexes();this._setData();},_initCheckedIndexes:function(){var checkedWholeIndexes=[];tui.util.forEachArray(this.legendData,function(legendDatum,index){checkedWholeIndexes[index]=true;},this);this.checkedWholeIndexes=checkedWholeIndexes;},_makeLabelInfoAppliedTheme:function(labelInfo,theme,checkedIndexes){var seriesIndex=0;return tui.util.map(labelInfo,function(item,index){var itemTheme={color:theme.colors[index]};if(theme.singleColors){itemTheme.singleColor=theme.singleColors[index];}if(theme.borderColor){itemTheme.borderColor=theme.borderColor;}item.theme=itemTheme;item.index=index;if(!checkedIndexes||!tui.util.isUndefined(checkedIndexes[index])){item.seriesIndex=seriesIndex;seriesIndex+=1;}else{item.seriesIndex=-1;}return item;},this);},_setData:function(){var legendData=this.legendData,data,defaultLegendTheme,startIndex,startThemeIndex;if(!this.chartTypes){data=this._makeLabelInfoAppliedTheme(legendData,this.theme,this.checkedIndexesMap[this.chartType]);}else{startIndex=0;startThemeIndex=0;defaultLegendTheme={colors:defaultTheme.series.colors};data=concat.apply([],tui.util.map(this.chartTypes,function(chartType){var chartTheme=this.theme[chartType],labelLen=this.labels[chartType].length,endIndex=startIndex+labelLen,themeEndIndex,datum;if(!chartTheme){themeEndIndex=startThemeIndex+labelLen;chartTheme=JSON.parse(JSON.stringify(defaultLegendTheme));chartTheme.colors=chartTheme.colors.slice(startThemeIndex,themeEndIndex);startThemeIndex=themeEndIndex;}datum=this._makeLabelInfoAppliedTheme(legendData.slice(startIndex,endIndex),chartTheme,this.checkedIndexesMap[chartType]);startIndex=endIndex;return datum;},this));}this.data=data;},getData:function(){return this.data;},getDatum:function(index){return this.data[index];},getSelectedDatum:function(){return this.getDatum(this.selectedIndex);},updateSelectedIndex:function(value){this.selectedIndex=value;},toggleSelectedIndex:function(index){var selectedIndex;if(this.selectedIndex===index){selectedIndex=null;}else{selectedIndex=index;}this.updateSelectedIndex(selectedIndex);},getSelectedIndex:function(){return this.selectedIndex;},isUnselectedIndex:function(index){return !tui.util.isNull(this.selectedIndex)&&(this.selectedIndex!==index);},isCheckedSelectedIndex:function(){return this.isCheckedIndex(this.selectedIndex);},_updateCheckedIndex:function(index){this.checkedWholeIndexes[index]=true;},isCheckedIndex:function(index){return !!this.checkedWholeIndexes[index];},_addSendingDatum:function(index){var legendDatum=this.getDatum(index);if(!this.checkedIndexesMap[legendDatum.chartType]){this.checkedIndexesMap[legendDatum.chartType]=[];}this.checkedIndexesMap[legendDatum.chartType][legendDatum.index]=true;},checkSelectedIndex:function(){this._updateCheckedIndex(this.selectedIndex);this._addSendingDatum(this.selectedIndex);this._setData();},getCheckedIndexes:function(){return this.checkedIndexesMap[this.chartType]||this.checkedIndexesMap;},_resetCheckedData:function(){this.checkedWholeIndexes=[];this.checkedIndexesMap={};},updateCheckedData:function(indexes){this._resetCheckedData();tui.util.forEachArray(indexes,function(index){this._updateCheckedIndex(index);this._addSendingDatum(index);},this);this._setData();}});module.exports=LegendModel;},{"../themes/defaultTheme":60}],38:[function(require,module,exports){var templateMaker=require("../helpers/templateMaker");var tags={HTML_CHECKBOX:'<div class="tui-chart-legend-checkbox-area"><input class="tui-chart-legend-checkbox" type="checkbox" value="{{ index }}"{{ checked }} /></div>',HTML_LEGEND:'<div class="tui-chart-legend{{ unselected }}" style="height:{{ height }}px">{{ checkbox }}<div class="tui-chart-legend-rect {{ iconType }}" style="{{ rectCssText }}"></div><div class="tui-chart-legend-label" style="height:{{ labelHeight }}px{{ labelWidth }}" data-index="{{ index }}">{{ label }}</div></div>'};module.exports={tplCheckbox:templateMaker.template(tags.HTML_CHECKBOX),tplLegend:templateMaker.template(tags.HTML_LEGEND)};},{"../helpers/templateMaker":34}],39:[function(require,module,exports){var dom=require("../helpers/domHandler"),calculator=require("../helpers/calculator"),renderUtil=require("../helpers/renderUtil"),plotTemplate=require("./plotTemplate");var Plot=tui.util.defineClass({init:function(params){tui.util.extend(this,params);this.className="tui-chart-plot-area";},_renderPlotArea:function(plotContainer,bound,data){this.bound=bound;this.data=data;renderUtil.renderDimension(plotContainer,bound.dimension);renderUtil.renderPosition(plotContainer,bound.position);this._renderLines(plotContainer,bound.dimension);},render:function(bound,data){var el=dom.create("DIV",this.className);this._renderPlotArea(el,bound,data);this.plotContainer=el;return el;},rerender:function(bound,data){this.plotContainer.innerHTML="";this._renderPlotArea(this.plotContainer,bound,data);},resize:function(bound,data){this.rerender(bound,data);},_renderLines:function(el,dimension){var hPositions=this._makeHorizontalPixelPositions(dimension.width),vPositions=this._makeVerticalPixelPositions(dimension.height),theme=this.theme,lineHtml="";lineHtml+=this._makeLineHtml({positions:hPositions,size:dimension.height,className:"vertical",positionType:"left",sizeType:"height",lineColor:theme.lineColor});lineHtml+=this._makeLineHtml({positions:vPositions,size:dimension.width,className:"horizontal",positionType:"bottom",sizeType:"width",lineColor:theme.lineColor});el.innerHTML=lineHtml;renderUtil.renderBackground(el,theme.background);},_makeLineHtml:function(params){var template=plotTemplate.tplPlotLine,lineHtml=tui.util.map(params.positions,function(position){var cssTexts=[renderUtil.concatStr(params.positionType,":",position,"px"),renderUtil.concatStr(params.sizeType,":",params.size,"px")],data;if(params.lineColor){cssTexts.push(renderUtil.concatStr("background-color:",params.lineColor));}data={className:params.className,cssText:cssTexts.join(";")};return template(data);},this).join("");return lineHtml;},_makeVerticalPixelPositions:function(height){var positions=calculator.makeTickPixelPositions(height,this.data.vTickCount);positions.shift();return positions;},_makeHorizontalPixelPositions:function(width){var positions=calculator.makeTickPixelPositions(width,this.data.hTickCount);positions.shift();return positions;}});module.exports=Plot;},{"../helpers/calculator":28,"../helpers/domHandler":30,"../helpers/renderUtil":33,"./plotTemplate":40}],40:[function(require,module,exports){var templateMaker=require("../helpers/templateMaker");var tags={HTML_PLOT_LINE:'<div class="tui-chart-plot-line {{ className }}" style="{{ cssText }}"></div>'};module.exports={tplPlotLine:templateMaker.template(tags.HTML_PLOT_LINE)};},{"../helpers/templateMaker":34}],41:[function(require,module,exports){var BarChart=require("./raphaelBarChart"),LineChart=require("./raphaelLineChart"),AreaChart=require("./raphaelAreaChart"),PieChart=require("./raphaelPieChart");var pluginName="raphael",pluginRaphael;pluginRaphael={bar:BarChart,column:BarChart,line:LineChart,area:AreaChart,pie:PieChart};tui.chart.registerPlugin(pluginName,pluginRaphael);},{"./raphaelAreaChart":42,"./raphaelBarChart":43,"./raphaelLineChart":44,"./raphaelPieChart":46}],42:[function(require,module,exports){var RaphaelLineBase=require("./raphaelLineTypeBase"),raphaelRenderUtil=require("./raphaelRenderUtil");var Raphael=window.Raphael,EMPHASIS_OPACITY=1,DE_EMPHASIS_OPACITY=0.3;var concat=Array.prototype.concat;var RaphaelAreaChart=tui.util.defineClass(RaphaelLineBase,{init:function(){this.selectedLegendIndex=null;},render:function(container,data){var dimension=data.dimension,groupPositions=data.groupPositions,theme=data.theme,colors=theme.colors,opacity=data.options.hasDot?1:0,borderStyle=this.makeBorderStyle(theme.borderColor,opacity),outDotStyle=this.makeOutDotStyle(opacity,borderStyle),paper,groupPaths,groupAreas,tooltipLine,selectionDot,groupDots;this.paper=paper=Raphael(container,1,dimension.height);this.stackedOption=data.options.stacked;this.spline=data.options.spline;this.dimension=dimension;this.zeroTop=data.zeroTop;groupPaths=data.options.spline?this._getSplineAreasPath(groupPositions):this._getAreasPath(groupPositions);groupAreas=this._renderAreas(paper,groupPaths,colors);tooltipLine=this._renderTooltipLine(paper,dimension.height);selectionDot=this._makeSelectionDot(paper);groupDots=this._renderDots(paper,groupPositions,colors,opacity);if(data.options.hasSelection){this.selectionDot=selectionDot;this.selectionColor=theme.selectionColor;}this.outDotStyle=outDotStyle;this.groupPositions=groupPositions;this.groupPaths=groupPaths;this.groupAreas=groupAreas;this.tooltipLine=tooltipLine;this.groupDots=groupDots;this.dotOpacity=opacity;delete this.pivotGroupDots;return paper;},_renderArea:function(paper,path,color){var area=paper.path(path),fillStyle={fill:color,opacity:0.5,stroke:color,"stroke-opacity":0};area.attr(fillStyle);return area;},_renderAreas:function(paper,groupPaths,colors){var groupAreas;colors=colors.slice(0,groupPaths.length);colors.reverse();groupPaths.reverse();groupAreas=tui.util.map(groupPaths,function(path,groupIndex){var areaColor=colors[groupIndex]||"transparent",lineColor=areaColor;return{area:this._renderArea(paper,path.area.join(" "),areaColor),line:raphaelRenderUtil.renderLine(paper,path.line.join(" "),lineColor)};},this);return groupAreas.reverse();},_makeHeight:function(top,startTop){return Math.abs(top-startTop);},_makeAreasPath:function(positions){var len=positions.length*2,path=[];tui.util.forEachArray(positions,function(position,index){path[index]=["L",position.left,position.top];path[len-index-1]=["L",position.left,position.startTop];});path=concat.apply([],path);path[0]="M";return path;},_getAreasPath:function(groupPositions){return tui.util.map(groupPositions,function(positions){positions[0].left-=1;return{area:this._makeAreasPath(positions),line:this._makeLinesPath(positions)};},this);},_makeSplineAreaBottomPath:function(positions){return tui.util.map(positions,function(position){return["L",position.left,this.zeroTop];},this).reverse();},_getSplineAreasPath:function(groupPositions){return tui.util.map(groupPositions,function(positions){var linesPath,areasBottomPath;positions[0].left-=1;linesPath=this._makeSplineLinesPath(positions);areasBottomPath=this._makeSplineAreaBottomPath(positions);return{area:linesPath.concat(areasBottomPath),line:linesPath};},this);},resize:function(params){var dimension=params.dimension,groupPositions=params.groupPositions;this.groupPositions=groupPositions;this.groupPaths=this.spline?this._getSplineAreasPath(groupPositions):this._getAreasPath(groupPositions);this.paper.setSize(dimension.width,dimension.height);this.tooltipLine.attr({top:dimension.height});tui.util.forEachArray(this.groupPaths,function(path,groupIndex){var area=this.groupAreas[groupIndex];area.area.attr({path:path.area.join(" ")});area.line.attr({path:path.line.join(" ")});tui.util.forEachArray(this.groupDots[groupIndex],function(item,index){this._moveDot(item.dot,groupPositions[groupIndex][index]);},this);},this);},selectLegend:function(legendIndex){var that=this,noneSelected=tui.util.isNull(legendIndex);this.selectedLegendIndex=legendIndex;tui.util.forEachArray(this.groupPaths,function(path,groupIndex){var area=this.groupAreas[groupIndex],opacity=(noneSelected||legendIndex===groupIndex)?EMPHASIS_OPACITY:DE_EMPHASIS_OPACITY;area.area.attr({"fill-opacity":opacity});area.line.attr({"stroke-opacity":opacity});tui.util.forEachArray(this.groupDots[groupIndex],function(item){if(that.dotOpacity){item.dot.attr({"fill-opacity":opacity});}});},this);}});module.exports=RaphaelAreaChart;},{"./raphaelLineTypeBase":45,"./raphaelRenderUtil":47}],43:[function(require,module,exports){var raphaelRenderUtil=require("./raphaelRenderUtil");var Raphael=window.Raphael;var ANIMATION_TIME=700,EMPHASIS_OPACITY=1,DE_EMPHASIS_OPACITY=0.3;var RaphaelBarChart=tui.util.defineClass({render:function(container,data){var groupBounds=data.groupBounds,dimension=data.dimension,paper,baseParams;if(!groupBounds){return null;}this.paper=paper=Raphael(container,dimension.width,dimension.height);baseParams={paper:paper,theme:data.theme,groupBounds:groupBounds,groupValues:data.groupValues,chartType:data.chartType};this._renderBars(baseParams);this._renderBarBorders(baseParams);this.theme=data.theme;this.groupBounds=groupBounds;this.chartType=data.chartType;return paper;},_renderBar:function(params){var bound=params.bound,rect;if(bound.width<0||bound.height<0){return null;}rect=params.paper.rect(bound.left,bound.top,bound.width,bound.height);rect.attr({fill:params.color,stroke:"none"});return rect;},_renderBars:function(params){var singleColors=(params.groupBounds[0].length===1)&&params.theme.singleColors||[],colors=params.theme.colors;this.groupBars=tui.util.map(params.groupBounds,function(bounds,groupIndex){var singleColor=singleColors[groupIndex];return tui.util.map(bounds,function(bound,index){var color,rect,value;if(!bound){return null;}color=singleColor||colors[index];value=params.groupValues[groupIndex][index];rect=this._renderBar({paper:params.paper,chartType:params.chartType,color:color,borderColor:params.theme.borderColor,bound:bound.start,value:value});return{rect:rect,color:color,bound:bound.end,value:value,groupIndex:groupIndex,index:index};},this);},this);},_makeRectPoints:function(bound){return{leftTop:{left:Math.ceil(bound.left),top:Math.ceil(bound.top)},rightTop:{left:Math.ceil(bound.left+bound.width),top:Math.ceil(bound.top)},rightBottom:{left:Math.ceil(bound.left+bound.width),top:Math.ceil(bound.top+bound.height)},leftBottom:{left:Math.ceil(bound.left),top:Math.ceil(bound.top+bound.height)}};},_makeTopLinePath:function(leftTop,rightTop,chartType,value){var cloneLeftTop=tui.util.extend({},leftTop);cloneLeftTop.left-=chartType==="column"||value<0?1:0;return raphaelRenderUtil.makeLinePath(cloneLeftTop,rightTop).join(" ");},_makeBorderLinesPaths:function(bound,chartType,value){var points=this._makeRectPoints(bound),paths={};if(chartType==="bar"||value>=0){paths.top=this._makeTopLinePath(points.leftTop,points.rightTop,chartType,value);}if(chartType==="column"||value>=0){paths.right=raphaelRenderUtil.makeLinePath(points.rightTop,points.rightBottom).join(" ");}if(chartType==="bar"||value<0){paths.bottom=raphaelRenderUtil.makeLinePath(points.leftBottom,points.rightBottom).join(" ");}if(chartType==="column"||value<0){paths.left=raphaelRenderUtil.makeLinePath(points.leftTop,points.leftBottom).join(" ");}return paths;},_renderBorderLines:function(params){var borderLinePaths=this._makeBorderLinesPaths(params.bound,params.chartType,params.value),lines={};tui.util.forEach(borderLinePaths,function(path,name){lines[name]=raphaelRenderUtil.renderLine(params.paper,path,params.borderColor,1);});return lines;},_renderBarBorders:function(params){var borderColor=params.theme.borderColor;if(!borderColor){return;}this.groupBorders=tui.util.map(params.groupBounds,function(bounds,groupIndex){return tui.util.map(bounds,function(bound,index){var value;if(!bound){return null;}value=params.groupValues[groupIndex][index];return this._renderBorderLines({paper:params.paper,bound:bound.start,borderColor:borderColor,chartType:params.chartType,value:value});},this);},this);},_animateRect:function(rect,bound){rect.animate({x:bound.left,y:bound.top,width:bound.width,height:bound.height},ANIMATION_TIME);},_animateBorders:function(lines,bound,chartType,value){var paths=this._makeBorderLinesPaths(bound,chartType,value);tui.util.forEach(lines,function(line,name){line.animate({path:paths[name]},ANIMATION_TIME);});},animate:function(callback){var that=this,groupBorders=this.groupBorders||[];if(this.callbackTimeout){clearTimeout(this.callbackTimeout);delete this.callbackTimeout;}raphaelRenderUtil.forEach2dArray(this.groupBars,function(bar,groupIndex,index){var lines=groupBorders[groupIndex]&&groupBorders[groupIndex][index];if(!bar){return;}that._animateRect(bar.rect,bar.bound);if(lines){that._animateBorders(lines,bar.bound,that.chartType,bar.value);}});if(callback){this.callbackTimeout=setTimeout(function(){callback();delete that.callbackTimeout;},ANIMATION_TIME);}},_updateRectBound:function(rect,bound){rect.attr({x:bound.left,y:bound.top,width:bound.width,height:bound.height});},_updateBordersPath:function(lines,bound,chartType,value){var paths=this._makeBorderLinesPaths(bound,chartType,value);tui.util.forEach(lines,function(line,name){line.attr({path:paths[name]});});},resize:function(params){var that=this,groupBorders=this.groupBorders||[],dimension=params.dimension,groupBounds=params.groupBounds;this.groupBounds=groupBounds;this.paper.setSize(dimension.width,dimension.height);raphaelRenderUtil.forEach2dArray(this.groupBars,function(bar,groupIndex,index){var lines,bound;if(!bar){return;}lines=groupBorders[groupIndex]&&groupBorders[groupIndex][index];bound=groupBounds[groupIndex][index].end;bar.bound=bound;that._updateRectBound(bar.rect,bound);if(lines){that._updateBordersPath(lines,bound,that.chartType,bar.value);}});},_changeBordersColor:function(lines,borderColor){tui.util.forEach(lines,function(line){line.attr({stroke:borderColor});});},_changeBarColor:function(indexes,color,borderColor){var bar=this.groupBars[indexes.groupIndex][indexes.index],lines;bar.rect.attr({fill:color});if(borderColor){lines=this.groupBorders[indexes.groupIndex][indexes.index];this._changeBordersColor(lines,borderColor);}},selectSeries:function(indexes){var bar=this.groupBars[indexes.groupIndex][indexes.index],objColor=Raphael.color(bar.color),color=this.theme.selectionColor||raphaelRenderUtil.makeChangedLuminanceColor(objColor.hex,0.2),borderColor=this.theme.borderColor,objBorderColor;if(borderColor){objBorderColor=Raphael.color(borderColor);borderColor=raphaelRenderUtil.makeChangedLuminanceColor(objBorderColor.hex,0.2);}this._changeBarColor(indexes,color,borderColor);},unselectSeries:function(indexes){var bar=this.groupBars[indexes.groupIndex][indexes.index],borderColor=this.theme.borderColor;this._changeBarColor(indexes,bar.color,borderColor);},selectLegend:function(legendIndex){var groupBorders=this.groupBorders||[],noneSelected=tui.util.isNull(legendIndex);raphaelRenderUtil.forEach2dArray(this.groupBars,function(bar,groupIndex,index){var lines,opacity;if(!bar){return;}lines=groupBorders[groupIndex]&&groupBorders[groupIndex][index];opacity=(noneSelected||legendIndex===index)?EMPHASIS_OPACITY:DE_EMPHASIS_OPACITY;bar.rect.attr({"fill-opacity":opacity});if(lines){tui.util.forEach(lines,function(line){line.attr({"stroke-opacity":opacity});});}});}});module.exports=RaphaelBarChart;},{"./raphaelRenderUtil":47}],44:[function(require,module,exports){var RaphaelLineBase=require("./raphaelLineTypeBase"),raphaelRenderUtil=require("./raphaelRenderUtil");var Raphael=window.Raphael,EMPHASIS_OPACITY=1,DE_EMPHASIS_OPACITY=0.3;var RaphaelLineChart=tui.util.defineClass(RaphaelLineBase,{init:function(){this.selectedLegendIndex=null;},render:function(container,data){var dimension=data.dimension,groupPositions=data.groupPositions,theme=data.theme,colors=theme.colors,opacity=data.options.hasDot?1:0,groupPaths=data.options.spline?this._getSplineLinesPath(groupPositions):this._getLinesPath(groupPositions),borderStyle=this.makeBorderStyle(theme.borderColor,opacity),outDotStyle=this.makeOutDotStyle(opacity,borderStyle),paper,groupLines,tooltipLine,selectionDot,groupDots;this.paper=paper=Raphael(container,1,dimension.height);this.splineOption=data.options.spline;this.dimension=dimension;groupLines=this._renderLines(paper,groupPaths,colors);tooltipLine=this._renderTooltipLine(paper,dimension.height);selectionDot=this._makeSelectionDot(paper);groupDots=this._renderDots(paper,groupPositions,colors,opacity);if(data.options.hasSelection){this.selectionDot=selectionDot;this.selectionColor=theme.selectionColor;}this.colors=colors;this.borderStyle=borderStyle;this.outDotStyle=outDotStyle;this.groupPositions=groupPositions;this.groupPaths=groupPaths;this.groupLines=groupLines;this.tooltipLine=tooltipLine;this.groupDots=groupDots;this.dotOpacity=opacity;delete this.pivotGroupDots;return paper;},_getLinesPath:function(groupPositions){return tui.util.map(groupPositions,function(positions){positions[0].left-=1;return this._makeLinesPath(positions);},this);},_getSplineLinesPath:function(groupPositions){return tui.util.map(groupPositions,this._makeSplineLinesPath,this);},_renderLines:function(paper,groupPaths,colors,strokeWidth){var groupLines=tui.util.map(groupPaths,function(path,groupIndex){var color=colors[groupIndex]||"transparent";return raphaelRenderUtil.renderLine(paper,path.join(" "),color,strokeWidth);},this);return groupLines;},resize:function(params){var dimension=params.dimension,groupPositions=params.groupPositions;this.groupPositions=groupPositions;this.groupPaths=this.splineOption?this._getSplineLinesPath(groupPositions):this._getLinesPath(groupPositions);this.paper.setSize(dimension.width,dimension.height);this.tooltipLine.attr({top:dimension.height});tui.util.forEachArray(this.groupPaths,function(path,groupIndex){this.groupLines[groupIndex].attr({path:path.join(" ")});tui.util.forEachArray(this.groupDots[groupIndex],function(item,index){this._moveDot(item.dot,groupPositions[groupIndex][index]);},this);},this);},selectLegend:function(legendIndex){var that=this,noneSelected=tui.util.isNull(legendIndex);this.selectedLegendIndex=legendIndex;tui.util.forEachArray(this.groupPaths,function(path,groupIndex){var opacity=(noneSelected||legendIndex===groupIndex)?EMPHASIS_OPACITY:DE_EMPHASIS_OPACITY;that.groupLines[groupIndex].attr({"stroke-opacity":opacity});tui.util.forEachArray(this.groupDots[groupIndex],function(item){item.opacity=opacity;if(that.dotOpacity){item.dot.attr({"fill-opacity":opacity});}});},this);}});module.exports=RaphaelLineChart;},{"./raphaelLineTypeBase":45,"./raphaelRenderUtil":47}],45:[function(require,module,exports){var raphaelRenderUtil=require("./raphaelRenderUtil");var ANIMATION_TIME=700,DEFAULT_DOT_RADIUS=3,HOVER_DOT_RADIUS=4,SELECTION_DOT_RADIUS=7,DE_EMPHASIS_OPACITY=0.3;var concat=Array.prototype.concat;var RaphaelLineTypeBase=tui.util.defineClass({_makeLinesPath:function(positions){var path=tui.util.map(positions,function(position){return["L",position.left,position.top];});path=concat.apply([],path);path[0]="M";return path;},_getAnchor:function(fromPos,pos,nextPos){var l1=(pos.left-fromPos.left)/2,l2=(nextPos.left-pos.left)/2,a=Math.atan((pos.left-fromPos.left)/Math.abs(pos.top-fromPos.top)),b=Math.atan((nextPos.left-pos.left)/Math.abs(pos.top-nextPos.top)),alpha,dx1,dy1,dx2,dy2;a=fromPos.top<pos.top?Math.PI-a:a;b=nextPos.top<pos.top?Math.PI-b:b;alpha=Math.PI/2-((a+b)%(Math.PI*2))/2;dx1=l1*Math.sin(alpha+a);dy1=l1*Math.cos(alpha+a);dx2=l2*Math.sin(alpha+b);dy2=l2*Math.cos(alpha+b);return{x1:pos.left-dx1,y1:pos.top+dy1,x2:pos.left+dx2,y2:pos.top+dy2};},_makeSplineLinesPath:function(positions){var firstPos=positions[0],positionsLen=positions.length,fromPos=firstPos,lastPos=positions[positionsLen-1],middlePositions=positions.slice(1).slice(0,positionsLen-2),path=tui.util.map(middlePositions,function(position,index){var nextPos=positions[index+2],anchor=this._getAnchor(fromPos,position,nextPos);fromPos=position;return[anchor.x1,anchor.y1,position.left,position.top,anchor.x2,anchor.y2];},this);firstPos.left-=1;path.push([lastPos.left,lastPos.top,lastPos.left,lastPos.top]);path.unshift(["M",firstPos.left,firstPos.top,"C",firstPos.left,firstPos.top]);return path;},_renderTooltipLine:function(paper,height){var linePath=raphaelRenderUtil.makeLinePath({left:10,top:height},{left:10,top:0});return raphaelRenderUtil.renderLine(paper,linePath,"transparent",1);},makeBorderStyle:function(borderColor,opacity){var borderStyle;if(borderColor){borderStyle={stroke:borderColor,"stroke-width":1,"stroke-opacity":opacity};}return borderStyle;},makeOutDotStyle:function(opacity,borderStyle){var outDotStyle={"fill-opacity":opacity,"stroke-opacity":0,r:DEFAULT_DOT_RADIUS};if(borderStyle){tui.util.extend(outDotStyle,borderStyle);}return outDotStyle;},renderDot:function(paper,position,color,opacity){var dot=paper.circle(position.left,position.top,DEFAULT_DOT_RADIUS),dotStyle={fill:color,"fill-opacity":opacity,"stroke-opacity":0};dot.attr(dotStyle);return{dot:dot,color:color};},_renderDots:function(paper,groupPositions,colors,opacity){var dots=tui.util.map(groupPositions,function(positions,groupIndex){var color=colors[groupIndex];return tui.util.map(positions,function(position){var dot=this.renderDot(paper,position,color,opacity);return dot;},this);},this);return dots;},_getCenter:function(fromPos,toPos){return{left:(fromPos.left+toPos.left)/2,top:(fromPos.top+toPos.top)/2};},_showDot:function(dot){dot.attr({"fill-opacity":1,"stroke-opacity":0.3,"stroke-width":2,r:HOVER_DOT_RADIUS});},showAnimation:function(data){var index=data.groupIndex,groupIndex=data.index,item=this.groupDots[groupIndex][index];this._showDot(item.dot);},_getPivotGroupDots:function(){if(!this.pivotGroupDots){this.pivotGroupDots=tui.util.pivot(this.groupDots);}return this.pivotGroupDots;},_showGroupDots:function(index){var groupDots=this._getPivotGroupDots();tui.util.forEachArray(groupDots[index],function(item){this._showDot(item.dot);},this);},showGroupTooltipLine:function(bound){var linePath=raphaelRenderUtil.makeLinePath({left:bound.position.left,top:bound.position.top+bound.dimension.height},{left:bound.position.left,top:bound.position.top});this.tooltipLine.attr({path:linePath,stroke:"#999","stroke-opacity":1});},showGroupAnimation:function(index){this._showGroupDots(index);},_hideDot:function(dot,opacity){var outDotStyle=this.outDotStyle;if(!tui.util.isUndefined(opacity)){outDotStyle=tui.util.extend({},this.outDotStyle,{"fill-opacity":opacity});}dot.attr(outDotStyle);},hideAnimation:function(data){var index=data.groupIndex,groupIndex=data.index,item=this.groupDots[groupIndex][index],opacity=this.dotOpacity;if(opacity&&!tui.util.isNull(this.selectedLegendIndex)&&this.selectedLegendIndex!==groupIndex){opacity=DE_EMPHASIS_OPACITY;}if(item){this._hideDot(item.dot,opacity);}},_hideGroupDots:function(index){var dots=this._getPivotGroupDots(),hasSelectedIndex=!tui.util.isNull(this.selectedLegendIndex),baseOpacity=this.dotOpacity;tui.util.forEachArray(dots[index],function(item,groupIndex){var opacity=baseOpacity;if(opacity&&hasSelectedIndex&&this.selectedLegendIndex!==groupIndex){opacity=DE_EMPHASIS_OPACITY;}this._hideDot(item.dot,opacity);},this);},hideGroupTooltipLine:function(){this.tooltipLine.attr({"stroke-opacity":0});},hideGroupAnimation:function(index){this._hideGroupDots(index);},_moveDot:function(dot,position){var dotAttrs={cx:position.left,cy:position.top};if(this.dotOpacity){dotAttrs=tui.util.extend({"fill-opacity":this.dotOpacity},dotAttrs,this.borderStyle);}dot.attr(dotAttrs);},animate:function(callback){var that=this,seriesWidth=this.dimension.width,seriesHeight=this.dimension.height,startTime;if(this.animationId){cancelAnimationFrame(this.animationId);delete this.animationId;}function setSize(){var diffTime=(new Date()).getTime()-startTime,width=Math.min(seriesWidth*(diffTime/ANIMATION_TIME),seriesWidth);that.paper.setSize(width,seriesHeight);if(width===seriesWidth){delete that.animationId;callback();}else{that.animationId=requestAnimationFrame(setSize);}}startTime=(new Date()).getTime();this.animationId=requestAnimationFrame(setSize);},_makeSelectionDot:function(paper){var selectionDot=paper.circle(0,0,SELECTION_DOT_RADIUS);selectionDot.attr({fill:"#ffffff","fill-opacity":0,"stroke-opacity":0,"stroke-width":2});return selectionDot;},selectSeries:function(indexes){var item=this.groupDots[indexes.index][indexes.groupIndex],position=this.groupPositions[indexes.index][indexes.groupIndex];this.selectedItem=item;this.selectionDot.attr({cx:position.left,cy:position.top,"fill-opacity":0.5,"stroke-opacity":1,stroke:this.selectionColor||item.color});},unselectSeries:function(indexes){var item=this.groupDots[indexes.index][indexes.groupIndex];if(this.selectedItem===item){this.selectionDot.attr({"fill-opacity":0,"stroke-opacity":0});}}});module.exports=RaphaelLineTypeBase;},{"./raphaelRenderUtil":47}],46:[function(require,module,exports){var raphaelRenderUtil=require("./raphaelRenderUtil");var Raphael=window.Raphael,ANGLE_180=180,RAD=Math.PI/ANGLE_180,ANIMATION_TIME=500,LOADING_ANIMATION_TIME=700,EMPHASIS_OPACITY=1,DE_EMPHASIS_OPACITY=0.3;var RaphaelPieChart=tui.util.defineClass({render:function(container,data,callbacks){var dimension=data.dimension,paper;this.paper=paper=Raphael(container,dimension.width,dimension.height);if(!paper.customAttributes.sector){paper.customAttributes.sector=tui.util.bind(this._makeSectorPath,this);}this.selectionColor=data.theme.selectionColor;this.circleBound=data.circleBound;this._renderPie(paper,data,callbacks);return paper;},_makeSectorPath:function(cx,cy,r,startAngle,endAngle){var x1=cx+r*Math.sin(startAngle*RAD),y1=cy-r*Math.cos(startAngle*RAD),x2=cx+r*Math.sin(endAngle*RAD),y2=cy-r*Math.cos(endAngle*RAD),largeArcFlag=endAngle-startAngle>ANGLE_180?1:0,path=["M",cx,cy,"L",x1,y1,"A",r,r,0,largeArcFlag,1,x2,y2,"Z"];return{path:path};},_renderSector:function(params){var circleBound=params.circleBound,angles=params.angles;return params.paper.path().attr({sector:[circleBound.cx,circleBound.cy,circleBound.r,angles.startAngle,angles.endAngle]}).attr(params.attrs);},_renderPie:function(paper,data,callbacks){var circleBound=data.circleBound,colors=data.theme.colors,chartBackground=data.chartBackground,sectors=[];tui.util.forEachArray(data.sectorData,function(sectorDatum,index){var percentValue=sectorDatum.percentValue,color=colors[index],sector=this._renderSector({paper:paper,circleBound:circleBound,angles:sectorDatum.angles.start,attrs:{fill:color,stroke:chartBackground,"stroke-width":1}});this._bindHoverEvent(sector,index,callbacks);sectors.push({sector:sector,color:color,angles:sectorDatum.angles.end,percentValue:percentValue});},this);this.sectors=sectors;},renderLegendLines:function(outerPositions){var that=this,paths;if(this.legendLines){return;}paths=this._makeLinePaths(outerPositions);this.legendLines=tui.util.map(paths,function(path){return raphaelRenderUtil.renderLine(that.paper,path,"transparent",1);});},_makeLinePaths:function(outerPositions){var paths=tui.util.map(outerPositions,function(positions){return[raphaelRenderUtil.makeLinePath(positions.start,positions.middle),raphaelRenderUtil.makeLinePath(positions.middle,positions.end),"Z"].join("");},this);return paths;},_bindHoverEvent:function(target,index,callbacks){var args=[{},0,index],isOn=false,throttled=tui.util.throttle(function(){if(!isOn){return;}callbacks.funcShowTooltip.apply(null,arguments);},100);target.mouseover(function(e){var _args=args.concat({clientX:e.clientX,clientY:e.clientY});isOn=true;callbacks.funcShowTooltip.apply(null,_args);}).mousemove(function(e){var _args=args.concat({clientX:e.clientX,clientY:e.clientY-10});throttled.apply(null,_args);}).mouseout(function(){isOn=false;callbacks.funcHideTooltip();}).click(function(){callbacks.funcSelectSeries(index);});},_expandSector:function(sector){var cx=this.circleBound.cx,cy=this.circleBound.cy;sector.animate({transform:"s1.1 1.1 "+cx+" "+cy},ANIMATION_TIME,"elastic");},_restoreSector:function(sector){sector.animate({transform:""},ANIMATION_TIME,"elastic");},showAnimation:function(data){var sector=this.sectors[data.index].sector;this._expandSector(sector);},hideAnimation:function(data){var sector=this.sectors[data.index].sector;this._restoreSector(sector);},animate:function(callback){var delayTime=0,circleBound=this.circleBound;tui.util.forEachArray(this.sectors,function(item){var angles=item.angles,animationTime=LOADING_ANIMATION_TIME*item.percentValue,anim=Raphael.animation({sector:[circleBound.cx,circleBound.cy,circleBound.r,angles.startAngle,angles.endAngle]},animationTime);item.sector.animate(anim.delay(delayTime));delayTime+=animationTime;},this);if(callback){setTimeout(callback,delayTime);}},animateLegendLines:function(){if(!this.legendLines){return;}tui.util.forEachArray(this.legendLines,function(line){line.animate({stroke:"black","stroke-opacity":1});});},resize:function(params){var dimension=params.dimension,circleBound=params.circleBound;this.circleBound=circleBound;this.paper.setSize(dimension.width,dimension.height);tui.util.forEachArray(this.sectors,function(item){var angles=item.angles;item.sector.attr({sector:[circleBound.cx,circleBound.cy,circleBound.r,angles.startAngle,angles.endAngle]});},this);},moveLegendLines:function(outerPositions){var paths;if(!this.legendLines){return;}paths=this._makeLinePaths(outerPositions);tui.util.forEachArray(this.legendLines,function(line,index){line.attr({path:paths[index]});return line;});},selectSeries:function(indexes){var item=this.sectors[indexes.index],objColor=Raphael.color(item.color),color=this.selectionColor||raphaelRenderUtil.makeChangedLuminanceColor(objColor.hex,0.2);item.sector.attr({fill:color});},unselectSeries:function(indexes){var sector=this.sectors[indexes.index];sector.sector.attr({fill:sector.color});},selectLegend:function(legendIndex){var isNull=tui.util.isNull(legendIndex);tui.util.forEachArray(this.sectors,function(item,index){var opacity;opacity=(isNull||legendIndex===index)?EMPHASIS_OPACITY:DE_EMPHASIS_OPACITY;item.sector.attr({"fill-opacity":opacity});},this);}});module.exports=RaphaelPieChart;},{"./raphaelRenderUtil":47}],47:[function(require,module,exports){var raphaelRenderUtil={makeLinePath:function(fromPos,toPos,width){var fromPoint=[fromPos.left,fromPos.top],toPoint=[toPos.left,toPos.top];width=width||1;tui.util.forEachArray(fromPoint,function(from,index){if(from===toPoint[index]){fromPoint[index]=toPoint[index]=Math.round(from)-(width%2/2);}});return["M"].concat(fromPoint).concat("L").concat(toPoint);},renderLine:function(paper,path,color,strokeWidth){var line=paper.path([path]),strokeStyle={stroke:color,"stroke-width":strokeWidth||2};if(color==="transparent"){strokeStyle.stroke="#fff";strokeStyle["stroke-opacity"]=0;}line.attr(strokeStyle);return line;},forEach2dArray:function(groupItems,funcRenderItem){tui.util.forEachArray(groupItems,function(items,groupIndex){tui.util.forEachArray(items,function(item,index){funcRenderItem(item,groupIndex,index);},this);},this);},makeChangedLuminanceColor:function(hex,lum){hex=String(hex).replace(/[^0-9a-f]/gi,"");if(hex.length<6){hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];}lum=lum||0;return"#"+tui.util.map(tui.util.range(3),function(index){var c=parseInt(hex.substr(index*2,2),16);c=Math.round(Math.min(Math.max(0,c+(c*lum)),255)).toString(16);return("00"+c).substr(c.length);}).join("");}};module.exports=raphaelRenderUtil;},{}],48:[function(require,module,exports){if(!window.JSON){window.JSON={parse:function(sJSON){return eval("("+sJSON+")");},stringify:(function(){var toString=Object.prototype.toString;var isArray=Array.isArray||function(a){return toString.call(a)==="[object Array]";};var escMap={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};var escFunc=function(m){return escMap[m]||"\\u"+(m.charCodeAt(0)+65536).toString(16).substr(1);};var escRE=/[\\"\u0000-\u001F\u2028\u2029]/g;return function stringify(value){if(value==null){return"null";}else{if(typeof value==="number"){return isFinite(value)?value.toString():"null";}else{if(typeof value==="boolean"){return value.toString();}else{if(typeof value==="object"){if(typeof value.toJSON==="function"){return stringify(value.toJSON());}else{if(isArray(value)){var res="[";for(var i=0;i<value.length;i++){res+=(i?", ":"")+stringify(value[i]);}return res+"]";}else{if(toString.call(value)==="[object Object]"){var tmp=[];for(var k in value){if(value.hasOwnProperty(k)){tmp.push(stringify(k)+": "+stringify(value[k]));}}return"{"+tmp.join(", ")+"}";}}}}}}}return'"'+value.toString().replace(escRE,escFunc)+'"';};})()};}(function(){var lastTime=0;var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(callback){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(id){clearTimeout(id);};}}());},{}],49:[function(require,module,exports){var chartConst=require("./const"),chartFactory=require("./factories/chartFactory"),BarChart=require("./charts/barChart"),ColumnChart=require("./charts/columnChart"),LineChart=require("./charts/lineChart"),AreaChart=require("./charts/areaChart"),ComboChart=require("./charts/comboChart"),PieChart=require("./charts/pieChart");chartFactory.register(chartConst.CHART_TYPE_BAR,BarChart);chartFactory.register(chartConst.CHART_TYPE_COLUMN,ColumnChart);chartFactory.register(chartConst.CHART_TYPE_LINE,LineChart);chartFactory.register(chartConst.CHART_TYPE_AREA,AreaChart);chartFactory.register(chartConst.CHART_TYPE_COMBO,ComboChart);chartFactory.register(chartConst.CHART_TYPE_PIE,PieChart);},{"./charts/areaChart":4,"./charts/barChart":6,"./charts/columnChart":8,"./charts/comboChart":9,"./charts/lineChart":10,"./charts/pieChart":12,"./const":15,"./factories/chartFactory":23}],50:[function(require,module,exports){var chartConst=require("./const"),themeFactory=require("./factories/themeFactory"),defaultTheme=require("./themes/defaultTheme");themeFactory.register(chartConst.DEFAULT_THEME_NAME,defaultTheme);},{"./const":15,"./factories/themeFactory":25,"./themes/defaultTheme":60}],51:[function(require,module,exports){var Series=require("./series"),LineTypeSeriesBase=require("./lineTypeSeriesBase"),chartConst=require("../const");var AreaChartSeries=tui.util.defineClass(Series,{init:function(){Series.apply(this,arguments);},_makePositionTopOfZeroPoint:function(){var dimension=this.bound.dimension,limit=this.data.limit,limitDistance=this._getLimitDistanceFromZeroPoint(dimension.height,limit),top=limitDistance.toMax;if(limit.min>=0&&!top){top=dimension.height;}return top+chartConst.SERIES_EXPAND_SIZE;},_makeStackedPositions:function(groupPositions){var height=this.bound.dimension.height+chartConst.SERIES_EXPAND_SIZE,firstStartTop=this._makePositionTopOfZeroPoint(),prevPositionTops=[];return tui.util.map(groupPositions,function(positions){return tui.util.map(positions,function(position,index){var prevTop=prevPositionTops[index]||firstStartTop,stackedHeight=height-position.top,top=prevTop-stackedHeight;position.startTop=prevTop;position.top=top;prevPositionTops[index]=top;return position;});});},_makeNormalPositions:function(groupPositions){var startTop=this._makePositionTopOfZeroPoint();return tui.util.map(groupPositions,function(positions){return tui.util.map(positions,function(position){position.startTop=startTop;return position;});});},_makePositions:function(dimension){var groupPositions=this._makeBasicPositions(dimension);if(this.options.stacked){groupPositions=this._makeStackedPositions(groupPositions);}else{groupPositions=this._makeNormalPositions(groupPositions);}return groupPositions;},makeSeriesData:function(bound){var zeroTop=this._getLimitDistanceFromZeroPoint(bound.dimension.height,this.data.limit).toMax;return{groupPositions:this._makePositions(bound.dimension),zeroTop:zeroTop+chartConst.SERIES_EXPAND_SIZE};}});LineTypeSeriesBase.mixin(AreaChartSeries);module.exports=AreaChartSeries;},{"../const":15,"./lineTypeSeriesBase":56,"./series":58}],52:[function(require,module,exports){var Series=require("./series"),BarTypeSeriesBase=require("./barTypeSeriesBase"),chartConst=require("../const"),predicate=require("../helpers/predicate"),renderUtil=require("../helpers/renderUtil"),calculator=require("../helpers/calculator");var BarChartSeries=tui.util.defineClass(Series,{init:function(){Series.apply(this,arguments);},_makeBarChartBound:function(params){return{start:tui.util.extend({left:params.startLeft,width:0},params.baseBound),end:tui.util.extend({left:params.endLeft,width:params.endWidth},params.baseBound)};},_makeNormalBarChartBound:function(baseInfo,value,paddingTop,index){var startLeft,endWidth,bound,baseBound;startLeft=baseInfo.distance.toMin+chartConst.SERIES_EXPAND_SIZE;endWidth=Math.abs(value*baseInfo.dimension.width);baseBound={top:paddingTop+((baseInfo.step)*index)+chartConst.SERIES_EXPAND_SIZE,height:baseInfo.barSize};bound=this._makeBarChartBound({baseBound:baseBound,startLeft:startLeft,endLeft:startLeft+(value<0?-endWidth:0),endWidth:endWidth});return bound;},_makeNormalBarChartBounds:function(dimension){var baseInfo=this._makeBaseInfoForNormalChartBounds(dimension,"width","height"),bounds=this._makeNormalBounds(baseInfo,tui.util.bind(this._makeNormalBarChartBound,this));return bounds;},_makeStackedBarChartBounds:function(dimension){var that=this,baseInfo=this._makeBaseInfoForStackedChartBounds(dimension,"width");return this._makeStackedBounds(dimension,baseInfo,function(baseBound,endSize,endPosition){return that._makeBarChartBound({baseBound:baseBound,startLeft:baseInfo.distance.toMin+chartConst.SERIES_EXPAND_SIZE,endLeft:baseInfo.distance.toMin+endPosition,endWidth:endSize});});},_makeBounds:function(dimension){var bounds;if(predicate.isValidStackedOption(this.options.stacked)){bounds=this._makeStackedBarChartBounds(dimension);}else{bounds=this._makeNormalBarChartBounds(dimension);}return bounds;},makeSeriesRenderingPosition:function(params){var labelWidth=renderUtil.getRenderedLabelWidth(params.formattedValue,this.theme.label),bound=params.bound,left=bound.left,top=bound.top+(bound.height-params.labelHeight+chartConst.TEXT_PADDING)/2;if(params.value>=0){left+=bound.width+chartConst.SERIES_LABEL_PADDING;}else{left-=labelWidth+chartConst.SERIES_LABEL_PADDING;}return{left:left,top:top};},_calculateSumLabelTopPosition:function(bound,labelHeight){return bound.top+((bound.height-labelHeight+chartConst.TEXT_PADDING)/2);},_makePlusSumLabelHtml:function(values,bound,labelHeight){var sum,formattedSum,html="";if(bound){sum=calculator.sumPlusValues(values);formattedSum=renderUtil.formatValue(sum,this.dataProcessor.getFormatFunctions());html=this._makeSeriesLabelHtml({left:bound.left+bound.width+chartConst.SERIES_LABEL_PADDING,top:this._calculateSumLabelTopPosition(bound,labelHeight)},formattedSum,-1,-1);}return html;},_makeMinusSumLabelHtml:function(values,bound,labelHeight){var sum,formattedSum,labelWidth,html="";if(bound){sum=calculator.sumMinusValues(values);formattedSum=renderUtil.formatValue(sum,this.dataProcessor.getFormatFunctions());labelWidth=renderUtil.getRenderedLabelWidth(formattedSum,this.theme.label);html=this._makeSeriesLabelHtml({left:bound.left-labelWidth-chartConst.SERIES_LABEL_PADDING,top:this._calculateSumLabelTopPosition(bound,labelHeight)},formattedSum,-1,-1);}return html;}});BarTypeSeriesBase.mixin(BarChartSeries);module.exports=BarChartSeries;},{"../const":15,"../helpers/calculator":28,"../helpers/predicate":32,"../helpers/renderUtil":33,"./barTypeSeriesBase":53,"./series":58}],53:[function(require,module,exports){var chartConst=require("../const"),renderUtil=require("../helpers/renderUtil");var BarTypeSeriesBase=tui.util.defineClass({makeSeriesData:function(bound){var groupBounds=this._makeBounds(bound.dimension);this.groupBounds=groupBounds;return{groupBounds:groupBounds,groupValues:this._getPercentValues()};},_makeBarGutter:function(groupSize,itemCount){var baseSize=groupSize/(itemCount+1)/2,gutter;if(baseSize<=2){gutter=0;}else{if(baseSize<=6){gutter=2;}else{gutter=4;}}return gutter;},_makeBarSize:function(groupSize,barGutter,itemCount){return(groupSize-(barGutter*(itemCount-1)))/(itemCount+1);},_makeOptionSize:function(barSize,optionBarWidth){var optionsSize=0;if(optionBarWidth){optionsSize=tui.util.min([barSize,optionBarWidth]);}return optionsSize;},_makeAdditionPadding:function(barSize,optionSize,itemCount){var padding=0;if(optionSize&&optionSize<barSize){padding=(barSize-optionSize)*itemCount/2;}return(barSize/2)+padding;},_makeBaseInfoForNormalChartBounds:function(dimension,sizeType,anotherSizeType){var groupValues=this._getPercentValues(),groupSize=dimension[anotherSizeType]/groupValues.length,itemCount=groupValues[0]&&groupValues[0].length||0,barGutter=this._makeBarGutter(groupSize,itemCount),barSize=this._makeBarSize(groupSize,barGutter,itemCount),optionSize=this._makeOptionSize(barSize,this.options.barWidth),additionPadding=this._makeAdditionPadding(barSize,optionSize,itemCount),limitDistance=this._getLimitDistanceFromZeroPoint(dimension[sizeType],this.data.limit);barSize=optionSize||barSize;return{dimension:dimension,groupSize:groupSize,barSize:barSize,additionPadding:additionPadding,step:barSize+barGutter,distance:limitDistance,isMinus:this.data.limit.min<0&&this.data.limit.max<=0};},_makeNormalBounds:function(baseInfo,iteratee){return tui.util.map(this._getPercentValues(),function(values,groupIndex){var padding=(baseInfo.groupSize*groupIndex)+baseInfo.additionPadding;return tui.util.map(values,function(value,index){return iteratee(baseInfo,value,padding,index);},this);},this);},_makeBaseInfoForStackedChartBounds:function(dimension,sizeType){var limitDistance=this._getLimitDistanceFromZeroPoint(dimension[sizeType],this.data.limit),baseBound={},groupSize,barWidth,optionWidth,additionPadding,anotherSizeType,positionTop,baseEndPosition;if(sizeType==="height"){anotherSizeType="width";positionTop="left";baseEndPosition=-chartConst.SERIES_EXPAND_SIZE;}else{anotherSizeType="height";positionTop="top";baseEndPosition=chartConst.SERIES_EXPAND_SIZE;}groupSize=(dimension[anotherSizeType]/this._getPercentValues().length);barWidth=groupSize/2;optionWidth=this._makeOptionSize(barWidth,this.options.barWidth);additionPadding=this._makeAdditionPadding(barWidth,optionWidth,1);baseBound[anotherSizeType]=optionWidth||barWidth;return{groupSize:groupSize,baseBound:baseBound,additionPadding:additionPadding+chartConst.SERIES_EXPAND_SIZE,dimensionSize:dimension[sizeType],positionType:positionTop,baseEndPosition:baseEndPosition,distance:limitDistance};},_makeStackedBounds:function(dimension,baseInfo,makeBoundFunc){var bounds=tui.util.map(this._getPercentValues(),function(values,groupIndex){var padding=(baseInfo.groupSize*groupIndex)+baseInfo.additionPadding,endPlusPosition=baseInfo.baseEndPosition,endMinusPosition=baseInfo.baseEndPosition;return tui.util.map(values,function(value){var bound=null,endSize=Math.abs(value*baseInfo.dimensionSize);baseInfo.baseBound[baseInfo.positionType]=padding;if(value>=0){bound=makeBoundFunc(baseInfo.baseBound,endSize,endPlusPosition);endPlusPosition+=endSize;}else{endMinusPosition-=endSize;bound=makeBoundFunc(baseInfo.baseBound,endSize,endMinusPosition);}return bound;},this);},this);return bounds;},_renderNormalSeriesLabel:function(params,elSeriesLabelArea){var groupBounds=params.groupBounds,firstFormattedValue=this.dataProcessor.getFirstFormattedValue(this.chartType),labelHeight=renderUtil.getRenderedLabelHeight(firstFormattedValue,this.theme.label),html;html=tui.util.map(this.dataProcessor.getGroupValues(this.chartType),function(values,groupIndex){return tui.util.map(values,function(value,index){var bound,formattedValue,renderingPosition;bound=groupBounds[groupIndex][index].end;formattedValue=this.dataProcessor.getFormattedValue(groupIndex,index,this.chartType);renderingPosition=this.makeSeriesRenderingPosition({value:value,bound:bound,formattedValue:formattedValue,labelHeight:labelHeight});return this._makeSeriesLabelHtml(renderingPosition,formattedValue,groupIndex,index);},this).join("");},this).join("");elSeriesLabelArea.innerHTML=html;},_makeSumValues:function(values){var sum=tui.util.sum(values);return renderUtil.formatValue(sum,this.dataProcessor.getFormatFunctions());},_makeStackedLabelPosition:function(bound,formattedValue,labelHeight){var labelWidth=renderUtil.getRenderedLabelWidth(formattedValue,this.theme.label),left=bound.left+((bound.width-labelWidth+chartConst.TEXT_PADDING)/2),top=bound.top+((bound.height-labelHeight+chartConst.TEXT_PADDING)/2);return{left:left,top:top};},_makeStackedLabelsHtml:function(params){var values=params.values,labelHeight=params.labelHeight,htmls,plusBound,minusBound;htmls=tui.util.map(values,function(value,index){var bound=params.bounds[index],labelHtml="",boundEnd,formattedValue,position;if(bound&&value){boundEnd=bound.end;formattedValue=this.dataProcessor.getFormattedValue(params.groupIndex,index,this.chartType);position=this._makeStackedLabelPosition(boundEnd,formattedValue,params.labelHeight);labelHtml=this._makeSeriesLabelHtml(position,formattedValue,params.groupIndex,index);}if(value>0){plusBound=boundEnd;}else{if(value<0){minusBound=boundEnd;}}return labelHtml;},this);if(this.options.stacked==="normal"){htmls.push(this._makePlusSumLabelHtml(values,plusBound,labelHeight));htmls.push(this._makeMinusSumLabelHtml(values,minusBound,labelHeight));}return htmls.join("");},_renderStackedSeriesLabel:function(params,elSeriesLabelArea){var groupBounds=params.groupBounds,groupValues=this.dataProcessor.getGroupValues(this.chartType),firstFormattedValue=this.dataProcessor.getFirstFormattedValue(this.chartType),labelHeight=renderUtil.getRenderedLabelHeight(firstFormattedValue,this.theme.label),html;html=tui.util.map(groupValues,function(values,index){var labelsHtml=this._makeStackedLabelsHtml({groupIndex:index,values:values,bounds:groupBounds[index],labelHeight:labelHeight});return labelsHtml;},this).join("");elSeriesLabelArea.innerHTML=html;},_renderSeriesLabel:function(params,elSeriesLabelArea){if(!this.options.showLabel){return;}if(this.options.stacked){this._renderStackedSeriesLabel(params,elSeriesLabelArea);}else{this._renderNormalSeriesLabel(params,elSeriesLabelArea);}}});BarTypeSeriesBase.mixin=function(func){tui.util.extend(func.prototype,BarTypeSeriesBase.prototype);};module.exports=BarTypeSeriesBase;},{"../const":15,"../helpers/renderUtil":33}],54:[function(require,module,exports){var Series=require("./series"),BarTypeSeriesBase=require("./barTypeSeriesBase"),chartConst=require("../const"),predicate=require("../helpers/predicate"),renderUtil=require("../helpers/renderUtil"),calculator=require("../helpers/calculator");var ColumnChartSeries=tui.util.defineClass(Series,{init:function(){Series.apply(this,arguments);},_makeStartEndTops:function(endTop,endHeight,value){var startTop;if(value<0){startTop=endTop;}else{startTop=endTop;endTop-=endHeight;}return{startTop:startTop,endTop:endTop};},_makeColumnChartBound:function(params){return{start:tui.util.extend({top:params.startTop,height:0},params.baseBound),end:tui.util.extend({top:params.endTop,height:params.endHeight},params.baseBound)};},_makeNormalColumnChartBound:function(baseInfo,value,paddingLeft,index){var endHeight,endTop,startEndTops,bound;endHeight=Math.abs(value*baseInfo.dimension.height);endTop=(baseInfo.isMinus?0:(baseInfo.distance.toMax||baseInfo.dimension.height))+chartConst.SERIES_EXPAND_SIZE;startEndTops=this._makeStartEndTops(endTop,endHeight,value);bound=this._makeColumnChartBound(tui.util.extend({baseBound:{left:paddingLeft+(baseInfo.step*index)+chartConst.SERIES_EXPAND_SIZE,width:baseInfo.barSize},endHeight:endHeight},startEndTops));return bound;},_makeNormalColumnChartBounds:function(dimension){var baseInfo=this._makeBaseInfoForNormalChartBounds(dimension,"height","width"),bounds=this._makeNormalBounds(baseInfo,tui.util.bind(this._makeNormalColumnChartBound,this));return bounds;},_makeStackedColumnChartBounds:function(dimension){var that=this,baseInfo=this._makeBaseInfoForStackedChartBounds(dimension,"height"),bounds=this._makeStackedBounds(dimension,baseInfo,function(baseBound,endSize,endPosition){return that._makeColumnChartBound({baseBound:baseBound,startTop:baseInfo.distance.toMax+chartConst.SERIES_EXPAND_SIZE,endTop:baseInfo.distance.toMax-endSize-endPosition,endHeight:endSize});});return bounds;},_makeBounds:function(dimension){var bounds;if(predicate.isValidStackedOption(this.options.stacked)){bounds=this._makeStackedColumnChartBounds(dimension);}else{bounds=this._makeNormalColumnChartBounds(dimension);}return bounds;},makeSeriesRenderingPosition:function(params){var labelWidth=renderUtil.getRenderedLabelWidth(params.formattedValue,this.theme.label),bound=params.bound,top=bound.top,left=bound.left+(bound.width-labelWidth)/2;if(params.value>=0){top-=params.labelHeight+chartConst.SERIES_LABEL_PADDING;}else{top+=bound.height+chartConst.SERIES_LABEL_PADDING;}return{left:left,top:top};},_calculateSumLabelLeftPosition:function(bound,formattedSum){var labelWidth=renderUtil.getRenderedLabelWidth(formattedSum,this.theme.label);return bound.left+((bound.width-labelWidth+chartConst.TEXT_PADDING)/2);},_makePlusSumLabelHtml:function(values,bound,labelHeight){var sum,formattedSum,html="";if(bound){sum=calculator.sumPlusValues(values);formattedSum=renderUtil.formatValue(sum,this.dataProcessor.getFormatFunctions());html=this._makeSeriesLabelHtml({left:this._calculateSumLabelLeftPosition(bound,formattedSum),top:bound.top-labelHeight-chartConst.SERIES_LABEL_PADDING},formattedSum,-1,-1);}return html;},_makeMinusSumLabelHtml:function(values,bound){var sum,formattedSum,html="";if(bound){sum=calculator.sumMinusValues(values);formattedSum=renderUtil.formatValue(sum,this.dataProcessor.getFormatFunctions());html=this._makeSeriesLabelHtml({left:this._calculateSumLabelLeftPosition(bound,formattedSum),top:bound.top+bound.height+chartConst.SERIES_LABEL_PADDING},formattedSum,-1,-1);}return html;}});BarTypeSeriesBase.mixin(ColumnChartSeries);module.exports=ColumnChartSeries;},{"../const":15,"../helpers/calculator":28,"../helpers/predicate":32,"../helpers/renderUtil":33,"./barTypeSeriesBase":53,"./series":58}],55:[function(require,module,exports){var Series=require("./series"),LineTypeSeriesBase=require("./lineTypeSeriesBase");var LineChartSeries=tui.util.defineClass(Series,{init:function(){Series.apply(this,arguments);},_makePositions:function(dimension){return this._makeBasicPositions(dimension);},makeSeriesData:function(bound){return{groupPositions:this._makePositions(bound.dimension)};}});LineTypeSeriesBase.mixin(LineChartSeries);module.exports=LineChartSeries;},{"./lineTypeSeriesBase":56,"./series":58}],56:[function(require,module,exports){var chartConst=require("../const"),renderUtil=require("../helpers/renderUtil");var LineTypeSeriesBase=tui.util.defineClass({_makeBasicPositions:function(dimension){var groupValues=this._getPercentValues(),width=dimension.width,height=dimension.height,len=groupValues[0].length,start=chartConst.SERIES_EXPAND_SIZE,step;if(this.data.aligned){step=width/(len-1);}else{step=width/len;start+=(step/2);}return tui.util.map(groupValues,function(values){return tui.util.map(values,function(value,index){return{left:start+(step*index),top:height-(value*height)+chartConst.SERIES_EXPAND_SIZE};});});},_makeLabelPositionTop:function(position,value,labelHeight){var positionTop;if(this.options.stacked&&position.startTop){positionTop=(position.startTop+position.top-labelHeight)/2+1;}else{if(value<0&&!tui.util.isUndefined(position.startTop)){positionTop=position.top+chartConst.SERIES_LABEL_PADDING;}else{positionTop=position.top-labelHeight-chartConst.SERIES_LABEL_PADDING;}}return positionTop;},_renderSeriesLabel:function(params,elSeriesLabelArea){var formattedValues,firstFormattedValue,groupPositions,labelHeight,html;if(!this.options.showLabel){return;}groupPositions=params.groupPositions;formattedValues=tui.util.pivot(this.dataProcessor.getFormattedGroupValues(this.chartType));firstFormattedValue=this.dataProcessor.getFirstFormattedValue(this.chartType);labelHeight=renderUtil.getRenderedLabelHeight(firstFormattedValue,this.theme.label);html=tui.util.map(formattedValues,function(values,groupIndex){return tui.util.map(values,function(value,index){var position=groupPositions[groupIndex][index],labelHtml="",labelWidth;if(position.top!==position.startTop){labelWidth=renderUtil.getRenderedLabelWidth(value,this.theme.label);labelHtml=this._makeSeriesLabelHtml({left:position.left-(labelWidth/2),top:this._makeLabelPositionTop(position,value,labelHeight)},value,index,groupIndex);}return labelHtml;},this).join("");},this).join("");elSeriesLabelArea.innerHTML=html;},_isChanged:function(groupIndex,index){var prevIndexes=this.prevIndexes;this.prevIndexes={groupIndex:groupIndex,index:index};return !prevIndexes||(prevIndexes.groupIndex!==groupIndex)||(prevIndexes.index!==index);},onShowGroupTooltipLine:function(bound){if(!this.graphRenderer.showGroupTooltipLine){return;}this.graphRenderer.showGroupTooltipLine(bound);},onHideGroupTooltipLine:function(){if(!this.graphRenderer.hideGroupTooltipLine){return;}this.graphRenderer.hideGroupTooltipLine();}});LineTypeSeriesBase.mixin=function(func){tui.util.extend(func.prototype,LineTypeSeriesBase.prototype);};module.exports=LineTypeSeriesBase;},{"../const":15,"../helpers/renderUtil":33}],57:[function(require,module,exports){var Series=require("./series"),chartConst=require("../const"),predicate=require("../helpers/predicate"),dom=require("../helpers/domHandler"),renderUtil=require("../helpers/renderUtil"),eventListener=require("../helpers/eventListener");var PieChartSeries=tui.util.defineClass(Series,{init:function(params){this.legendAlign=params.legendAlign;this.chartBackground=params.chartBackground;Series.call(this,params);},_makeSectorData:function(percentValues,circleBound){var cx=circleBound.cx,cy=circleBound.cy,r=circleBound.r,angle=0,delta=10,paths;paths=tui.util.map(percentValues,function(percentValue){var addAngle=chartConst.ANGLE_360*percentValue,endAngle=angle+addAngle,popupAngle=angle+(addAngle/2),angles={start:{startAngle:angle,endAngle:angle},end:{startAngle:angle,endAngle:endAngle}},positionData={cx:cx,cy:cy,angle:popupAngle};angle=endAngle;return{percentValue:percentValue,angles:angles,centerPosition:this._getArcPosition(tui.util.extend({r:(r/2)+delta},positionData)),outerPosition:{start:this._getArcPosition(tui.util.extend({r:r},positionData)),middle:this._getArcPosition(tui.util.extend({r:r+delta},positionData))}};},this);return paths;},makeSeriesData:function(bound){var circleBound=this._makeCircleBound(bound.dimension,{showLabel:this.options.showLabel,legendAlign:this.legendAlign}),sectorData=this._makeSectorData(this._getPercentValues()[0],circleBound);return{chartBackground:this.chartBackground,circleBound:circleBound,sectorData:sectorData};},_makeCircleBound:function(dimension,options){var width=dimension.width,height=dimension.height,isSmallPie=predicate.isOuterLegendAlign(options.legendAlign)&&options.showLabel,radiusRate=isSmallPie?chartConst.PIE_GRAPH_SMALL_RATE:chartConst.PIE_GRAPH_DEFAULT_RATE,diameter=tui.util.multiplication(tui.util.min([width,height]),radiusRate);return{cx:tui.util.division(width,2),cy:tui.util.division(height,2),r:tui.util.division(diameter,2)};},_getArcPosition:function(params){return{left:params.cx+(params.r*Math.sin(params.angle*chartConst.RAD)),top:params.cy-(params.r*Math.cos(params.angle*chartConst.RAD))};},_makeSeriesDataForSeriesLabel:function(seriesData){return tui.util.extend({options:{legendAlign:this.legendAlign,showLabel:this.options.showLabel},chartWidth:this.data.chartWidth},seriesData);},_renderGraph:function(dimension,seriesData){var funcShowTooltip=tui.util.bind(this.showTooltip,this,{allowNegativeTooltip:!!this.allowNegativeTooltip,chartType:this.chartType}),callbacks={funcShowTooltip:funcShowTooltip,funcHideTooltip:tui.util.bind(this.hideTooltip,this),funcSelectSeries:tui.util.bind(this.selectSeries,this)},params=this._makeParamsForGraphRendering(dimension,seriesData);this.graphRenderer.render(this.seriesContainer,params,callbacks);},render:function(){var el=Series.prototype.render.apply(this,arguments);this.attachEvent(el);return el;},resize:function(){Series.prototype.resize.apply(this,arguments);this._moveLegendLines(this.seriesData);this._updateContainerBound();},showTooltip:function(params,bound,groupIndex,index,eventPosition){this.fire("showTooltip",tui.util.extend({indexes:{groupIndex:groupIndex,index:index},bound:bound,eventPosition:eventPosition},params));},hideTooltip:function(){this.fire("hideTooltip");},_makeSeriesDataBySelection:function(index){return{indexes:{index:index,groupIndex:index}};},selectSeries:function(index){var seriesData=this._makeSeriesDataBySelection(index);if(this.selectedIndex===index){this.onUnselectSeries(seriesData);delete this.selectedIndex;}else{if(!tui.util.isUndefined(this.selectedIndex)){this.onUnselectSeries(this._makeSeriesDataBySelection(this.selectedIndex));}this.onSelectSeries(seriesData);this.selectedIndex=index;}},_getSeriesLabel:function(params){var seriesLabel="";if(params.options.legendAlign){seriesLabel='<span class="tui-chart-series-legend">'+params.legend+"</span>";}if(params.options.showLabel){seriesLabel+=(seriesLabel?params.separator:"")+params.label;}return seriesLabel;},_renderLegendLabel:function(params,seriesLabelContainer){var positions=params.positions,html;html=tui.util.map(this.dataProcessor.getLegendLabels(),function(legend,index){var label=this._getSeriesLabel({legend:legend,label:this.dataProcessor.getFormattedValue(0,index,this.chartType),separator:params.separator,options:params.options}),position=params.funcMoveToPosition(positions[index],label);return this._makeSeriesLabelHtml(position,label,0,index);},this).join("");seriesLabelContainer.innerHTML=html;},_moveToCenterPosition:function(position,label){var left=position.left-(renderUtil.getRenderedLabelWidth(label,this.theme.label)/2),top=position.top-(renderUtil.getRenderedLabelHeight(label,this.theme.label)/2);return{left:left,top:top};},_renderCenterLegend:function(params,seriesLabelContainer){this._renderLegendLabel(tui.util.extend({positions:tui.util.pluck(params.sectorData,"centerPosition"),funcMoveToPosition:tui.util.bind(this._moveToCenterPosition,this),separator:"<br>"},params),seriesLabelContainer);},_addEndPosition:function(centerLeft,positions){tui.util.forEach(positions,function(position){var end=tui.util.extend({},position.middle);if(end.left<centerLeft){end.left-=chartConst.SERIES_OUTER_LABEL_PADDING;}else{end.left+=chartConst.SERIES_OUTER_LABEL_PADDING;}position.end=end;});},_moveToOuterPosition:function(centerLeft,position,label){var positionEnd=position.end,left=positionEnd.left,top=positionEnd.top-(renderUtil.getRenderedLabelHeight(label,this.theme.label)/2);if(left<centerLeft){left-=renderUtil.getRenderedLabelWidth(label,this.theme.label)+chartConst.SERIES_LABEL_PADDING;}else{left+=chartConst.SERIES_LABEL_PADDING;}return{left:left,top:top};},_renderOuterLegend:function(params,seriesLabelContainer){var outerPositions=tui.util.pluck(params.sectorData,"outerPosition"),centerLeft=params.chartWidth/2;this._addEndPosition(centerLeft,outerPositions);this._renderLegendLabel(tui.util.extend({positions:outerPositions,funcMoveToPosition:tui.util.bind(this._moveToOuterPosition,this,centerLeft),separator:":&nbsp;"},params),seriesLabelContainer);this.graphRenderer.renderLegendLines(outerPositions);},_renderSeriesLabel:function(params,seriesLabelContainer){var legendAlign=params.options.legendAlign;if(predicate.isOuterLegendAlign(legendAlign)){this._renderOuterLegend(params,seriesLabelContainer);}else{this._renderCenterLegend(params,seriesLabelContainer);}},animateShowingAboutSeriesLabelArea:function(){this.graphRenderer.animateLegendLines();Series.prototype.animateShowingAboutSeriesLabelArea.call(this);},_moveLegendLines:function(seriesData){var outerPositions=tui.util.pluck(seriesData.sectorData,"outerPosition"),centerLeft=this.data.chartWidth/2;this._addEndPosition(centerLeft,outerPositions);this.graphRenderer.moveLegendLines(outerPositions);},_handleMouseEvent:function(e,callback){var elTarget=e.target||e.srcElement,elLabel=this._findLabelElement(elTarget),groupIndex,index;if(!elLabel){return;}groupIndex=parseInt(elLabel.getAttribute("data-group-index"),10);index=parseInt(elLabel.getAttribute("data-index"),10);if(groupIndex===-1||index===-1){return;}callback(groupIndex,index,elTarget);},_findLegendElement:function(elTarget){var elLegend;if(dom.hasClass(elTarget,chartConst.CLASS_NAME_SERIES_LEGEND)){elLegend=elTarget;}return elLegend;},_onClick:function(e){var that=this;this._handleMouseEvent(e,function(groupIndex,index,elTarget){var elLegend=that._findLegendElement(elTarget),legendData;if(!elLegend){that.selectSeries(index);}else{legendData=that.dataProcessor.getLegendData(index);that.userEvent.fire("selectLegend",{legend:legendData.label,chartType:legendData.chartType,legendIndex:index,index:index});}});},_updateContainerBound:function(){this.containerBound=this.seriesContainer.getBoundingClientRect();},_getContainerBound:function(){if(!this.containerBound){this._updateContainerBound();}return this.containerBound;},_makeLabelBound:function(clientX,clientY){var containerBound=this._getContainerBound();return{left:clientX-containerBound.left,top:clientY-containerBound.top};},_onMouseover:function(e){var that=this;this._handleMouseEvent(e,function(groupIndex,index){var bound=that._makeLabelBound(e.clientX,e.clientY-10);that.showTooltip({allowNegativeTooltip:!!that.allowNegativeTooltip,chartType:that.chartType},bound,groupIndex,index);});},_onMouseout:function(e){var that=this;this._handleMouseEvent(e,function(groupIndex,index){that.hideTooltip(groupIndex,index);});},attachEvent:function(el){eventListener.bindEvent("click",el,tui.util.bind(this._onClick,this));eventListener.bindEvent("mouseover",el,tui.util.bind(this._onMouseover,this));eventListener.bindEvent("mouseout",el,tui.util.bind(this._onMouseout,this));}});tui.util.CustomEvents.mixin(PieChartSeries);module.exports=PieChartSeries;},{"../const":15,"../helpers/domHandler":30,"../helpers/eventListener":31,"../helpers/predicate":32,"../helpers/renderUtil":33,"./series":58}],58:[function(require,module,exports){var seriesTemplate=require("./seriesTemplate"),chartConst=require("../const"),dom=require("../helpers/domHandler"),renderUtil=require("../helpers/renderUtil"),pluginFactory=require("../factories/pluginFactory");var Series=tui.util.defineClass({init:function(params){var libType=params.libType||chartConst.DEFAULT_PLUGIN;this.chartType=params.chartType;this.componentType=params.componentType;this.dataProcessor=params.dataProcessor;this.userEvent=params.userEvent;this.options=params.options||{};this.orgTheme=this.theme=params.theme;this.graphRenderer=pluginFactory.get(libType,params.chartType);this.className="tui-chart-series-area";this.seriesContainer=null;this.seriesLabelContainer=null;this.seriesData=[];this.selectedLegendIndex=null;},makeSeriesData:function(){return{};},getSeriesData:function(){return this.seriesData;},_renderSeriesLabel:function(){},_setBaseData:function(bound,data){this.data=data;this.bound=bound;this.dataProcessor.setPercentValues(this.data.limit,this.options.stacked,this.chartType);},_getPercentValues:function(){return this.dataProcessor.getPercentValues(this.chartType);},_renderSeriesLabelArea:function(dimension,seriesData,seriesLabelContainer){var addDataForSeriesLabel=this._makeSeriesDataForSeriesLabel(seriesData,dimension);if(!seriesLabelContainer){seriesLabelContainer=dom.create("div","tui-chart-series-label-area");}this._renderSeriesLabel(addDataForSeriesLabel,seriesLabelContainer);return seriesLabelContainer;},_renderSeriesArea:function(seriesContainer,bound,data,funcRenderGraph){var expandedBound,seriesData,seriesLabelContainer;this._setBaseData(bound,data);expandedBound=renderUtil.expandBound(bound);this.seriesData=seriesData=this.makeSeriesData(bound);renderUtil.renderDimension(seriesContainer,expandedBound.dimension);this._renderPosition(seriesContainer,expandedBound.position,this.chartType);if(funcRenderGraph){funcRenderGraph(expandedBound.dimension,seriesData);}seriesLabelContainer=this._renderSeriesLabelArea(expandedBound.dimension,seriesData,this.seriesLabelContainer);if(!this.seriesLabelContainer){this.seriesLabelContainer=seriesLabelContainer;dom.append(seriesContainer,seriesLabelContainer);}},_makeParamsForGraphRendering:function(dimension,seriesData){return tui.util.extend({dimension:dimension,chartType:this.chartType,theme:this.theme,options:this.options},seriesData);},_renderGraph:function(dimension,seriesData){var params=this._makeParamsForGraphRendering(dimension,seriesData);this.graphRenderer.render(this.seriesContainer,params);},render:function(bound,data){var el=dom.create("DIV",this.className);this.seriesContainer=el;this.bound=bound;this._renderSeriesArea(el,bound,data,tui.util.bind(this._renderGraph,this));return el;},_updateTheme:function(theme,checkedLegends){var cloneTheme;if(!checkedLegends.length){return theme;}cloneTheme=JSON.parse(JSON.stringify(theme));cloneTheme.colors=tui.util.filter(cloneTheme.colors,function(color,index){return checkedLegends[index];});return cloneTheme;},rerender:function(bound,data){var groupValues=this.dataProcessor.getGroupValues(this.chartType),that=this;this.seriesContainer.innerHTML="";this.seriesLabelContainer=null;this.selectedLegendIndex=null;this.seriesData=[];if(groupValues&&groupValues.length){this.theme=this._updateTheme(this.orgTheme,data.checkedLegends);this._renderSeriesArea(this.seriesContainer,bound,data,tui.util.bind(that._renderGraph,this));if(this.labelShower){clearInterval(this.labelShower.timerId);}this.animateComponent();}},_resizeGraph:function(dimension,seriesData){this.graphRenderer.resize(tui.util.extend({dimension:dimension},seriesData));},resize:function(bound,data){this._renderSeriesArea(this.seriesContainer,bound,data,tui.util.bind(this._resizeGraph,this));},_makeSeriesDataForSeriesLabel:function(seriesData,dimension){return tui.util.extend({dimension:dimension},seriesData);},_renderPosition:function(el,position){var hiddenWidth=renderUtil.isOldBrowser()?chartConst.HIDDEN_WIDTH:0;renderUtil.renderPosition(el,{top:position.top-(hiddenWidth*2),left:position.left-hiddenWidth});},_getLimitDistanceFromZeroPoint:function(size,limit){var min=limit.min,max=limit.max,distance=max-min,toMax=0,toMin=0;if(min<=0&&max>=0){toMax=(distance+min)/distance*size;toMin=(distance-max)/distance*size;}return{toMax:toMax,toMin:toMin};},_findLabelElement:function(elTarget){var elLabel=null;if(dom.hasClass(elTarget,chartConst.CLASS_NAME_SERIES_LABEL)){elLabel=elTarget;}else{elLabel=dom.findParentByClass(elTarget,chartConst.CLASS_NAME_SERIES_LABEL);}return elLabel;},onShowAnimation:function(data){if(!this.graphRenderer.showAnimation){return;}this.graphRenderer.showAnimation(data);},onHideAnimation:function(data){if(!this.graphRenderer.hideAnimation){return;}this.graphRenderer.hideAnimation(data);},onShowGroupAnimation:function(index){if(!this.graphRenderer.showGroupAnimation){return;}this.graphRenderer.showGroupAnimation(index);},onHideGroupAnimation:function(index){if(!this.graphRenderer.hideGroupAnimation){return;}this.graphRenderer.hideGroupAnimation(index);},animateComponent:function(){if(this.graphRenderer.animate){this.graphRenderer.animate(tui.util.bind(this.animateShowingAboutSeriesLabelArea,this));}},_makeOpacityCssText:(function(){var funcMakeOpacityCssText;if(renderUtil.isOldBrowser()){funcMakeOpacityCssText=function(opacity){return";filter: alpha(opacity="+(opacity*100)+")";};}else{funcMakeOpacityCssText=function(_opacity){return";opacity: "+_opacity;};}return funcMakeOpacityCssText;})(),_makeSeriesLabelHtml:function(position,value,groupIndex,index){var cssObj=tui.util.extend(position,this.theme.label);if(!tui.util.isNull(this.selectedLegendIndex)&&this.selectedLegendIndex!==index){cssObj.opacity=this._makeOpacityCssText(0.3);}else{cssObj.opacity="";}return seriesTemplate.tplSeriesLabel({cssText:seriesTemplate.tplCssText(cssObj),value:value,groupIndex:groupIndex,index:index});},animateShowingAboutSeriesLabelArea:function(){var that=this;if((!this.options.showLabel&&!this.legendAlign)||!this.seriesLabelContainer){return;}dom.addClass(this.seriesLabelContainer,"show");this.labelShower=new tui.component.Effects.Fade({element:this.seriesLabelContainer,duration:300});this.labelShower.action({start:0,end:1,complete:function(){clearInterval(that.labelShower.timerId);delete that.labelShower;}});},_makeExportationSeriesData:function(seriesData){var legendIndex=seriesData.indexes.index,legendData=this.dataProcessor.getLegendData(legendIndex);return{chartType:legendData.chartType,legend:legendData.label,legendIndex:legendIndex,index:seriesData.indexes.groupIndex};},onSelectSeries:function(seriesData){this.userEvent.fire("selectSeries",this._makeExportationSeriesData(seriesData));if(this.options.hasSelection){this.graphRenderer.selectSeries(seriesData.indexes);}},onUnselectSeries:function(seriesData){this.userEvent.fire("unselectSeries",this._makeExportationSeriesData(seriesData));if(this.options.hasSelection){this.graphRenderer.unselectSeries(seriesData.indexes);}},onSelectLegend:function(chartType,legendIndex){var groupValues=this.dataProcessor.getGroupValues(this.chartType);if(this.chartType!==chartType&&!tui.util.isNull(legendIndex)){legendIndex=-1;}this.selectedLegendIndex=legendIndex;if(groupValues&&groupValues.length){this._renderSeriesArea(this.seriesContainer,this.bound,this.data);this.graphRenderer.selectLegend(legendIndex);}}});module.exports=Series;},{"../const":15,"../factories/pluginFactory":24,"../helpers/domHandler":30,"../helpers/renderUtil":33,"./seriesTemplate":59}],59:[function(require,module,exports){var templateMaker=require("../helpers/templateMaker");var tags={HTML_SERIES_LABEL:'<div class="tui-chart-series-label" style="{{ cssText }}" data-group-index="{{ groupIndex }}" data-index="{{ index }}">{{ value }}</div>',TEXT_CSS_TEXT:"left:{{ left }}px;top:{{ top }}px;font-family:{{ fontFamily }};font-size:{{ fontSize }}px{{opacity}}"};module.exports={tplSeriesLabel:templateMaker.template(tags.HTML_SERIES_LABEL),tplCssText:templateMaker.template(tags.TEXT_CSS_TEXT)};},{"../helpers/templateMaker":34}],60:[function(require,module,exports){var DEFAULT_COLOR="#000000",DEFAULT_BACKGROUND="#ffffff",EMPTY="",DEFAULT_AXIS={tickColor:DEFAULT_COLOR,title:{fontSize:12,fontFamily:EMPTY,color:DEFAULT_COLOR},label:{fontSize:12,fontFamily:EMPTY,color:DEFAULT_COLOR}};DEFAULT_AXIS_X={tickColor:DEFAULT_COLOR,title:{fontSize:12,fontFamily:EMPTY,color:DEFAULT_COLOR},label:{fontSize:10,fontFamily:EMPTY,color:DEFAULT_COLOR}};var defaultTheme={chart:{background:DEFAULT_BACKGROUND,fontFamily:"Verdana"},title:{fontSize:18,fontFamily:EMPTY,color:DEFAULT_COLOR},yAxis:DEFAULT_AXIS,xAxis:DEFAULT_AXIS_X,plot:{lineColor:"#dddddd",background:"#ffffff"},series:{label:{fontSize:11,fontFamily:EMPTY,color:DEFAULT_COLOR},colors:["#ac4142","#d28445","#f4bf75","#90a959","#75b5aa","#6a9fb5","#aa759f","#8f5536","#f64142","#e851b6","#ae7172","#d6c475","#f73fd5","#9bd989","#78e5da","#6c67d5","#aed5bf","#84c586","#f97172","#eb81f6"],borderColor:EMPTY,selectionColor:EMPTY},legend:{label:{fontSize:12,fontFamily:EMPTY,color:DEFAULT_COLOR}},tooltip:{}};module.exports=defaultTheme;},{}],61:[function(require,module,exports){var TooltipBase=require("./tooltipBase"),GroupTooltipPositionModel=require("./groupTooltipPositionModel"),chartConst=require("../const"),dom=require("../helpers/domHandler"),renderUtil=require("../helpers/renderUtil"),defaultTheme=require("../themes/defaultTheme"),tooltipTemplate=require("./tooltipTemplate");var GroupTooltip=tui.util.defineClass(TooltipBase,{init:function(params){TooltipBase.call(this,params);},_makeTooltipHtml:function(category,items){var template=tooltipTemplate.tplGroupItem,cssTextTemplate=tooltipTemplate.tplGroupCssText,colors=this._makeColors(this.theme),itemsHtml=tui.util.map(items,function(item,index){return template(tui.util.extend({cssText:cssTextTemplate({color:colors[index]})},item));},this).join("");return tooltipTemplate.tplGroup({category:category,items:itemsHtml});},_setDefaultTooltipPositionOption:function(){if(this.options.align){return;}if(this.isVertical){this.options.align=chartConst.TOOLTIP_DEFAULT_GROUP_ALIGN_OPTION;}else{this.options.align=chartConst.TOOLTIP_DEFAULT_GROUP_HORIZONTAL_ALIGN_OPTION;}},render:function(bound,data){var el=TooltipBase.prototype.render.call(this,bound,data);this.positionModel=new GroupTooltipPositionModel(this.chartDimension,bound,this.isVertical,this.options);this.orgWholeLegendData=this.dataProcessor.getWholeLegendData();return el;},rerender:function(bound,data){TooltipBase.prototype.rerender.call(this,bound,data);this.theme=this._updateLegendTheme(data.checkedLegends);},_updateLegendTheme:function(checkedLegends){var colors=[];tui.util.forEachArray(this.orgWholeLegendData,function(item){var _checkedLegends=checkedLegends[item.chartType]||checkedLegends;if(_checkedLegends[item.index]){colors.push(item.theme.color);}});return{colors:colors};},makeTooltipData:function(){return tui.util.map(this.dataProcessor.getWholeFormattedValues(),function(values,index){return{category:this.dataProcessor.getCategory(index),values:values};},this);},_makeColors:function(theme){var colorIndex=0,legendLabels=this.dataProcessor.getWholeLegendData(),defaultColors,colors,prevChartType;if(theme.colors){return theme.colors;}defaultColors=defaultTheme.series.colors.slice(0,legendLabels.length);return tui.util.map(tui.util.pluck(legendLabels,"chartType"),function(chartType){var color;if(prevChartType!==chartType){colors=theme[chartType]?theme[chartType].colors:defaultColors;colorIndex=0;}prevChartType=chartType;color=colors[colorIndex];colorIndex+=1;return color;});},_makeItemRenderingData:function(values){return tui.util.map(values,function(value,index){var legendLabel=this.dataProcessor.getLegendData(index);return{value:value,legend:legendLabel.label,chartType:legendLabel.chartType,suffix:this.suffix};},this);},_makeGroupTooltipHtml:function(groupIndex){var data=this.data[groupIndex],items=this._makeItemRenderingData(data.values);return this.templateFunc(data.category,items);},_getTooltipSectorElement:function(){var groupTooltipSector;if(!this.groupTooltipSector){this.groupTooltipSector=groupTooltipSector=dom.create("DIV","tui-chart-group-tooltip-sector");dom.append(this.tooltipContainer,groupTooltipSector);}return this.groupTooltipSector;},_makeVerticalTooltipSectorBound:function(height,range,isLine){var width;if(isLine){width=1;height+=6;}else{width=range.end-range.start;}return{dimension:{width:width,height:height},position:{left:range.start+chartConst.SERIES_EXPAND_SIZE,top:chartConst.SERIES_EXPAND_SIZE}};},_makeHorizontalTooltipSectorBound:function(width,range){return{dimension:{width:width,height:range.end-range.start+chartConst.HIDDEN_WIDTH},position:{left:chartConst.SERIES_EXPAND_SIZE-chartConst.HIDDEN_WIDTH,top:range.start+chartConst.SERIES_EXPAND_SIZE}};},_makeTooltipSectorBound:function(size,range,isVertical,isLine){var bound;if(isVertical){bound=this._makeVerticalTooltipSectorBound(size,range,isLine);}else{bound=this._makeHorizontalTooltipSectorBound(size,range);}return bound;},_showTooltipSector:function(size,range,isVertical,index){var groupTooltipSector=this._getTooltipSectorElement(),isLine=(range.start===range.end),bound=this._makeTooltipSectorBound(size,range,isVertical,isLine);if(isLine){this.fire("showGroupTooltipLine",bound);}else{renderUtil.renderDimension(groupTooltipSector,bound.dimension);renderUtil.renderPosition(groupTooltipSector,bound.position);dom.addClass(groupTooltipSector,"show");}this.fire("showGroupAnimation",index);},_hideTooltipSector:function(index){var groupTooltipSector=this._getTooltipSectorElement();dom.removeClass(groupTooltipSector,"show");this.fire("hideGroupAnimation",index);this.fire("hideGroupTooltipLine");},showTooltip:function(elTooltip,params,prevPosition){var dimension,position;if(!tui.util.isUndefined(this.prevIndex)){this.fire("hideGroupAnimation",this.prevIndex);}elTooltip.innerHTML=this._makeGroupTooltipHtml(params.index);this._fireBeforeShowTooltip(params.index,params.range);dom.addClass(elTooltip,"show");this._showTooltipSector(params.size,params.range,params.isVertical,params.index);dimension=this.getTooltipDimension(elTooltip);position=this.positionModel.calculatePosition(dimension,params.range);this.moveToPosition(elTooltip,position,prevPosition);this._fireAfterShowTooltip(params.index,params.range,{element:elTooltip,position:position});this.prevIndex=params.index;},_fireBeforeShowTooltip:function(index,range){this.userEvent.fire("beforeShowTooltip",{index:index,range:range});},_fireAfterShowTooltip:function(index,range,additionParams){this.userEvent.fire("afterShowTooltip",tui.util.extend({index:index,range:range},additionParams));},hideTooltip:function(elTooltip,index){delete this.prevIndex;this._hideTooltipSector(index);this.hideAnimation(elTooltip);}});module.exports=GroupTooltip;},{"../const":15,"../helpers/domHandler":30,"../helpers/renderUtil":33,"../themes/defaultTheme":60,"./groupTooltipPositionModel":62,"./tooltipBase":64,"./tooltipTemplate":65}],62:[function(require,module,exports){var chartConst=require("../const");var GroupTooltipPositionModel=tui.util.defineClass({init:function(chartDimension,areaBound,isVertical,options){this.chartDimension=chartDimension;this.areaBound=areaBound;this.isVertical=isVertical;this.options=options;this.positions={};this._setData(chartDimension,areaBound,isVertical,options);},_getHorizontalDirection:function(alignOption){var direction;alignOption=alignOption||"";if(alignOption.indexOf("left")>-1){direction=chartConst.TOOLTIP_DIRECTION_BACKWARD;}else{if(alignOption.indexOf("center")>-1){direction=chartConst.TOOLTIP_DIRECTION_CENTER;}else{direction=chartConst.TOOLTIP_DIRECTION_FORWARD;}}return direction;},_makeVerticalData:function(chartDimension,areaBound,alignOption){var hDirection=this._getHorizontalDirection(alignOption);return{positionType:"left",sizeType:"width",direction:hDirection,areaPosition:areaBound.position.left,areaSize:areaBound.dimension.width,chartSize:chartDimension.width,basePosition:chartConst.SERIES_EXPAND_SIZE};},_getVerticalDirection:function(alignOption){var direction;alignOption=alignOption||"";if(alignOption.indexOf("top")>-1){direction=chartConst.TOOLTIP_DIRECTION_BACKWARD;}else{if(alignOption.indexOf("bottom")>-1){direction=chartConst.TOOLTIP_DIRECTION_FORWARD;}else{direction=chartConst.TOOLTIP_DIRECTION_CENTER;}}return direction;},_makeHorizontalData:function(chartDimension,areaBound,alignOption){var vDirection=this._getVerticalDirection(alignOption);return{positionType:"top",sizeType:"height",direction:vDirection,areaPosition:areaBound.position.top,areaSize:areaBound.dimension.height,chartSize:chartDimension.height,basePosition:chartConst.SERIES_EXPAND_SIZE};},_setData:function(chartDimension,areaBound,isVertical,options){var verticalData=this._makeVerticalData(chartDimension,areaBound,options.align),horizontalData=this._makeHorizontalData(chartDimension,areaBound,options.align);if(isVertical){this.mainData=verticalData;this.subData=horizontalData;}else{this.mainData=horizontalData;this.subData=verticalData;}this.positionOption=tui.util.extend({left:0,top:0},options.position);this.positions={};},_calculateMainPositionValue:function(tooltipSize,range,data){var isLine=(range.start===range.end),padding=isLine?9:5,value=data.basePosition;if(data.direction===chartConst.TOOLTIP_DIRECTION_FORWARD){value+=range.end+padding;}else{if(data.direction===chartConst.TOOLTIP_DIRECTION_BACKWARD){value+=range.start-tooltipSize-padding;}else{if(isLine){value+=range.start-tooltipSize/2;}else{value+=range.start+((range.end-range.start-tooltipSize)/2);}}}return value;},_calculateSubPositionValue:function(tooltipSize,data){var middle=data.areaSize/2,value;if(data.direction===chartConst.TOOLTIP_DIRECTION_FORWARD){value=middle+data.basePosition;}else{if(data.direction===chartConst.TOOLTIP_DIRECTION_BACKWARD){value=middle-tooltipSize+data.basePosition;}else{value=middle-(tooltipSize/2)+data.basePosition;}}return value;},_makePositionValueDiff:function(value,tooltipSize,data){return value+data.areaPosition+tooltipSize-data.chartSize;},_adjustBackwardPositionValue:function(value,range,tooltipSize,data){var changedValue;if(value<-data.areaPosition){changedValue=this._calculateMainPositionValue(tooltipSize,range,{direction:chartConst.TOOLTIP_DIRECTION_FORWARD,basePosition:data.basePosition});if(this._makePositionValueDiff(changedValue,tooltipSize,data)>0){value=-data.areaPosition;}else{value=changedValue;}}return value;},_adjustForwardPositionValue:function(value,range,tooltipSize,data){var diff=this._makePositionValueDiff(value,tooltipSize,data),changedValue;if(diff>0){changedValue=this._calculateMainPositionValue(tooltipSize,range,{direction:chartConst.TOOLTIP_DIRECTION_BACKWARD,basePosition:data.basePosition});if(changedValue<-data.areaPosition){value-=diff;}else{value=changedValue;}}return value;},_adjustMainPositionValue:function(value,range,tooltipSize,data){if(data.direction===chartConst.TOOLTIP_DIRECTION_BACKWARD){value=this._adjustBackwardPositionValue(value,range,tooltipSize,data);}else{if(data.direction===chartConst.TOOLTIP_DIRECTION_FORWARD){value=this._adjustForwardPositionValue(value,range,tooltipSize,data);}else{value=tui.util.max([value,-data.areaPosition]);value=tui.util.min([value,data.chartSize-data.areaPosition-tooltipSize]);}}return value;},_adjustSubPositionValue:function(value,tooltipSize,data){if(data.direction===chartConst.TOOLTIP_DIRECTION_FORWARD){value=tui.util.min([value,data.chartSize-data.areaPosition-tooltipSize]);}else{value=tui.util.max([value,-data.areaPosition]);}return value;},_makeCachingKey:function(range){return range.start+"-"+range.end;},_addPositionOptionValue:function(position,positionType){return position+this.positionOption[positionType];},_makeMainPositionValue:function(tooltipDimension,range,main){var value;value=this._calculateMainPositionValue(tooltipDimension[main.sizeType],range,main);value=this._addPositionOptionValue(value,main.positionType);value=this._adjustMainPositionValue(value,range,tooltipDimension[main.sizeType],main);return value;},_makeSubPositionValue:function(tooltipDimension,sub){var value;value=this._calculateSubPositionValue(tooltipDimension[sub.sizeType],sub);value=this._addPositionOptionValue(value,sub.positionType);value=this._adjustSubPositionValue(value,tooltipDimension[sub.sizeType],sub);return value;},calculatePosition:function(tooltipDimension,range){var key=this._makeCachingKey(range),main=this.mainData,sub=this.subData,position=this.positions[key];if(!position){position={};position[main.positionType]=this._makeMainPositionValue(tooltipDimension,range,main);position[sub.positionType]=this._makeSubPositionValue(tooltipDimension,sub);this.positions[key]=position;}return position;},updateOptions:function(options){this.options=options;this._setData(this.chartDimension,this.areaBound,this.isVertical,options);},updateBound:function(bound){this.areaBound=bound;this._setData(this.chartDimension,bound,this.isVertical,this.options);}});module.exports=GroupTooltipPositionModel;},{"../const":15}],63:[function(require,module,exports){var TooltipBase=require("./tooltipBase"),chartConst=require("../const"),predicate=require("../helpers/predicate"),dom=require("../helpers/domHandler"),eventListener=require("../helpers/eventListener"),renderUtil=require("../helpers/renderUtil"),tooltipTemplate=require("./tooltipTemplate");var Tooltip=tui.util.defineClass(TooltipBase,{init:function(params){TooltipBase.call(this,params);this.initValues();this.containerBound=null;},_makeTooltipHtml:function(category,item){return tooltipTemplate.tplDefault(tui.util.extend({category:category||""},item));},initValues:function(){var values;if(tui.util.isArray(this.values)){values=this.values;this.values={};this.values[this.chartType]=values;}},_setDefaultTooltipPositionOption:function(){if(this.options.align){return;}if(this.isVertical){this.options.align=chartConst.TOOLTIP_DEFAULT_ALIGN_OPTION;}else{this.options.align=chartConst.TOOLTIP_DEFAULT_HORIZONTAL_ALIGN_OPTION;}},render:function(bound,data){var el=TooltipBase.prototype.render.call(this,bound,data);if(data){this.seriesPosition=data.seriesPosition;}this._attachEvent(el);return el;},rerender:function(bound,data){TooltipBase.prototype.rerender.call(this,bound,data);this.initValues();},resize:function(bound,data){if(data){this.seriesPosition=data.seriesPosition;}TooltipBase.prototype.resize.call(this,bound,data);this._updateContainerBound();},makeTooltipData:function(){var categories=this.dataProcessor.getCategories(),orgFormattedValues=this.dataProcessor.getFormattedGroupValues(),orgLegendLabels=this.dataProcessor.getLegendLabels(),formattedValues={},legendLabels={},tooltipData={};if(tui.util.isArray(orgFormattedValues)){formattedValues[this.chartType]=orgFormattedValues;legendLabels[this.chartType]=orgLegendLabels;}else{formattedValues=orgFormattedValues;legendLabels=orgLegendLabels;}tui.util.forEach(formattedValues,function(groupValues,chartType){tooltipData[chartType]=tui.util.map(groupValues,function(values,groupIndex){return tui.util.map(values,function(value,index){return{category:categories?categories[groupIndex]:"",legend:legendLabels[chartType][index],value:value};});});});return tooltipData;},_fireShowAnimation:function(indexes,chartType){var eventName=renderUtil.makeCustomEventName("show",chartType,"animation");this.fire(eventName,indexes);},_fireHideAnimation:function(indexes,chartType){var eventName=renderUtil.makeCustomEventName("hide",chartType,"animation");this.fire(eventName,indexes);},_setIndexesCustomAttribute:function(elTooltip,indexes){elTooltip.setAttribute("data-groupIndex",indexes.groupIndex);elTooltip.setAttribute("data-index",indexes.index);},_getIndexesCustomAttribute:function(elTooltip){var groupIndex=elTooltip.getAttribute("data-groupIndex"),index=elTooltip.getAttribute("data-index"),indexes=null;if(!tui.util.isNull(groupIndex)&&!tui.util.isNull(index)){indexes={groupIndex:parseInt(groupIndex,10),index:parseInt(index,10)};}return indexes;},_setShowedCustomAttribute:function(elTooltip,status){elTooltip.setAttribute("data-showed",status);},_isShowedTooltip:function(elTooltip){var isShowed=elTooltip.getAttribute("data-showed");return isShowed==="true"||isShowed===true;},_onMouseover:function(e){var elTarget=e.target||e.srcElement,indexes,chartType;if(!dom.hasClass(elTarget,chartConst.TOOLTIP_PREFIX)){elTarget=dom.findParentByClass(elTarget,chartConst.TOOLTIP_PREFIX);}indexes=this._getIndexesCustomAttribute(elTarget);chartType=elTarget.getAttribute("data-chart-type");this._setShowedCustomAttribute(elTarget,true);this._fireShowAnimation(indexes,chartType);},_onMouseout:function(e){var elTarget=e.target||e.srcElement;if(!dom.hasClass(elTarget,chartConst.TOOLTIP_PREFIX)){elTarget=dom.findParentByClass(elTarget,chartConst.TOOLTIP_PREFIX);}this.hideTooltip(elTarget);},_updateContainerBound:function(){this.containerBound=this.tooltipContainer.getBoundingClientRect();},_getTooltipContainerBound:function(){if(!this.containerBound){this._updateContainerBound();}return this.containerBound;},_calculateTooltipPositionAboutPieChart:function(params){var containerBound=this._getTooltipContainerBound();params.bound.left=params.eventPosition.clientX-containerBound.left;params.bound.top=params.eventPosition.clientY-containerBound.top;return this._calculateTooltipPositionAboutNotBarChart(params);},_calculateTooltipPositionAboutNotBarChart:function(params){var bound=params.bound,positionOption=params.positionOption,minusWidth=params.dimension.width-(bound.width||0),lineGap=bound.width?0:chartConst.TOOLTIP_GAP,alignOption=params.alignOption||"",tooltipHeight=params.dimension.height,result={};result.left=bound.left+positionOption.left;result.top=bound.top-tooltipHeight+positionOption.top;if(alignOption.indexOf("left")>-1){result.left-=minusWidth+lineGap;}else{if(alignOption.indexOf("center")>-1){result.left-=minusWidth/2;}else{result.left+=lineGap;}}if(alignOption.indexOf("bottom")>-1){result.top+=tooltipHeight+lineGap;}else{if(alignOption.indexOf("middle")>-1){result.top+=tooltipHeight/2;}else{result.top-=chartConst.TOOLTIP_GAP;}}return result;},_calculateTooltipPositionAboutBarChart:function(params){var bound=params.bound,positionOption=params.positionOption,minusHeight=params.dimension.height-(bound.height||0),alignOption=params.alignOption||"",tooltipWidth=params.dimension.width,result={};result.left=bound.left+bound.width+positionOption.left;result.top=bound.top+positionOption.top;if(alignOption.indexOf("left")>-1){result.left-=tooltipWidth;}else{if(alignOption.indexOf("center")>-1){result.left-=tooltipWidth/2;}else{result.left+=chartConst.TOOLTIP_GAP;}}if(alignOption.indexOf("top")>-1){result.top-=minusHeight;}else{if(alignOption.indexOf("middle")>-1){result.top-=minusHeight/2;}}return result;},_adjustPosition:function(chartDimension,areaPosition,tooltipDimension,position){position.left=Math.max(position.left,-areaPosition.left);position.left=Math.min(position.left,chartDimension.width-areaPosition.left-tooltipDimension.width);position.top=Math.max(position.top,-areaPosition.top);position.top=Math.min(position.top,chartDimension.height-areaPosition.top-tooltipDimension.height);return position;},_calculateTooltipPosition:function(params){var position={},sizeType,positionType,addPadding;if(params.eventPosition){return this._calculateTooltipPositionAboutPieChart(params);}if(predicate.isBarChart(params.chartType)){position=this._calculateTooltipPositionAboutBarChart(params);sizeType="width";positionType="left";addPadding=1;}else{position=this._calculateTooltipPositionAboutNotBarChart(params);sizeType="height";positionType="top";addPadding=-1;}if(params.allowNegativeTooltip){position=this._moveToSymmetry(position,{bound:params.bound,indexes:params.indexes,dimension:params.dimension,chartType:params.chartType,sizeType:sizeType,positionType:positionType,addPadding:addPadding});}position=this._adjustPosition(this.chartDimension,this.bound.position,params.dimension,position);return position;},_moveToSymmetry:function(position,params){var bound=params.bound,sizeType=params.sizeType,positionType=params.positionType,value=this.dataProcessor.getValue(params.indexes.groupIndex,params.indexes.index,params.chartType),movedPositionValue;if(value<0){movedPositionValue=bound[sizeType]+params.dimension[sizeType]+(chartConst.TOOLTIP_GAP*2);if(positionType==="left"){position[positionType]-=movedPositionValue;}else{position[positionType]+=movedPositionValue;}}return position;},_makeSingleTooltipHtml:function(chartType,indexes){var data=tui.util.pick(this.data,chartType,indexes.groupIndex,indexes.index);return this.templateFunc(data.category,{value:data.value,legend:data.legend,suffix:this.suffix});},_isChangedIndexes:function(prevIndexes,indexes){return !!prevIndexes&&(prevIndexes.groupIndex!==indexes.groupIndex||prevIndexes.index!==indexes.index);},showTooltip:function(elTooltip,params,prevPosition){var indexes=params.indexes,prevIndexes=this._getIndexesCustomAttribute(elTooltip),prevChartType,position;if(this._isChangedIndexes(prevIndexes,indexes)){prevChartType=elTooltip.getAttribute("data-chart-type");this._fireHideAnimation(prevIndexes,prevChartType);}elTooltip.innerHTML=this._makeSingleTooltipHtml(params.chartType,indexes);elTooltip.setAttribute("data-chart-type",params.chartType);this._setIndexesCustomAttribute(elTooltip,indexes);this._setShowedCustomAttribute(elTooltip,true);this._fireBeforeShowTooltip(indexes);dom.addClass(elTooltip,"show");position=this._calculateTooltipPosition(tui.util.extend({dimension:this.getTooltipDimension(elTooltip),positionOption:tui.util.extend({left:0,top:0},this.options.position),alignOption:this.options.align||""},params));this.moveToPosition(elTooltip,position,prevPosition);this._fireShowAnimation(indexes,params.chartType);this._fireAfterShowTooltip(indexes,{element:elTooltip,position:position});},_makeShowTooltipParams:function(indexes,additionParams){var legendIndex=indexes.index,legendData=this.dataProcessor.getLegendData(legendIndex),params;params=tui.util.extend({chartType:legendData.chartType,legend:legendData.label,legendIndex:legendIndex,index:indexes.groupIndex},additionParams);return params;},_fireBeforeShowTooltip:function(indexes){var params=this._makeShowTooltipParams(indexes);this.userEvent.fire("beforeShowTooltip",params);},_fireAfterShowTooltip:function(indexes,additionParams){var params=this._makeShowTooltipParams(indexes,additionParams);this.userEvent.fire("afterShowTooltip",params);},hideTooltip:function(elTooltip){var that=this,indexes=this._getIndexesCustomAttribute(elTooltip),chartType=elTooltip.getAttribute("data-chart-type");this._setShowedCustomAttribute(elTooltip,false);this._fireHideAnimation(indexes,chartType);if(this._isChangedIndexes(this.prevIndexes,indexes)){delete this.prevIndexes;}setTimeout(function(){if(that._isShowedTooltip(elTooltip)){return;}that.hideAnimation(elTooltip);that=null;indexes=null;},chartConst.HIDE_DELAY);},_attachEvent:function(el){eventListener.bindEvent("mouseover",el,tui.util.bind(this._onMouseover,this));eventListener.bindEvent("mouseout",el,tui.util.bind(this._onMouseout,this));}});module.exports=Tooltip;},{"../const":15,"../helpers/domHandler":30,"../helpers/eventListener":31,"../helpers/predicate":32,"../helpers/renderUtil":33,"./tooltipBase":64,"./tooltipTemplate":65}],64:[function(require,module,exports){var dom=require("../helpers/domHandler"),renderUtil=require("../helpers/renderUtil");var TooltipBase=tui.util.defineClass({init:function(params){tui.util.extend(this,params);this.className="tui-chart-tooltip-area";this.tooltipContainer=null;this.data=this.makeTooltipData();this.suffix=this.options.suffix?"&nbsp;"+this.options.suffix:"";this.templateFunc=this.options.template||tui.util.bind(this._makeTooltipHtml,this);this._setDefaultTooltipPositionOption();this._saveOriginalPositionOptions();},_makeTooltipHtml:function(){},_setDefaultTooltipPositionOption:function(){},_saveOriginalPositionOptions:function(){this.orgPositionOptions={align:this.options.align,position:this.options.position};},makeTooltipData:function(){},render:function(bound,data){var el=dom.create("DIV",this.className);renderUtil.renderPosition(el,bound.position);this.bound=bound;this.chartDimension=data.chartDimension;this.tooltipContainer=el;return el;},rerender:function(bound,data){this.bound=bound;tui.util.extend(this,data);this.data=this.makeTooltipData();if(this.positionModel){this.positionModel.updateBound(bound);}},resize:function(bound,data){this.bound=bound;this.chartDimension=data.chartDimension;renderUtil.renderPosition(this.tooltipContainer,bound.position);if(this.positionModel){this.positionModel.updateBound(bound);}},_getTooltipElement:function(){var tooltipElement;if(!this.tooltipElement){this.tooltipElement=tooltipElement=dom.create("DIV","tui-chart-tooltip");dom.append(this.tooltipContainer,tooltipElement);}return this.tooltipElement;},onShow:function(params){var tooltipElement=this._getTooltipElement(),prevPosition;if(tooltipElement.offsetWidth){prevPosition={left:tooltipElement.offsetLeft,top:tooltipElement.offsetTop};}this.showTooltip(tooltipElement,params,prevPosition);},getTooltipDimension:function(tooltipElement){return{width:tooltipElement.offsetWidth,height:tooltipElement.offsetHeight};},_cancelHide:function(){if(!this.activeHider){return;}clearInterval(this.activeHider.timerId);this.activeHider.setOpacity(1);},_cancelSlide:function(){if(!this.activeSliders){return;}tui.util.forEach(this.activeSliders,function(slider){clearInterval(slider.timerId);});this._completeSlide();},moveToPosition:function(tooltipElement,position,prevPosition){if(prevPosition){this._cancelHide();this._cancelSlide();this._slideTooltip(tooltipElement,prevPosition,position);}else{renderUtil.renderPosition(tooltipElement,position);}},_getSlider:function(element,type){if(!this.slider){this.slider={};}if(!this.slider[type]){this.slider[type]=new tui.component.Effects.Slide({flow:type,element:element,duration:100});}return this.slider[type];},_completeSlide:function(){delete this.activeSliders;},_slideTooltip:function(tooltipElement,prevPosition,position){var vSlider=this._getSlider(tooltipElement,"vertical"),hSlider=this._getSlider(tooltipElement,"horizontal"),moveTop=prevPosition.top-position.top,moveLeft=prevPosition.left-position.left,vDirection=moveTop>0?"forword":"backword",hDirection=moveTop>0?"forword":"backword",activeSliders=[],complate=tui.util.bind(this._completeSlide,this);if(moveTop){vSlider.setDistance(moveTop);vSlider.action({direction:vDirection,start:prevPosition.top,complete:complate});activeSliders.push(vSlider);}if(moveLeft){hSlider.setDistance(moveLeft);hSlider.action({direction:hDirection,start:prevPosition.left,complete:complate});activeSliders.push(vSlider);}if(activeSliders.length){this.activeSliders=activeSliders;}},onHide:function(index){var tooltipElement=this._getTooltipElement();this.hideTooltip(tooltipElement,index);},_getHider:function(element){if(!this.hider){this.hider=new tui.component.Effects.Fade({element:element,duration:100});}return this.hider;},hideAnimation:function(tooltipElement){this.activeHider=this._getHider(tooltipElement);this.activeHider.action({start:1,end:0,complete:function(){dom.removeClass(tooltipElement,"show");tooltipElement.style.cssText="";}});},setAlign:function(align){this.options.align=align;if(this.positionModel){this.positionModel.updateOptions(this.options);}},setPosition:function(position){this.options.position=tui.util.extend({},this.options.position,position);if(this.positionModel){this.positionModel.updateOptions(this.options);}},resetAlign:function(){var align=this.orgPositionOptions.align;this.options.align=align;if(this.positionModel){this.positionModel.updateOptions(this.options);}},resetPosition:function(){var position=this.orgPositionOptions.position;this.options.position=position;if(this.positionModel){this.positionModel.updateOptions(this.options);}}});tui.util.CustomEvents.mixin(TooltipBase);module.exports=TooltipBase;},{"../helpers/domHandler":30,"../helpers/renderUtil":33}],65:[function(require,module,exports){var templateMaker=require("../helpers/templateMaker");var tags={HTML_DEFAULT_TEMPLATE:'<div class="tui-chart-default-tooltip"><div>{{ category }}</div><div><span>{{ legend }}</span>:&nbsp;<span>{{ value }}</span><span>{{ suffix }}</span></div></div>',HTML_GROUP:'<div class="tui-chart-default-tooltip tui-chart-group-tooltip"><div>{{ category }}</div>{{ items }}</div>',HTML_GROUP_ITEM:'<div><div class="tui-chart-legend-rect {{ chartType }}" style="{{ cssText }}"></div>&nbsp;<span>{{ legend }}</span>:&nbsp;<span>{{ value }}</span><span>{{ suffix }}</span></div>',GROUP_CSS_TEXT:"background-color:{{ color }}"};module.exports={tplDefault:templateMaker.template(tags.HTML_DEFAULT_TEMPLATE),tplGroup:templateMaker.template(tags.HTML_GROUP),tplGroupItem:templateMaker.template(tags.HTML_GROUP_ITEM),tplGroupCssText:templateMaker.template(tags.GROUP_CSS_TEXT)};},{"../helpers/templateMaker":34}]},{},[3,41]);